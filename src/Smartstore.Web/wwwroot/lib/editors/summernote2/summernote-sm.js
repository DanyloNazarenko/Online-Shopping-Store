/*! 
Super simple WYSIWYG editor v0.9.1
https://summernote.org

Copyright 2013- Hackerwins and contributors
Summernote may be freely distributed under the MIT license.

Date: 2024-11-23T01:32Z
 */
(function(){"use strict";$.summernote=$.summernote||{lang:{}},$.extend(!0,$.summernote.lang,{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size",sizeunit:"Font Size Unit"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize full",resizeHalf:"Resize half",resizeQuarter:"Resize quarter",resizeNone:"Original size",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Remove float",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image",original:"Original"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL",providers:"(YouTube, Google Drive, Vimeo, Vine, Instagram, DailyMotion, Youku, Peertube)"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table",addRowAbove:"Add row above",addRowBelow:"Add row below",addColLeft:"Add column left",addColRight:"Add column right",delRow:"Delete row",delCol:"Delete column",delTable:"Delete table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",p:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Text Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default",cpSelect:"Select"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},help:{escape:"Escape",insertParagraph:"Insert Paragraph",undo:"Undo the last command",redo:"Redo the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Undo",redo:"Redo"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select special characters"},output:{noSelection:"No selection made!"}}});const ee=["sans-serif","serif","monospace","cursive","fantasy"];function oe(e){return $.inArray(e.toLowerCase(),ee)===-1?`'${e}'`:e}function $o(){const e="mw",t="20px";var n=document.createElement("canvas"),r=n.getContext("2d",{willReadFrequently:!0});n.width=40,n.height=20,r.textAlign="center",r.fillStyle="black",r.textBaseline="middle";function a(c,d){r.clearRect(0,0,40,20),r.font=t+" "+oe(c)+', "'+d+'"',r.fillText(e,40/2,20/2);var h=r.getImageData(0,0,40,20).data;return h.join("")}return c=>{const d=c==="Comic Sans MS"?"Courier New":"Comic Sans MS";let h=a(d,d),u=a(c,d);return h!==u}}const Q=navigator.userAgent,St=/MSIE|Trident/i.test(Q);let Nt;if(St){let e=/MSIE (\d+[.]\d+)/.exec(Q);e&&(Nt=parseFloat(e[1])),e=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(Q),e&&(Nt=parseFloat(e[1]))}const st=/Edge\/\d+/.test(Q),So="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0,No=St?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input",L={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:St,isEdge:st,isFF:!st&&/firefox/i.test(Q),isPhantom:/PhantomJS/i.test(Q),isWebkit:!st&&/webkit/i.test(Q),isChrome:!st&&/chrome/i.test(Q),isSafari:!st&&/safari/i.test(Q)&&!/chrome/i.test(Q),browserVersion:Nt,isSupportTouch:So,isFontInstalled:$o(),isW3CRangeSupport:!!document.createRange,inputEventName:No,genericFontFamilies:ee,validFontName:oe},H={isArguments:e=>_.isArguments(e),isArray:e=>_.isArray(e),isArrayBuffer:e=>_.isArrayBuffer(e),isBoolean:e=>_.isBoolean(e),isDataView:e=>_.isDataView(e),isDate:e=>_.isDate(e),isNode:e=>e instanceof Node,isElement:e=>_.isElement(e),isError:e=>_.isError(e),isFunction:e=>_.isFunction(e),isFinite:e=>_.isFinite(e),isNaN:e=>_.isNaN(e),isNull:e=>e===null,isNullOrUndefined:e=>e==null,isAssigned:e=>e!=null&&e!=null,isNumber:e=>_.isNumber(e),isObject:e=>_.isObject(e),isRegExp:e=>_.isRegExp(e),isString:e=>_.isString(e),isSymbol:e=>_.isSymbol(e),isTypedArray:e=>_.isTypedArray(e),isUndefined:e=>_.isUndefined(e),isJquery:e=>e instanceof jQuery},Eo=e=>function(t){return e===t},Ho=(e,t)=>e===t,To=e=>function(t,i){return t[e]===i[e]},Ro=()=>!0,Lo=()=>!1,Ao=e=>e;function zo(e){return function(){return!e.apply(e,arguments)}}function Mo(...e){const t=e,i=t.length;return i===0?!1:function(s){for(var n=0;n<i;n++)if(t[n]&&!t[n](s))return!1;return!0}}function Po(...e){const t=e,i=t.length;return i===0?!1:function(s){for(var n=0;n<i;n++)if(t[n]&&t[n](s))return!0;return!1}}function Bo(e,t){return function(){return e[t].apply(e,arguments)}}let ie=0;function Io(){ie=0}function Fo(e){const t=++ie+"";return e?e+t:t}const Do=(e,t,i)=>_.debounce(e,t,i),Oo=(e,t,i)=>_.delay(e,t,i),Vo=(e,t)=>_.defer(e,t),Uo=(e,t,i)=>_.throttle(e,t,i);function _o(e,t,i){return Math.min(Math.max(e,t),i)}function jo(e){return()=>e}const y={eq:Eo,eq2:Ho,peq2:To,ok:Ro,fail:Lo,self:Ao,not:zo,and:Mo,or:Po,invoke:Bo,resetUniqueId:Io,uniqueId:Fo,debounce:Do,delay:Oo,defer:Vo,throttle:Uo,clamp:_o,constant:jo},qo=e=>e.length!==void 0,se=e=>_.first(e),Et=e=>_.last(e),Wo=e=>_.initial(e),ne=e=>_.rest(e),Ko=(e,t,i)=>_.findIndex(e,t,i)>-1,Go=(e,t,i)=>_.findIndex(e,t,i),Qo=(e,t,i)=>_.find(e,t,i),Zo=(e,t,i)=>_.every(e,t,i),Yo=(e,t,i)=>_.some(e,t,i),Jo=(e,t)=>e!=null&&e.contains?e.contains(t):_.contains(e,t),Xo=(e,t,i)=>(t=t||y.self,_.reduce(e,function(s,n){return s+t(n)},0,i)),ti=(e,t,i)=>_.isFunction(Array.from)?t?Array.from(e,t,i):Array.from(e):t?_.map(e,t,i):_.toArray(e),ei=e=>_.isEmpty(e),oi=(e,t)=>{if(!e.length)return[];const i=ne(e),s=H.isFunction(t)?t:y.peq2(t);return i.reduce(function(n,r){const a=Et(n);return s(Et(a),r)?a[a.length]=r:n[n.length]=[r],n},[[se(e)]])},ii=(e,t,i)=>_.groupBy(e,t,i),si=e=>_.compact(e),ni=(e,t,i)=>_.uniq(e,t,null,i),ri=(e,t)=>{if(e!=null&&e.length&&t){const i=e.indexOf(t);return i===-1||i===e.length-1?null:e[i+1]}return null},ai=(e,t)=>{if(e!=null&&e.length&&t){const i=e.indexOf(t);return i<=0?null:e[i-1]}return null},li=(e,t,i=null)=>_.each(e,t,i),ci=(e,t,i,s)=>_.foldl(e,t,i,s),di=(e,t,i,s)=>_.foldr(e,t,i,s),hi=(e,t,i)=>_.filter(e,t,i),ui=(e,t,i)=>_.reject(e,t,i),fi=(e,t,i=null)=>_.map(e,t,i);function pi(e,t=null,i=null){const s=H.isString(e)?e.split(t||","):e||[];i=i||{};let n=s.length;for(;n--;)i[s[n]]={};return i}const re=(e,t,i,s)=>{s=s||e,e&&(i&&(e=o[i]),_.each(e,(n,r)=>t.call(s,n,r,i)===!1?!1:(re(n,t,i,s),!0)))},f={head:se,last:Et,initial:Wo,tail:ne,prev:ai,next:ri,exists:Ko,find:Qo,findIndex:Go,contains:Jo,all:Zo,any:Yo,sum:Xo,from:ti,isEmpty:ei,clusterBy:oi,groupBy:ii,compact:si,unique:ni,each:li,foldl:ci,foldr:di,filter:hi,reject:ui,map:fi,makeMap:pi,isArrayLike:qo,walk:re},mi=/^[ \t\r\n]*$/,gi=/\s/,bi=/^(?!-)([a-zA-Z0-9-]{1,63}\.)+[a-zA-Z]{2,6}$/,vi=/^(([01]?[0-9]?[0-9]|2([0-4][0-9]|5[0-5]))\.){3}([01]?[0-9]?[0-9]|2([0-4][0-9]|5[0-5]))$/,ae=/^[A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?/,Ci=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,wi=/^(\+?\d{1,3}[\s-]?)?(\d{1,4})[\s-]?(\d{1,4})[\s-]?(\d{1,4})$/,le=(e,t,i)=>t===""||e.length>=t.length&&e.substr(i,i+t.length)===t,ki=(e,t)=>le(e,t,0),yi=(e,t)=>le(e,t,e.length-t.length),xi=e=>_.escape(e),$i=e=>_.unescape(e),Si=e=>gi.test(e),Ni=e=>mi.test(e),Ei=(e,t,i=0,s)=>{const n=e.indexOf(t,i);return n!==-1?H.isUndefined(s)?!0:n+t.length<=s:!1},Hi=(e,t)=>H.isRegExp(e)?e.test(t):e==t,Ti=(e,t)=>(t=t||"",t+e.split(".").map(i=>i.substring(0,1).toUpperCase()+i.substring(1)).join("")),Ri=e=>e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),ce=e=>e&&(bi.test(e)||vi.test(e)),Li=e=>e&&Ci.test(e),Ai=e=>e&&wi.test(e),zi=e=>e&&ae.test(e),Mi=e=>e&&(ae.test(e)||ce(e)),Pi=(e,t=null)=>Array.isArray(e)?e:e===""?[]:e.split(t||",").map(i=>i.trim()),de=(e,t,i)=>i<0?-1:e.lastIndexOf(t,i),q={startsWith:ki,endsWith:yi,contains:Ei,hasWhiteSpace:Si,isAllWhitespace:Ni,escape:xi,unescape:$i,matches:Hi,namespaceToCamel:Ti,camelCaseToHyphens:Ri,isValidHost:ce,isValidEmail:Li,isValidTel:Ai,startsWithUrlScheme:zi,isValidUrl:Mi,explode:Pi,findPosition:(e,t)=>{const i=e.indexOf(t);if(i>0){const s=de(e,`
`,i-1),n=i-s-1;let r=0;for(let a=s;a>=0;a=de(e,`
`,a-1))r++;return{line:r,column:n}}return null}},W={has:(e,t)=>e&&e.hasOwnProperty(t),get:(e,t,i)=>_.get(e,t,i),valueOrDefault:(e,t)=>H.isNullOrUndefined(e)?t:e,isEqual:(e,t)=>_.isEqual(e,t),isMatch:(e,t)=>_.isMatch(e,t),extend:(e,t)=>_.extendOwn(e,t),invert:e=>_.invert(e)},he={},ue=f.makeMap,ut=f.each,fe={},Bi=()=>{const t="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul center dir isindex noframes article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",i="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen svg acronym applet basefont big font strike tt textarea u var #text #comment",s=[t,i].join(" "),n={},r=(c,d)=>{n[c]={children:f.makeMap(d)}},a=(c,d="")=>{d=d==null?void 0:d.trim();const h=d?d.trim().split(" "):[],u=c.trim().split(" ");let p=u.length;for(;p--;)r(u[p],h)};return a("html","head body"),a("head","base command link meta noscript script style title"),a("body",s),a("dd div address dt caption",s),a("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn",i),a("ol li","li"),a("li blockquote",s),a("dl","dt dd"),a("a ins del iframe",s),a("object",[s,"param"].join(" ")),a("map",[s,"area"].join(" ")),a("table","caption colgroup thead tfoot tbody tr"),a("colgroup","col"),a("tbody thead tfoot","tr"),a("tr","td th"),a("td th",s),a("form",s),a("fieldset",[s,"legend"].join(" ")),a("label button q",i),a("select","option optgroup"),a("optgroup","option"),a("menu",[s,"li"].join(" ")),a("noscript",s),a("wbr"),a("ruby",[i,"rt rp"].join(" ")),a("figcaption",s),a("mark rt rp bdi",i),a("summary",[i,"h1 h2 h3 h4 h5 h6"].join(" ")),a("canvas",s),a("video",[s,"track source"].join(" ")),a("audio",[s,"track source"].join(" ")),a("picture","img source"),a("datalist",[i,"option"].join(" ")),a("article section nav aside main header footer",s),a("hgroup","h1 h2 h3 h4 h5 h6"),a("figure",[s,"figcaption"].join(" ")),a("time output progress meter",i),a("dialog",s),a("details",[s,"summary"].join(" ")),ut([n.video,n.audio],c=>{delete c.children.audio,delete c.children.video}),ut("a form meter progress dfn".split(" "),c=>{n[c]&&delete n[c].children[c]}),delete n.caption.children.table,delete n.script,n},Ii=(e,t)=>{let i=ue(e," ",ue(e.toUpperCase()," "));return $.extend(i,t)},I=(e,t,i)=>{let s=he[e];return s||(s=Ii(t,i),he[e]=s),s},Fi=Bi(),pe={};ut(Fi,(e,t)=>{pe[t]=e.children});const Di=I("whitespace_elements","pre script noscript style textarea video audio iframe object code"),Oi=I("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),ft=I("void_elements","area audio base basefont br col frame hr iframe img input isindex link meta param embed source video wbr track"),Vi=I("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),me="td th iframe video audio object script code",Ui=I("non_empty_elements",me+" pre svg",ft),_i=I("move_caret_before_on_enter_elements",me+" table",ft),Ht="h1 h2 h3 h4 h5 h6",ji=I("heading_elements",Ht),Tt=I("text_block_elements",Ht+" p div li address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Rt=I("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",Tt),qi=I("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),Wi=I("text_root_block_elements","td th li dt dd figcaption caption details summary",Tt),Ki=I("transparent_elements","a ins del canvas map"),ge=I("wrap_block_elements","pre "+Ht);ut("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),e=>{fe[e]=new RegExp("</"+e+"[^>]*>","gi")});const Gi=y.constant(ji),Qi=y.constant(Rt),Zi=y.constant(Vi),Yi=y.constant(Tt),Ji=y.constant(Wi),Xi=y.constant(qi),ts=y.constant(Object.seal(ft)),es=y.constant(Oi),os=y.constant(Ui),is=y.constant(_i),ss=y.constant(Di),be=y.constant(Ki),ns=y.constant(ge),rs=y.constant(Object.seal(fe)),as=(e,t)=>{const i=pe[e.toLowerCase()];return!!(!i||i[t.toLowerCase()])},ls=e=>W.has(Rt,e),ve=e=>!q.startsWith(e,"#")&&!W.has(Rt,e),cs=e=>W.has(ge,e)||ve(e),ds=e=>W.has(ft,e),Ce=e=>W.has(be(),e),nt={getHeadingElements:Gi,getBlockElements:Qi,getVoidElements:ts,getTextBlockElements:Yi,getTextInlineElements:Xi,getTextRootBlockElements:Ji,getBoolAttrs:Zi,getSelfClosingElements:es,getNonEmptyElements:os,getMoveCaretBeforeOnEnterElements:is,getWhitespaceElements:ss,getTransparentElements:be,getWrapBlockElements:ns,getSpecialElements:rs,isValidChild:as,isBlock:ls,isInline:ve,isWrapper:cs,isVoid:ds,isTransparentElementName:Ce,isTransparentElement:e=>dom.isElement(e)&&Ce(e.nodeName)},F=e=>H.isJquery(e)?e.get(0):e,we=e=>{const t=e.charCodeAt(0);return t>=65&&t<=90},ke=(e,t)=>{if(Z(e)){const i=e.ownerDocument.defaultView;if(i){const s=i.getComputedStyle(e,null);return s?s.getPropertyValue(t):null}}return null},R=e=>{const t=e.toUpperCase();return i=>H.isAssigned(i)&&(we(i.nodeName)?i.nodeName:i.nodeName.toUpperCase())===t},tt=e=>{if(H.isString(e)&&(e=q.explode(e," ")),e.length===0||e==="*")return y.ok;if(e.length==1)return R(e[0]);const t=e.map(i=>i.toUpperCase());return i=>{if(i&&i.nodeName){const s=we(i.nodeName)?i.nodeName:i.nodeName.toUpperCase();return f.contains(t,s)}return!1}},hs=e=>t=>t&&W.has(e,t.nodeName),us=(e,t)=>{const i=t.toLowerCase().split(" ");return s=>{const n=ke(s,e);return n&&f.contains(i,n)}},fs=e=>t=>t&&$(t).hasClass(e),ps=e=>t=>Z(t)&&t.hasAttribute(e),ms=(e,t)=>i=>Z(i)&&i.getAttribute(e)===t,gs=e=>t=>!!(Lt(t)&&(t.contentEditable===e||t.getAttribute("data-note-contenteditable")===e)),D=(e,t)=>H.isFunction(e)?e:ye(e)?y.eq(e):H.isString(e)&&e.length?i=>i.matches&&i.matches(e):t,et=e=>t=>!!t&&t.nodeType===e,ye=e=>H.isNumber(e==null?void 0:e.nodeType),Z=et(1),O=et(3),bs=et(4),vs=et(7),Cs=et(8),ws=et(9),ks=et(11),xe=e=>Z(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",Lt=y.and(Z,y.not(xe)),ys=e=>!!e&&!Object.getPrototypeOf(e),xs=R("BODY"),$s=R("PRE"),At=R("LI"),Ss=R("TABLE"),Ns=R("DATA"),Es=R("HR"),Hs=R("LI"),Ts=R("DETAILS"),Rs=R("SUMMARY"),$e=R("BLOCKQUOTE"),Se=R("A"),Ls=R("DIV"),As=R("SPAN"),zs=R("B"),Ms=R("U"),Ps=R("BR"),Bs=R("IMG"),Is=R("FIGURE"),Ne=R("TEXTAREA"),Fs=tt(["TEXTAREA","INPUT","SELECT"]),Ee=tt(["UL","OL"]),He=tt(["TD","TH"]),Ds=tt(["TR","TD","TH"]),Os=tt(["TD","TH","CAPTION"]),Vs=tt(["VIDEO","AUDIO","OBJECT","EMBED"]),Us=hs(nt.getHeadingElements()),rt=e=>W.has(nt.getTextBlockElements(),e.nodeName)&&!Y(e),_s=e=>rt(e)&&!At(e),pt=e=>nt.isInline(e.nodeName),js=e=>nt.isBlock(e.nodeName),qs=e=>(O(e)||pt(e))&&!!ot(e,rt),Ws=e=>(O(e)||pt(e))&&!ot(e,rt),Ks=e=>He(e)||$e(e)||Y(e),Te=y.and(R("SPAN"),ms("data-note-type","bookmark")),Gs=e=>e&&nt.isVoid(e.nodeName),Qs=e=>Se(e)&&Mt(e),Zs=(e,t)=>D(t)(e),Ys=e=>(e==null?void 0:e.classList)&&e.nodeName==="DIV"&&e.classList.contains("note-control-sizing"),Js=(e,t)=>tt(t)(e),Xs=(e,t=!1)=>{if(O(e)){const i=t?e.data.replace(/ /g," "):e.data;return q.isAllWhitespace(i)}return!1},Re=e=>$(e).closest(".note-editable")[0],Y=e=>(e==null?void 0:e.classList)&&e.nodeName==="DIV"&&e.classList.contains("note-editable"),tn=e=>{if(e){const t=Z(e)?e:e.parentElement;return!!t&&t.isContentEditable}return!1},Le=e=>{if(e&&Lt(e)){const t=e.getAttribute("data-note-contenteditable");return t&&t!=="inherit"?t:e.contentEditable!=="inherit"?e.contentEditable:null}else return null},en=e=>{const t=Re(e);let i=null;for(let s=e;s&&s!==t&&(i=Le(s),i===null);s=s.parentNode);return i},zt=L.isMSIE&&L.browserVersion<11?"&nbsp;":"<br>",on=e=>document.createTextNode(e),at=(e,t=null,i=null)=>{const s=document.createElement(e);return H.isObject(t)&&f.each(t,(n,r)=>{Ae(s,r,n)}),i&&(!H.isString(i)&&i.nodeType?s.appendChild(i):H.isString(i)&&i.length&&(s.innerHTML=i)),s},sn=(e=null)=>{const t=document.createElement("div"),i=document.createDocumentFragment();i.appendChild(t),e&&(t.innerHTML=e);let s;for(;s=t.firstChild;)i.appendChild(s);return i.removeChild(t),i},nn=(e,t)=>(e=F(e),e?e.getAttribute(t):null),Ae=(e,t,i)=>{e=F(e),e&&(i?e.setAttribute(t,i):e.removeAttribute(t))},rn=e=>{const t=e.attributes;for(let i=t.length-1;i>=0;i--)e.removeAttributeNode(t.item(i))},an=(e,t,i=!1)=>i?ke(F(e),q.camelCaseToHyphens(t)):$(e).css(t),ln=(e,t,i)=>{$(e).css(t,i)},cn=(e,t)=>{$(e).css(t)},dn=(e,t)=>$(e).hasClass(t),hn=(e,t)=>{$(e).addClass(t)},un=(e,t)=>{$(e).removeClass(t),ze(e)},fn=(e,t,i)=>{$(e).toggleClass(t,i),ze(e)},ze=e=>{e.classList&&e.classList.length===0&&e.removeAttribute("class")},pn=e=>{var i;const t={};for(let s=0,n=(i=e==null?void 0:e.style)==null?void 0:i.length;s<n;s++){const r=e.style[s];t[r]=e.style.getPropertyValue(r)}return t},mt=e=>O(e)?e.nodeValue.length:e?e.childNodes.length:0,Mt=e=>{const t=mt(e);return t===0||!O(e)&&t===1&&e.innerHTML===zt?!0:!!(f.all(e.childNodes,O)&&e.innerHTML==="")},mn=e=>{do if(e.firstElementChild===null||e.firstElementChild.innerHTML==="")break;while(e=e.firstElementChild);return Mt(e)},gn=(e,t)=>e.nextSibling===t||e.previousSibling===t,bn=(e,t,i,s)=>{const n=D(t);if(n(e))return!s;if(i){for(let r=e.parentNode;r;r=r.parentNode)if(n(r))return!0}else return n(e.parentNode);return!1},vn=(e,t)=>{for(;e&&e!==t;){if(gt(e)!==0)return!1;e=e.parentNode}return!0},Cn=(e,t)=>{if(!t)return!1;for(;e&&e!==t;){if(gt(e)!==mt(e.parentNode)-1)return!1;e=e.parentNode}return!0},gt=(e,t)=>{let i=0;if(e)for(let s=e.nodeType,n=e.previousSibling;n;n=n.previousSibling){const r=n.nodeType;t&&O(n)&&(r===s||!n.data.length)||(i++,s=r)}return i},wn=e=>!!(e&&e.childNodes&&e.childNodes.length),kn=(e,t)=>{if(Z(e)&&e.hasChildNodes()){const i=e.childNodes,s=y.clamp(t,0,i.length-1);return i[s]}else return e},yn=(e,t)=>{const i=e;for(;e&&O(e)&&e.length===0;)e=t?e.nextSibling:e.previousSibling;return e||i},xn=(e,t)=>{const i=Ne(F(e))?$(e).val():$(e).html();return t?i.replace(/[\n\r]/g,""):i},$n=e=>{if(H.isNode(e)){if(Z(e))return e.outerHTML;{const t=at("div");return vt(t,e.cloneNode(!0)),t.innerHTML}}else return""},Sn=e=>{const t=$(e),i=t.offset(),s=t.outerHeight(!0);return{left:i.left,top:i.top+s}},Nn=(e,t)=>{Object.keys(t).forEach(function(i){e.on(i,t[i])})},En=(e,t)=>{Object.keys(t).forEach(function(i){e.off(i,t[i])})},Hn=e=>e&&!O(e)&&f.contains(e.classList,"note-styletag"),Tn=(e,t)=>{const i=F(e);return i?i.querySelectorAll?f.from(i.querySelectorAll(t)):[]:[]},ot=(e,t,i=!0,s=null)=>{if(e=F(i?e:e.parentNode),e){const n=D(t);for(;e;){if(n(e))return e;if(Y(e))break;e=e.parentNode}}return null};function Rn(e,t){var i;if(e=(i=F(e))==null?void 0:i.parentNode,e){const s=D(t);for(;e&&mt(e)===1;){if(s(e))return e;if(Y(e))break;e=e.parentNode}}return null}const bt=(e,t,i=!0)=>{const s=D(t,y.fail),n=[];return ot(e,r=>(Y(r)||n.push(r),s(r)),i),n},Ln=(e,t=null,i=null)=>{const s=D(t,y.ok),n=D(i,Y),r=[];return ot(e,a=>n(a)?!1:(s(a)&&r.push(a),!0)),r},An=(e,t)=>{const i=D(t),s=bt(e);return f.last(s.filter(i))},zn=(e,t)=>{if(H.isNullOrUndefined(e)||H.isNullOrUndefined(t))return null;if(e=F(e),t=F(t),H.isNode(e)&&e===t)return e;let i=[],s;for(s=e;s&&(i.push(s),!Y(s));s=s.parentNode);for(s=t;s;s=s.parentNode)if(i.indexOf(s)>-1)return s;return null},Mn=(e,t)=>{const i=D(t,y.ok),s=[];return e=F(e),e&&(e.previousSibling&&i(e.previousSibling)&&s.push(e.previousSibling),s.push(e),e.nextSibling&&i(e.nextSibling)&&s.push(e.nextSibling)),s},Me=(e,t,i)=>{const s=D(t,y.fail),n=[];if(e=F(e),e)for(;e&&!s(e);)n.push(e),e=i?e.nextSibling:e.previousSibling;return n},Pn=(e,t)=>Me(e,t,!1),Bn=(e,t)=>Me(e,t,!0),In=(e,t,i=!0)=>{const s=D(t,y.ok),n=[];return e=F(e),e&&function r(a,c){if(e!==a&&s(a)&&n.push(a),c)for(let d=0,h=a.childNodes.length;d<h;d++)r(a.childNodes[d],c)}(e,i),n},Pe=e=>{if(e=F(e),!!(e!=null&&e.nextSibling)&&e.parent===e.nextSibling.parent&&!(Te(e)&&(e=e.nextSibling,!e)))return O(e.nextSibling)?e.nextSibling:Pe(e.nextSibling)},Fn=(e,t)=>bt(t,e).map(gt).reverse();function Dn(e,t){let i=e;for(let s=0,n=t.length;s<n;s++)i.childNodes.length<=t[s]?i=i.childNodes[i.childNodes.length-1]:i=i.childNodes[t[s]];return i}const On=e=>ot(e,rt),Vn=(e,t)=>{const i=e.parentNode,s=at(t);return i.insertBefore(s,e),s.appendChild(e),s},Un=e=>{const t=e.parentNode,i=t.childNodes;return t.replaceWith(...i),i.length==1?i.item(0):e},vt=(e,t)=>e.appendChild(t),_n=(e,t)=>{const i=e.firstChild;return i==null?vt(e,t):e.insertBefore(t,i)},Be=(e,t)=>e.parentNode.insertBefore(t,e),jn=(e,t)=>{const i=e.nextSibling;return e.parentNode?i==null?vt(e.parentNode,t):Be(i,t):null},qn=(e,t,i)=>(f.each(t,s=>{!i&&At(e)&&e.firstChild===null&&Ee(s)&&e.appendChild(at("br")),e.appendChild(s)}),e),Ie=(e,t)=>{if(!e||!e.parentNode)return;const i=e.parentNode;if(!t){const s=[];for(let n=0,r=e.childNodes.length;n<r;n++){const a=e.childNodes[n];O(a)&&a.length===0?e.removeChild(a):s.push(a)}for(let n=0,r=s.length;n<r;n++)i.insertBefore(s[n],e)}i.removeChild(e)},Wn=(e,t)=>{const i=D(t);for(;e&&!(Y(e)||!i(e));){const s=e.parentNode;Ie(e),e=s}},Fe=(e,t,i)=>{var s;if(i)for(;t.firstChild;)e.appendChild(t.firstChild);return(s=t.parentNode)==null||s.replaceChild(e,t),e},Kn=(e,t)=>e.cloneNode(t),Gn=(e,t)=>{if(!Z(e)||e.nodeName.toUpperCase()===t.toUpperCase())return e;const i=at(t);return[...e.attributes].map(({name:s,value:n})=>{i.setAttribute(s,n)}),Fe(i,e,!0)},l={blank:zt,emptyPara:`<p>${zt}</p>`,matchSelector:D,matchNodeNames:tt,matchClass:fs,matchStyleValues:us,matchAttribute:ps,matchContentEditableState:gs,matches:Zs,getEditableRoot:Re,isEditableRoot:Y,isContentEditable:tn,getContentEditable:Le,getContentEditableParent:en,isControlSizing:Ys,isNode:ye,isText:O,isElement:Z,isBookmarkNode:Te,isCData:bs,isPi:vs,isComment:Cs,isDocument:ws,isDocumentFragment:ks,isSVGElement:xe,isHTMLElement:Lt,isRestrictedNode:ys,isVoid:Gs,isTag:Js,isPara:rt,isWhiteSpace:Xs,findPara:On,isPurePara:_s,isHeading:Us,isInline:pt,isInlineOrText:y.or(pt,O),isBlock:js,isBodyInline:Ws,isBody:xs,isParaInline:qs,isPre:$s,isList:Ee,isTable:Ss,isData:Ns,isHr:Es,isListItem:Hs,isDetails:Ts,isSummary:Rs,isCell:He,isCellOrRow:Ds,isCellOrCaption:Os,isMedia:Vs,isBlockquote:$e,isBodyContainer:Ks,isAnchor:Se,isDiv:Ls,isLi:At,isBR:Ps,isSpan:As,isB:zs,isU:Ms,isImg:Bs,isFigure:Is,isTextarea:Ne,isTextareaOrInput:Fs,isEmpty:Mt,isEmptyAnchor:Qs,isClosestSibling:gn,deepestChildIsEmpty:mn,withClosestSiblings:Mn,nodeLength:mt,isLeftEdgeOf:vn,isRightEdgeOf:Cn,select:Tn,closest:ot,ancestor:ot,closestSingleParent:Rn,parents:bt,ancestors:bt,parentsWhile:Ln,farthestParent:An,commonParent:zn,prevSiblings:Pn,nextSiblings:Bn,children:In,isChildOf:bn,wrap:Vn,unwrap:Un,insertAfter:jn,insertBefore:Be,append:vt,prepend:_n,appendChildNodes:qn,position:gt,hasChildren:wn,skipEmptyTextNodes:yn,makeOffsetPath:Fn,fromOffsetPath:Dn,getRangeNode:kn,getNextTextNode:Pe,create:at,createText:on,createFragment:sn,remove:Ie,removeWhile:Wn,clone:Kn,rename:Gn,replace:Fe,value:xn,outerHtml:$n,posFromPlaceholder:Sn,attachEvents:Nn,detachEvents:En,isCustomStyleTag:Hn,setAttr:Ae,removeAllAttrs:rn,getAttr:nn,getStyle:an,setStyle:ln,setStyles:cn,hasClass:dn,addClass:hn,removeClass:un,toggleClass:fn,parseStyle:pn};class Qn{constructor(t,i){this.$note=t,this.memos={},this.modules={},this.layoutInfo={},this.options=$.extend(!0,{},i),$.summernote.ui=$.summernote.ui_template(this.options),this.ui=$.summernote.ui,this.initialize()}initialize(){return this.layoutInfo=this.ui.createLayout(this.$note),this._initialize(),this.$note.hide(),this}destroy(){this._destroy(),this.$note.removeData("summernote"),this.ui.removeLayout(this.$note,this.layoutInfo)}reset(){const t=this.isDisabled();this.code(l.emptyPara),this._destroy(),this._initialize(),t&&this.disable()}_initialize(){this.options.id=y.uniqueId($.now()),this.options.container=this.options.container||this.layoutInfo.editor;const t=$.extend({},this.options.buttons);Object.keys(t).forEach(s=>{this.memo("button."+s,t[s])});const i=$.extend({},this.options.modules,$.summernote.plugins||{});Object.keys(i).forEach(s=>{this.module(s,i[s],!0)}),Object.keys(this.modules).forEach(s=>{this.initializeModule(s)})}_destroy(){Object.keys(this.modules).reverse().forEach(t=>{this.removeModule(t)}),Object.keys(this.memos).forEach(t=>{this.removeMemo(t)}),this.triggerEvent("destroy",this)}code(t){const i=this.invoke("codeview.isActivated");if(t===void 0)return this.invoke("codeview.sync"),i?this.layoutInfo.codable.val():this.layoutInfo.editable.html();i?this.invoke("codeview.sync",t):this.layoutInfo.editable.html(t),this.$note.val(t),this.triggerEvent("change",this.layoutInfo.editable)}isDisabled(){return this.layoutInfo.editable.attr("contenteditable")==="false"}enable(){this.layoutInfo.editable.attr("contenteditable",!0),this.invoke("toolbar.activate",!0),this.triggerEvent("disable",!1),this.options.editing=!0}disable(){this.invoke("codeview.isActivated")&&this.invoke("codeview.deactivate"),this.layoutInfo.editable.attr("contenteditable",!1),this.options.editing=!1,this.invoke("toolbar.deactivate",!0),this.triggerEvent("disable",!0)}triggerEvent(){const t=f.head(arguments),i=f.tail(f.from(arguments)),s=this.options.callbacks[q.namespaceToCamel(t,"on")];s&&s.apply(this.$note[0],i),this.$note.trigger("summernote."+t,i)}initializeModule(t){const i=this.modules[t];i.shouldInitialize=i.shouldInitialize||y.ok,i.shouldInitialize()&&(i.initialize&&i.initialize(),i.events&&l.attachEvents(this.$note,i.events))}module(t,i,s){if(arguments.length===1)return this.modules[t];this.modules[t]=new i(this),s||this.initializeModule(t)}removeModule(t){const i=this.modules[t];i.shouldInitialize()&&(i.events&&l.detachEvents(this.$note,i.events),i.destroy&&i.destroy()),delete this.modules[t]}memo(t,i){if(arguments.length===1)return this.memos[t];this.memos[t]=i}removeMemo(t){this.memos[t]&&this.memos[t].destroy&&this.memos[t].destroy(),delete this.memos[t]}createInvokeHandlerAndUpdateState(t,i){return s=>{this.createInvokeHandler(t,i)(s),this.invoke("buttons.updateCurrentStyle")}}createInvokeHandler(t,i){return s=>{s.preventDefault();const n=$(s.target);this.invoke(t,i||n.closest("[data-value]").data("value"),n)}}invoke(){const t=f.head(arguments),i=f.tail(f.from(arguments)),s=t.split("."),n=s.length>1&&s[0],r=s.length>2?s[1]:null,a=s.length>1?f.last(s):s[0];let c=this.modules[n||"editor"];if(!n&&this[a])return this[a].apply(this,i);if(c&&c[r||a]&&c.shouldInitialize())return r&&(c=H.isFunction(c[r])?c[r].apply(c):c[r]),c[a].apply(c,i)}}$.fn.extend({summernote:function(){const e=typeof f.head(arguments),t=e==="string",i=e==="object",s=$.extend({},$.summernote.options,i?f.head(arguments):{});s.langInfo=$.extend(!0,{},$.summernote.lang["en-US"],$.summernote.lang[s.lang]),s.icons=$.extend(!0,{},$.summernote.options.icons,s.icons),s.tooltip=s.tooltip==="auto"?!L.isSupportTouch:s.tooltip,this.each((r,a)=>{const c=$(a);if(!c.data("summernote")){const d=new Qn(c,s);c.data("summernote",d),c.data("summernote").triggerEvent("init",d.layoutInfo)}});const n=this.first();if(n.length){const r=n.data("summernote");if(t)return r.invoke.apply(r,f.from(arguments));s.focus&&r.invoke("editor.focus")}return this}});const De='<svg viewBox="0 0 448 512"><path d="M24 40C10.7 40 0 50.7 0 64S10.7 88 24 88H264c13.3 0 24-10.7 24-24s-10.7-24-24-24H24zm0 128c-13.3 0-24 10.7-24 24s10.7 24 24 24H424c13.3 0 24-10.7 24-24s-10.7-24-24-24H24zM0 320c0 13.3 10.7 24 24 24H264c13.3 0 24-10.7 24-24s-10.7-24-24-24H24c-13.3 0-24 10.7-24 24zM24 424c-13.3 0-24 10.7-24 24s10.7 24 24 24H424c13.3 0 24-10.7 24-24s-10.7-24-24-24H24z"/></svg>',Oe='<svg viewBox="0 0 512 512"><path d="M140.8 122.9C171.7 96.2 212 80 256 80c97.2 0 176 78.8 176 176s-78.8 176-176 176c-39.7 0-76.2-13.1-105.6-35.2c-10.6-8-25.6-5.8-33.6 4.8s-5.8 25.6 4.8 33.6C159 463.3 205.6 480 256 480c123.7 0 224-100.3 224-224S379.7 32 256 32c-57.3 0-109.6 21.5-149.2 56.9L76.3 58.3C69.7 51.7 60.7 48 51.3 48C31.8 48 16 63.8 16 83.3V200c0 13.3 10.7 24 24 24H156.7c19.5 0 35.3-15.8 35.3-35.3c0-9.4-3.7-18.3-10.3-25l-40.8-40.8zm-76.8-9L126.1 176H64V113.9z"/></svg>',Zn={align:De,alignCenter:'<svg viewBox="0 0 448 512"><path d="M120 40c-13.3 0-24 10.7-24 24s10.7 24 24 24H328c13.3 0 24-10.7 24-24s-10.7-24-24-24H120zM24 168c-13.3 0-24 10.7-24 24s10.7 24 24 24H424c13.3 0 24-10.7 24-24s-10.7-24-24-24H24zM96 320c0 13.3 10.7 24 24 24H328c13.3 0 24-10.7 24-24s-10.7-24-24-24H120c-13.3 0-24 10.7-24 24zM24 424c-13.3 0-24 10.7-24 24s10.7 24 24 24H424c13.3 0 24-10.7 24-24s-10.7-24-24-24H24z"/></svg>',alignJustify:'<svg viewBox="0 0 448 512"><path d="M24 40C10.7 40 0 50.7 0 64S10.7 88 24 88H424c13.3 0 24-10.7 24-24s-10.7-24-24-24H24zm0 128c-13.3 0-24 10.7-24 24s10.7 24 24 24H424c13.3 0 24-10.7 24-24s-10.7-24-24-24H24zM0 320c0 13.3 10.7 24 24 24H424c13.3 0 24-10.7 24-24s-10.7-24-24-24H24c-13.3 0-24 10.7-24 24zM24 424c-13.3 0-24 10.7-24 24s10.7 24 24 24H424c13.3 0 24-10.7 24-24s-10.7-24-24-24H24z"/></svg>',alignLeft:De,alignRight:'<svg viewBox="0 0 448 512"><path d="M424 40c13.3 0 24 10.7 24 24s-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24H424zm0 128c13.3 0 24 10.7 24 24s-10.7 24-24 24H24c-13.3 0-24-10.7-24-24s10.7-24 24-24H424zm24 152c0 13.3-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24H424c13.3 0 24 10.7 24 24zM424 424c13.3 0 24 10.7 24 24s-10.7 24-24 24H24c-13.3 0-24-10.7-24-24s10.7-24 24-24H424z"/></svg>',floatLeft:'<svg viewBox="0 0 512 512"><path d="M0 24C0 10.7 10.7 0 24 0S48 10.7 48 24l0 464c0 13.3-10.7 24-24 24s-24-10.7-24-24L0 24zM176 176l288 0 0-64-288 0 0 64zm-48-64c0-26.5 21.5-48 48-48l288 0c26.5 0 48 21.5 48 48l0 64c0 26.5-21.5 48-48 48l-288 0c-26.5 0-48-21.5-48-48l0-64zm48 288l160 0 0-64-160 0 0 64zm-48-64c0-26.5 21.5-48 48-48l160 0c26.5 0 48 21.5 48 48l0 64c0 26.5-21.5 48-48 48l-160 0c-26.5 0-48-21.5-48-48l0-64z"/></svg>',floatRight:'<svg viewBox="0 0 512 512"><path d="M512 24c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 464c0 13.3 10.7 24 24 24s24-10.7 24-24l0-464zM336 176L48 176l0-64 288 0 0 64zm48-64c0-26.5-21.5-48-48-48L48 64C21.5 64 0 85.5 0 112l0 64c0 26.5 21.5 48 48 48l288 0c26.5 0 48-21.5 48-48l0-64zM336 400l-160 0 0-64 160 0 0 64zm48-64c0-26.5-21.5-48-48-48l-160 0c-26.5 0-48 21.5-48 48l0 64c0 26.5 21.5 48 48 48l160 0c26.5 0 48-21.5 48-48l0-64z"/></svg>',floatNone:Oe,flipV:'<svg viewBox="0 0 512 512"><path d="M0 256c0-13.3 10.7-24 24-24l464 0c13.3 0 24 10.7 24 24s-10.7 24-24 24L24 280c-13.3 0-24-10.7-24-24zM166.6 464l178.7 0L256 374.6 166.6 464zM128 512c-12.9 0-24.6-7.8-29.6-19.8s-2.2-25.7 6.9-34.9l128-128c12.5-12.5 32.8-12.5 45.3 0l128 128c9.2 9.2 11.9 22.9 6.9 34.9s-16.6 19.8-29.6 19.8l-256 0zM256 137.4L345.4 48 166.6 48 256 137.4zM98.4 19.8C103.4 7.8 115.1 0 128 0L384 0c12.9 0 24.6 7.8 29.6 19.8s2.2 25.7-6.9 34.9l-128 128c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-9.2-9.2-11.9-22.9-6.9-34.9z"/></svg>',flipH:'<svg viewBox="0 0 512 512"><path d="M256 0c13.3 0 24 10.7 24 24l0 464c0 13.3-10.7 24-24 24s-24-10.7-24-24l0-464c0-13.3 10.7-24 24-24zM48 166.6l0 178.7L137.4 256 48 166.6zM0 128c0-12.9 7.8-24.6 19.8-29.6s25.7-2.2 34.9 6.9l128 128c12.5 12.5 12.5 32.8 0 45.3l-128 128c-9.2 9.2-22.9 11.9-34.9 6.9S0 396.9 0 384L0 128zM374.6 256L464 345.4l0-178.7L374.6 256zM492.2 98.4c12 5 19.8 16.6 19.8 29.6l0 256c0 12.9-7.8 24.6-19.8 29.6s-25.7 2.2-34.9-6.9l-128-128c-12.5-12.5-12.5-32.8 0-45.3l128-128c9.2-9.2 22.9-11.9 34.9-6.9z"/></svg>',rowBelow:'<svg viewBox="0 0 14 14"><path d="m 1e-4,5.3181 c 0,0.2901 0.1688,0.5229 0.3789,0.5229 l 13.242,0 c 0.21,0 0.3789,-0.2328 0.3789,-0.5229 l 0,-4.7928 C 13.9999,0.2353 13.831,1e-4 13.621,1e-4 l -13.242,0 C 0.1689,1e-4 1e-4,0.2353 1e-4,0.5253 l 0,4.7928 z m 1.1582,-0.687 0,-3.4211 3.2168,0 0,3.4211 -3.2168,0 z m 4.2852,0 0,-3.4211 3.2148,0 0,3.4211 -3.2148,0 z m 4.2832,0 0,-3.4211 3.2148,0 0,3.4211 -3.2148,0 z m -6.7266,5.337 q 0,-0.264 0.1915,-0.4658 L 3.5798,9.1141 q 0.1966,-0.1965 0.4709,-0.1965 0.2795,0 0.4658,0.1965 l 1.5217,1.5164 0,-3.6436 q 0,-0.2691 0.194,-0.4372 0.1941,-0.1683 0.4684,-0.1683 l 0.6625,0 q 0.2743,0 0.4684,0.1683 0.1941,0.1681 0.1941,0.4372 l 0,3.6436 1.5216,-1.5164 q 0.1863,-0.1965 0.4658,-0.1965 0.2795,0 0.4658,0.1965 l 0.3882,0.3882 q 0.1966,0.1967 0.1966,0.4658 0,0.2742 -0.1966,0.471 l -3.3693,3.3692 q -0.1812,0.1916 -0.4658,0.1916 -0.2795,0 -0.471,-0.1916 L 3.1916,10.4391 Q 3.0001,10.2372 3.0001,9.9681 Z"/></svg>',colBefore:'<svg viewBox="0 0 14 14"><path d="M 8.6819,1e-4 C 8.3918,1e-4 8.159,0.1689 8.159,0.379 l 0,13.242 c 0,0.21 0.2328,0.3789 0.5229,0.3789 l 4.7928,0 c 0.29,0 0.5252,-0.1689 0.5252,-0.3789 l 0,-13.242 c 0,-0.2101 -0.2352,-0.3789 -0.5252,-0.3789 l -4.7928,0 z m 0.687,1.1582 3.4211,0 0,3.2168 -3.4211,0 0,-3.2168 z m 0,4.2852 3.4211,0 0,3.2148 -3.4211,0 0,-3.2148 z m 0,4.2832 3.4211,0 0,3.2148 -3.4211,0 0,-3.2148 z M 4.0319,3.0001 q 0.264,0 0.4658,0.1915 l 0.3882,0.3882 q 0.1965,0.1966 0.1965,0.4709 0,0.2795 -0.1965,0.4658 l -1.5164,1.5217 3.6436,0 q 0.2691,0 0.4372,0.194 0.1683,0.1941 0.1683,0.4684 l 0,0.6625 q 0,0.2743 -0.1683,0.4684 -0.1681,0.1941 -0.4372,0.1941 l -3.6436,0 1.5164,1.5216 q 0.1965,0.1863 0.1965,0.4658 0,0.2795 -0.1965,0.4658 L 4.4977,10.867 q -0.1967,0.1966 -0.4658,0.1966 -0.2742,0 -0.471,-0.1966 L 0.1917,7.4977 Q 1e-4,7.3165 1e-4,7.0319 1e-4,6.7524 0.1917,6.5609 L 3.5609,3.1916 Q 3.7628,3.0001 4.0319,3.0001 Z"/></svg>',colAfter:'<svg viewBox="0 0 14 14"><path d="m 5.3165569,14.0019 c 0.2900213,0 0.5227581,-0.1688 0.5227581,-0.3789 l 0,-13.2422 c 0,-0.21 -0.2327368,-0.3789 -0.5227581,-0.3789 l -4.7914999,0 C 0.235136,0.0019 0,0.1708 0,0.3808 L 0,13.623 c 0,0.2101 0.235136,0.3789 0.525057,0.3789 l 4.7914999,0 z m -0.6868135,-1.1582 -3.4201714,0 0,-3.2168 3.4201714,0 0,3.2168 z m 0,-4.2852 -3.4201714,0 0,-3.2148 3.4201714,0 0,3.2148 z m 0,-4.2832 -3.4201714,0 0,-3.2148 3.4201714,0 0,3.2148 z m 5.3395506,6.7583 q -0.2639283,0 -0.4656736,-0.1915 L 9.1155258,10.4539 Q 8.9190791,10.2573 8.9190791,9.983 q 0,-0.2795 0.1964467,-0.4658 l 1.5159882,-1.5217 -3.642611,0 q -0.269027,0 -0.4370814,-0.194 Q 6.3835673,7.6074 6.3835673,7.3331 l 0,-0.6625 q 0,-0.2743 0.1682543,-0.4684 Q 6.719876,6.0081 6.988903,6.0081 l 3.642611,0 L 9.1155258,4.4865 Q 8.9190791,4.3002 8.9190791,4.0207 q 0,-0.2795 0.1964467,-0.4658 L 9.5036204,3.1667 Q 9.7002671,2.9701 9.969294,2.9701 q 0.274126,0 0.470872,0.1966 L 13.808452,6.536 Q 14,6.7172 14,7.0018 q 0,0.2795 -0.191548,0.471 l -3.368286,3.3693 q -0.201845,0.1915 -0.470872,0.1915 z"/></svg>',rowAbove:'<svg viewBox="0 0 14 14"><path d="m 13.9999,8.6819 c 0,-0.2901 -0.1688,-0.5229 -0.3789,-0.5229 l -13.242,0 c -0.21,0 -0.3789,0.2328 -0.3789,0.5229 l 0,4.7928 c 0,0.29 0.1689,0.5252 0.3789,0.5252 l 13.242,0 c 0.2101,0 0.3789,-0.2352 0.3789,-0.5252 l 0,-4.7928 z m -1.1582,0.687 0,3.4211 -3.2168,0 0,-3.4211 3.2168,0 z m -4.2852,0 0,3.4211 -3.2148,0 0,-3.4211 3.2148,0 z m -4.2832,0 0,3.4211 -3.2148,0 0,-3.4211 3.2148,0 z m 6.7266,-5.337 q 0,0.264 -0.1915,0.4658 l -0.3882,0.3882 q -0.1966,0.1965 -0.4709,0.1965 -0.2795,0 -0.4658,-0.1965 l -1.5217,-1.5164 0,3.6436 q 0,0.2691 -0.194,0.4372 -0.1941,0.1683 -0.4684,0.1683 l -0.6625,0 Q 6.3626,7.6186 6.1685,7.4503 5.9744,7.2822 5.9744,7.0131 l 0,-3.6436 -1.5216,1.5164 Q 4.2665,5.0824 3.987,5.0824 3.7075,5.0824 3.5212,4.8859 L 3.133,4.4977 Q 2.9364,4.301 2.9364,4.0319 q 0,-0.2742 0.1966,-0.471 L 6.5023,0.1917 Q 6.6835,1e-4 6.9681,1e-4 q 0.2795,0 0.471,0.1916 l 3.3693,3.3692 q 0.1915,0.2019 0.1915,0.471 z"/></svg>',rowRemove:'<svg viewBox="0 0 14 14"><path d="m 13.9999,8.68029 c 0,-0.29019 -0.1688,-0.52307 -0.3789,-0.52307 l -13.242,0 c -0.21,0 -0.3789,0.23288 -0.3789,0.52307 l 0,4.79434 C 1e-4,13.76472 0.169,14 0.379,14 l 13.242,0 c 0.2101,0 0.3789,-0.23528 0.3789,-0.52537 l 0,-4.79434 z m -1.1582,0.68722 0,3.4222 -3.2168,0 0,-3.4222 3.2168,0 z m -4.2852,0 0,3.4222 -3.2148,0 0,-3.4222 3.2148,0 z m -4.2832,0 0,3.4222 -3.2148,0 0,-3.4222 3.2148,0 z M 4.6999,7.59994 q -0.2558,0 -0.4348,-0.17911 L 3.3953,6.5508 Q 3.2162,6.37168 3.2162,6.11579 q 0,-0.2559 0.1791,-0.43501 L 5.2755,3.79997 3.3953,1.91917 Q 3.2162,1.74005 3.2162,1.48416 q 0,-0.2559 0.1791,-0.43501 L 4.2651,0.17912 Q 4.4441,0 4.6999,0 4.9557,0 5.1348,0.17912 L 7.015,2.05992 8.8952,0.17912 Q 9.0742,0 9.33,0 9.5858,0 9.7649,0.17912 l 0.8698,0.87003 q 0.179,0.17911 0.179,0.43501 0,0.25589 -0.179,0.43501 l -1.8802,1.8808 1.8802,1.88081 q 0.179,0.17911 0.179,0.43501 0,0.25589 -0.179,0.43501 L 9.7649,7.42083 Q 9.5858,7.59994 9.33,7.59994 q -0.2558,0 -0.4348,-0.17911 L 7.015,5.54002 5.1348,7.42083 Q 4.9557,7.59994 4.6999,7.59994 Z"/></svg>',colRemove:'<svg viewBox="0 0 14 14"><path d="m 5.31971,13.9999 c 0.29019,0 0.52307,-0.1688 0.52307,-0.3789 l 0,-13.242 C 5.84278,0.169 5.6099,1e-4 5.31971,1e-4 l -4.79434,0 C 0.23528,1e-4 0,0.169 0,0.379 l 0,13.242 c 0,0.2101 0.23528,0.3789 0.52537,0.3789 l 4.79434,0 z m -0.68722,-1.1582 -3.4222,0 0,-3.2168 3.4222,0 0,3.2168 z m 0,-4.2852 -3.4222,0 0,-3.2148 3.4222,0 0,3.2148 z m 0,-4.2832 -3.4222,0 0,-3.2148 3.4222,0 0,3.2148 z m 1.76757,0.4266 q 0,-0.2558 0.17911,-0.4348 L 7.4492,3.3953 q 0.17912,-0.1791 0.43501,-0.1791 0.2559,0 0.43501,0.1791 l 1.88081,1.8802 1.8808,-1.8802 q 0.17912,-0.1791 0.43501,-0.1791 0.2559,0 0.43501,0.1791 l 0.87003,0.8698 Q 14,4.4441 14,4.6999 14,4.9557 13.82088,5.1348 l -1.8808,1.8802 1.8808,1.8802 Q 14,9.0742 14,9.33 14,9.5858 13.82088,9.7649 l -0.87003,0.8698 q -0.17911,0.179 -0.43501,0.179 -0.25589,0 -0.43501,-0.179 l -1.8808,-1.8802 -1.88081,1.8802 q -0.17911,0.179 -0.43501,0.179 -0.25589,0 -0.43501,-0.179 L 6.57917,9.7649 Q 6.40006,9.5858 6.40006,9.33 q 0,-0.2558 0.17911,-0.4348 L 8.45998,7.015 6.57917,5.1348 Q 6.40006,4.9557 6.40006,4.6999 Z"/></svg>',indent:'<svg viewBox="0 0 448 512"><path d="M0 64C0 77.3 10.7 88 24 88H424c13.3 0 24-10.7 24-24s-10.7-24-24-24H24C10.7 40 0 50.7 0 64zM192 192c0 13.3 10.7 24 24 24H424c13.3 0 24-10.7 24-24s-10.7-24-24-24H216c-13.3 0-24 10.7-24 24zm24 104c-13.3 0-24 10.7-24 24s10.7 24 24 24H424c13.3 0 24-10.7 24-24s-10.7-24-24-24H216zM0 448c0 13.3 10.7 24 24 24H424c13.3 0 24-10.7 24-24s-10.7-24-24-24H24c-13.3 0-24 10.7-24 24zM121 268.4c7.8-6.4 7.8-18.3 0-24.7L26.2 165.6C15.7 157 0 164.4 0 177.9V334.1c0 13.5 15.7 20.9 26.2 12.4L121 268.4z"/></svg>',outdent:'<svg viewBox="0 0 448 512"><path d="M0 64C0 50.7 10.7 40 24 40H424c13.3 0 24 10.7 24 24s-10.7 24-24 24H24C10.7 88 0 77.3 0 64zM192 192c0-13.3 10.7-24 24-24H424c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24zm24 104H424c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zM0 448c0-13.3 10.7-24 24-24H424c13.3 0 24 10.7 24 24s-10.7 24-24 24H24c-13.3 0-24-10.7-24-24zM7 268.4C-.8 262-.8 250 7 243.6l94.8-78.1c10.4-8.6 26.2-1.2 26.2 12.4V334.1c0 13.5-15.7 20.9-26.2 12.4L7 268.4z"/></svg>',arrowsAlt:'<svg viewBox="0 0 448 512"><path d="M136 32c13.3 0 24 10.7 24 24s-10.7 24-24 24H48v88c0 13.3-10.7 24-24 24s-24-10.7-24-24V56C0 42.7 10.7 32 24 32H136zM0 344c0-13.3 10.7-24 24-24s24 10.7 24 24v88h88c13.3 0 24 10.7 24 24s-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V344zM424 32c13.3 0 24 10.7 24 24V168c0 13.3-10.7 24-24 24s-24-10.7-24-24V80H312c-13.3 0-24-10.7-24-24s10.7-24 24-24H424zM400 344c0-13.3 10.7-24 24-24s24 10.7 24 24V456c0 13.3-10.7 24-24 24H312c-13.3 0-24-10.7-24-24s10.7-24 24-24h88V344z"/></svg>',bold:'<svg viewBox="0 0 384 512"><path d="M0 64C0 46.3 14.3 32 32 32H80 96 224c70.7 0 128 57.3 128 128c0 31.3-11.3 60.1-30 82.3c37.1 22.4 62 63.1 62 109.7c0 70.7-57.3 128-128 128H96 80 32c-17.7 0-32-14.3-32-32s14.3-32 32-32H48V256 96H32C14.3 96 0 81.7 0 64zM224 224c35.3 0 64-28.7 64-64s-28.7-64-64-64H112V224H224zM112 288V416H256c35.3 0 64-28.7 64-64s-28.7-64-64-64H224 112z"/></svg>',caret:"fa fa-caret-down",circle:'<svg viewBox="0 0 512 512"><path d="M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256z"/></svg>',close:'<svg viewBox="0 0 448 512"><path d="M41 39C31.6 29.7 16.4 29.7 7 39S-2.3 63.6 7 73l183 183L7 439c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l183-183L407 473c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-183-183L441 73c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-183 183L41 39z"/></svg>',code:'<svg viewBox="0 0 640 512"><path d="M399.1 1.1c-12.7-3.9-26.1 3.1-30 15.8l-144 464c-3.9 12.7 3.1 26.1 15.8 30s26.1-3.1 30-15.8l144-464c3.9-12.7-3.1-26.1-15.8-30zm71.4 118.5c-9.1 9.7-8.6 24.9 1.1 33.9L580.9 256 471.6 358.5c-9.7 9.1-10.2 24.3-1.1 33.9s24.3 10.2 33.9 1.1l128-120c4.8-4.5 7.6-10.9 7.6-17.5s-2.7-13-7.6-17.5l-128-120c-9.7-9.1-24.9-8.6-33.9 1.1zm-301 0c-9.1-9.7-24.3-10.2-33.9-1.1l-128 120C2.7 243 0 249.4 0 256s2.7 13 7.6 17.5l128 120c9.7 9.1 24.9 8.6 33.9-1.1s8.6-24.9-1.1-33.9L59.1 256 168.4 153.5c9.7-9.1 10.2-24.3 1.1-33.9z"/></svg>',inlineCode:'<svg viewBox="0 0 576 512"><path d="M6.3 72.2c-9-9.8-8.3-24.9 1.4-33.9s24.9-8.3 33.9 1.4l184 200c8.5 9.2 8.5 23.3 0 32.5l-184 200c-9 9.8-24.2 10.4-33.9 1.4s-10.4-24.2-1.4-33.9L175.4 256 6.3 72.2zM248 432H552c13.3 0 24 10.7 24 24s-10.7 24-24 24H248c-13.3 0-24-10.7-24-24s10.7-24 24-24z"/></svg>',eraser:'<svg viewBox="0 0 640 512"><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7l-281.9-221L396.4 80H521.3l-8.5 34.2c-3.2 12.9 4.6 25.9 17.5 29.1s25.9-4.6 29.1-17.5l11-44.1C576.6 56.5 557.5 32 531.5 32h-335c-18.4 0-34.4 12.5-38.8 30.3l-7.5 30.1L38.8 5.1zM191.5 124.8L202.7 80H346.5L308.1 216.2 191.5 124.8zm129 223.7l-40.8-32.1L248.9 425.5l-1.8 6.5H192c-13.3 0-24 10.7-24 24s10.7 24 24 24H352c13.3 0 24-10.7 24-24s-10.7-24-24-24H296.9l23.6-83.5z"/></svg>',font:'<svg viewBox="0 0 448 512"><path d="M246.2 46.9C242.5 37.9 233.8 32 224 32s-18.5 5.9-22.2 14.9L44.6 432H24c-13.3 0-24 10.7-24 24s10.7 24 24 24H136c13.3 0 24-10.7 24-24s-10.7-24-24-24H96.5l32.7-80H318.9l32.7 80H312c-13.3 0-24 10.7-24 24s10.7 24 24 24H424c13.3 0 24-10.7 24-24s-10.7-24-24-24H403.4L246.2 46.9zM299.3 304H148.7L224 119.5 299.3 304z"/></svg>',frame:'<svg viewBox="0 0 512 512"><path d="M160 64v64H480V96c0-17.7-14.3-32-32-32H160zm-32 0H64C46.3 64 32 78.3 32 96v32h96V64zM32 160V416c0 17.7 14.3 32 32 32H448c17.7 0 32-14.3 32-32V160H144 32zM0 96C0 60.7 28.7 32 64 32H448c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96z"/></svg>',italic:'<svg viewBox="0 0 384 512"><path d="M128 56c0-13.3 10.7-24 24-24H360c13.3 0 24 10.7 24 24s-10.7 24-24 24H291.3L144.7 432H232c13.3 0 24 10.7 24 24s-10.7 24-24 24H24c-13.3 0-24-10.7-24-24s10.7-24 24-24H92.7L239.3 80H152c-13.3 0-24-10.7-24-24z"/></svg>',link:'<svg viewBox="0 0 640 512"><path d="M580.3 267.2c56.2-56.2 56.2-147.3 0-203.5C526.8 10.2 440.9 7.3 383.9 57.2l-6.1 5.4c-10 8.7-11 23.9-2.3 33.9s23.9 11 33.9 2.3l6.1-5.4c38-33.2 95.2-31.3 130.9 4.4c37.4 37.4 37.4 98.1 0 135.6L433.1 346.6c-37.4 37.4-98.2 37.4-135.6 0c-35.7-35.7-37.6-92.9-4.4-130.9l4.7-5.4c8.7-10 7.7-25.1-2.3-33.9s-25.1-7.7-33.9 2.3l-4.7 5.4c-49.8 57-46.9 142.9 6.6 196.4c56.2 56.2 147.3 56.2 203.5 0L580.3 267.2zM59.7 244.8C3.5 301 3.5 392.1 59.7 448.2c53.6 53.6 139.5 56.4 196.5 6.5l6.1-5.4c10-8.7 11-23.9 2.3-33.9s-23.9-11-33.9-2.3l-6.1 5.4c-38 33.2-95.2 31.3-130.9-4.4c-37.4-37.4-37.4-98.1 0-135.6L207 165.4c37.4-37.4 98.1-37.4 135.6 0c35.7 35.7 37.6 92.9 4.4 130.9l-5.4 6.1c-8.7 10-7.7 25.1 2.3 33.9s25.1 7.7 33.9-2.3l5.4-6.1c49.9-57 47-142.9-6.5-196.5c-56.2-56.2-147.3-56.2-203.5 0L59.7 244.8z"/></svg>',unlink:'<svg viewBox="0 0 640 512"><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L489.3 358.2l91-91c56.2-56.2 56.2-147.3 0-203.5C526.8 10.2 440.9 7.3 383.9 57.2l-6.1 5.4c-10 8.7-11 23.9-2.3 33.9s23.9 11 33.9 2.3l6.1-5.4c38-33.2 95.2-31.3 130.9 4.4c37.4 37.4 37.4 98.1 0 135.6l-95.1 95.1-45.5-35.7c24.2-53.3 14.1-117.9-29.3-161.3c-52.1-52.1-134.4-55.9-190.8-11.2L38.8 5.1zm186.3 146c36.9-22.3 85.6-17.6 117.4 14.3c26 26 34 63.3 23.7 96.4L225.1 151.1zM352.6 373.8c-20.2-2.7-39.7-11.7-55.2-27.3c-9.8-9.8-17-21.2-21.7-33.3l-54.2-42.7c-2.2 39.6 11.9 79.9 41.9 109.9c38.8 38.8 94.2 50.8 143.4 36l-54.2-42.7zm-236-186L59.7 244.8C3.5 301 3.5 392.1 59.7 448.2c53.6 53.6 139.5 56.4 196.5 6.5l6.1-5.4c10-8.7 11-23.9 2.3-33.9s-23.9-11-33.9-2.3l-6.1 5.4c-38 33.2-95.2 31.3-130.9-4.4c-37.4-37.4-37.4-98.1 0-135.6l60.9-60.9-38-29.9z"/></svg>',magic:'<svg viewBox="0 0 576 512"><path d="M234.7 42.7L197 56.8c-3 1.1-5 4-5 7.2s2 6.1 5 7.2l37.7 14.1L248.8 123c1.1 3 4 5 7.2 5s6.1-2 7.2-5l14.1-37.7L315 71.2c3-1.1 5-4 5-7.2s-2-6.1-5-7.2L277.3 42.7 263.2 5c-1.1-3-4-5-7.2-5s-6.1 2-7.2 5L234.7 42.7zM461.4 48L496 82.6 386.2 192.3l-34.6-34.6L461.4 48zM80 429.4L317.7 191.7l34.6 34.6L114.6 464 80 429.4zM427.4 14.1L46.1 395.4c-18.7 18.7-18.7 49.1 0 67.9l34.6 34.6c18.7 18.7 49.1 18.7 67.9 0L529.9 116.5c18.7-18.7 18.7-49.1 0-67.9L495.3 14.1c-18.7-18.7-49.1-18.7-67.9 0zM7.5 117.2C3 118.9 0 123.2 0 128s3 9.1 7.5 10.8L64 160l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L128 160l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L128 96 106.8 39.5C105.1 35 100.8 32 96 32s-9.1 3-10.8 7.5L64 96 7.5 117.2zm352 256c-4.5 1.7-7.5 6-7.5 10.8s3 9.1 7.5 10.8L416 416l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L480 416l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L480 352l-21.2-56.5c-1.7-4.5-6-7.5-10.8-7.5s-9.1 3-10.8 7.5L416 352l-56.5 21.2z"/></svg>',paragraph:'<svg viewBox="0 0 448 512"><path d="M32 192c0-88.4 71.6-160 160-160h64H424c13.3 0 24 10.7 24 24s-10.7 24-24 24H384l0 376c0 13.3-10.7 24-24 24s-24-10.7-24-24l0-376H288V456c0 13.3-10.7 24-24 24s-24-10.7-24-24V352H192c-88.4 0-160-71.6-160-160zM240 304V80H192C130.1 80 80 130.1 80 192s50.1 112 112 112h48z"/></svg>',menuCheck:"fa fa-check",minus:'<svg viewBox="0 0 448 512"><path d="M432 256c0 13.3-10.7 24-24 24L40 280c-13.3 0-24-10.7-24-24s10.7-24 24-24l368 0c13.3 0 24 10.7 24 24z"/></svg>',orderedlist:'<svg viewBox="0 0 512 512"><path d="M24 56c0-13.3 10.7-24 24-24H80c13.3 0 24 10.7 24 24V176h16c13.3 0 24 10.7 24 24s-10.7 24-24 24H40c-13.3 0-24-10.7-24-24s10.7-24 24-24H56V80H48C34.7 80 24 69.3 24 56zM86.7 341.2c-6.5-7.4-18.3-6.9-24 1.2L51.5 357.9c-7.7 10.8-22.7 13.3-33.5 5.6s-13.3-22.7-5.6-33.5l11.1-15.6c23.7-33.2 72.3-35.6 99.2-4.9c21.3 24.4 20.8 60.9-1.1 84.7L86.8 432H120c13.3 0 24 10.7 24 24s-10.7 24-24 24H32c-9.5 0-18.2-5.6-22-14.4s-2.1-18.9 4.3-25.9l72-78c5.3-5.8 5.4-14.6 .3-20.5zM216 72H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm0 160H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm0 160H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24z"/></svg>',pencil:'<svg viewBox="0 0 512 512"><path d="M36.4 360.9L13.4 439 1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1L73 498.6l78.1-23c10.4-3 20.1-8 28.6-14.5l.3 .2 .5-.8c1.4-1.1 2.7-2.2 4-3.3c1.4-1.2 2.7-2.5 4-3.8L492.7 149.3c21.9-21.9 24.6-55.6 8.2-80.5c-2.3-3.5-5.1-6.9-8.2-10L453.3 19.3c-25-25-65.5-25-90.5 0L58.6 323.5c-2.5 2.5-4.9 5.2-7.1 8l-.8 .5 .2 .3c-6.5 8.5-11.4 18.2-14.5 28.6zM383 191L197.4 376.6l-49.6-12.4-12.4-49.6L321 129 383 191zM97 358.9l7.7 31c2.1 8.6 8.9 15.3 17.5 17.5l31 7.7-7.4 11.2c-2.6 1.4-5.3 2.6-8.1 3.4l-23.4 6.9L59.4 452.6l16.1-54.8 6.9-23.4c.8-2.8 2-5.6 3.4-8.1L97 358.9zM315.3 218.7c6.2-6.2 6.2-16.4 0-22.6s-16.4-6.2-22.6 0l-96 96c-6.2 6.2-6.2 16.4 0 22.6s16.4 6.2 22.6 0l96-96z"/></svg>',picture:'<svg viewBox="0 0 512 512"><path d="M448 80c8.8 0 16 7.2 16 16V415.8l-5-6.5-136-176c-4.5-5.9-11.6-9.3-19-9.3s-14.4 3.4-19 9.3L202 340.7l-30.5-42.7C167 291.7 159.8 288 152 288s-15 3.7-19.5 10.1l-80 112L48 416.3l0-.3V96c0-8.8 7.2-16 16-16H448zM64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zm80 192a48 48 0 1 0 0-96 48 48 0 1 0 0 96z"/></svg>',question:'<svg viewBox="0 0 320 512"><path d="M64 160c0-44.2 35.8-80 80-80h32c44.2 0 80 35.8 80 80v4.6c0 24.1-12 46.6-32.1 59.9l-52.3 34.9C149.4 274.2 136 299.2 136 326v2c0 13.3 10.7 24 24 24s24-10.7 24-24v-2c0-10.7 5.3-20.7 14.2-26.6l52.3-34.9c33.4-22.3 53.4-59.7 53.4-99.8V160c0-70.7-57.3-128-128-128H144C73.3 32 16 89.3 16 160c0 13.3 10.7 24 24 24s24-10.7 24-24zm96 320a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"/></svg>',redo:'<svg viewBox="0 0 512 512"><path d="M472 224c13.3 0 24-10.7 24-24V56c0-13.3-10.7-24-24-24s-24 10.7-24 24v80.1l-20-23.5C387 63.4 325.1 32 256 32C132.3 32 32 132.3 32 256s100.3 224 224 224c50.4 0 97-16.7 134.4-44.8c10.6-8 12.7-23 4.8-33.6s-23-12.7-33.6-4.8C332.2 418.9 295.7 432 256 432c-97.2 0-176-78.8-176-176s78.8-176 176-176c54.3 0 102.9 24.6 135.2 63.4l.1 .2 0 0L418.9 176H328c-13.3 0-24 10.7-24 24s10.7 24 24 24H472z"/></svg>',square:"far fa-square",strikethrough:'<svg viewBox="0 0 512 512"><path d="M145.5 138c4-21.5 17.9-37.4 41.7-47.4c24.7-10.4 59.4-13.7 99.9-7.5c12.8 2 52.4 9.5 64.9 12.8c12.8 3.3 25.9-4.3 29.3-17.2s-4.3-25.9-17.2-29.3c-14.7-3.8-56.1-11.7-69.7-13.8c-46.2-7.1-90.4-4.1-125.7 10.7c-36.1 15.1-63.3 43.1-70.5 83.9c-.1 .4-.1 .9-.2 1.3c-2.8 23.4 .5 44.2 9.8 62.2c9.2 17.8 23.2 31.2 38.8 41.5c2.4 1.6 5 3.2 7.5 4.7H24c-13.3 0-24 10.7-24 24s10.7 24 24 24H488c13.3 0 24-10.7 24-24s-10.7-24-24-24H295.8c-9.9-3.1-19.7-6-29.2-8.8l-.3-.1c-37.7-11.1-70.5-20.7-93.3-35.8c-10.9-7.2-18.2-14.9-22.6-23.5c-4.2-8.2-6.6-18.9-4.9-33.8zM364 337.1c3.7 8.6 5.5 20.1 2.6 36.3c-3.8 21.8-17.8 37.9-41.8 48c-24.7 10.4-59.4 13.7-99.8 7.5c-20.1-3.2-54.3-14.6-81.2-23.6l0 0 0 0c-5.9-2-11.4-3.8-16.3-5.4c-12.6-4.1-26.1 2.8-30.3 15.4s2.8 26.2 15.4 30.3c4 1.3 8.8 2.9 14 4.7c26.6 8.9 66.4 22.2 90.9 26.2l.1 0c46.2 7.1 90.4 4.1 125.7-10.7c36.1-15.1 63.3-43.1 70.5-83.9c4-22.9 2.4-43.5-5-61.7H351.6c5.7 5.3 9.7 11 12.3 17.1z"/></svg>',subscript:'<svg viewBox="0 0 512 512"><path d="M24 64C10.7 64 0 74.7 0 88s10.7 24 24 24H51.2l96 144-96 144H24c-13.3 0-24 10.7-24 24s10.7 24 24 24H64c8 0 15.5-4 20-10.7l92-138 92 138C272.5 444 280 448 288 448h40c13.3 0 24-10.7 24-24s-10.7-24-24-24H300.8l-96-144 96-144H328c13.3 0 24-10.7 24-24s-10.7-24-24-24H288c-8 0-15.5 4-20 10.7l-92 138L84 74.7C79.5 68 72 64 64 64H24zM472 312c0-8-3.9-15.4-10.5-19.9s-15-5.4-22.4-2.4l-40 16c-12.3 4.9-18.3 18.9-13.4 31.2s18.9 18.3 31.2 13.4l7.1-2.8V464H408c-13.3 0-24 10.7-24 24s10.7 24 24 24h40 40c13.3 0 24-10.7 24-24s-10.7-24-24-24H472V312z"/></svg>',superscript:'<svg viewBox="0 0 512 512"><path d="M472 24c0-8-3.9-15.4-10.5-19.9s-15-5.4-22.4-2.4l-40 16c-12.3 4.9-18.3 18.9-13.4 31.2s18.9 18.3 31.2 13.4l7.1-2.8V176H408c-13.3 0-24 10.7-24 24s10.7 24 24 24h40 40c13.3 0 24-10.7 24-24s-10.7-24-24-24H472V24zM24 64C10.7 64 0 74.7 0 88s10.7 24 24 24H51.2l96 144-96 144H24c-13.3 0-24 10.7-24 24s10.7 24 24 24H64c8 0 15.5-4 20-10.7l92-138 92 138C272.5 444 280 448 288 448h40c13.3 0 24-10.7 24-24s-10.7-24-24-24H300.8l-96-144 96-144H328c13.3 0 24-10.7 24-24s-10.7-24-24-24H288c-8 0-15.5 4-20 10.7l-92 138L84 74.7C79.5 68 72 64 64 64H24z"/></svg>',table:'<svg viewBox="0 0 512 512"><path d="M48 264V160H232V264H48zm0 48H232V432H64c-8.8 0-16-7.2-16-16V312zM280 432V312H464V416c0 8.8-7.2 16-16 16H280zM464 264H280V160H464V264zM64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64z"/></svg>',textHeight:'<svg viewBox="0 0 576 512"><path d="M48 128V80h88l0 352H88c-13.3 0-24 10.7-24 24s10.7 24 24 24H232c13.3 0 24-10.7 24-24s-10.7-24-24-24H184l0-352h88v48c0 13.3 10.7 24 24 24s24-10.7 24-24V72c0-22.1-17.9-40-40-40H40C17.9 32 0 49.9 0 72v56c0 13.3 10.7 24 24 24s24-10.7 24-24zM497 39c-9.4-9.4-24.6-9.4-33.9 0l-64 64c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l23-23V398.1l-23-23c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64c9.4 9.4 24.6 9.4 33.9 0l64-64c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-23 23V113.9l23 23c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9L497 39z"/></svg>',trash:'<svg viewBox="0 0 448 512"><path d="M177.1 48h93.7c2.7 0 5.2 1.3 6.7 3.6l19 28.4h-145l19-28.4c1.5-2.2 4-3.6 6.7-3.6zM354.2 80L317.5 24.9C307.1 9.4 289.6 0 270.9 0H177.1c-18.7 0-36.2 9.4-46.6 24.9L93.8 80H80.1 32 24C10.7 80 0 90.7 0 104s10.7 24 24 24H35.6L59.6 452.7c2.5 33.4 30.3 59.3 63.8 59.3H324.6c33.5 0 61.3-25.9 63.8-59.3L412.4 128H424c13.3 0 24-10.7 24-24s-10.7-24-24-24h-8H367.9 354.2zm10.1 48L340.5 449.2c-.6 8.4-7.6 14.8-16 14.8H123.4c-8.4 0-15.3-6.5-16-14.8L83.7 128H364.3z"/></svg>',underline:'<svg viewBox="0 0 448 512"><path d="M16 56c0-13.3 10.7-24 24-24h96c13.3 0 24 10.7 24 24s-10.7 24-24 24H112V224c0 61.9 50.1 112 112 112s112-50.1 112-112V80H312c-13.3 0-24-10.7-24-24s10.7-24 24-24h96c13.3 0 24 10.7 24 24s-10.7 24-24 24H384V224c0 88.4-71.6 160-160 160s-160-71.6-160-160V80H40C26.7 80 16 69.3 16 56zM0 456c0-13.3 10.7-24 24-24H424c13.3 0 24 10.7 24 24s-10.7 24-24 24H24c-13.3 0-24-10.7-24-24z"/></svg>',undo:'<svg viewBox="0 0 512 512"><path d="M40 224c-13.3 0-24-10.7-24-24V56c0-13.3 10.7-24 24-24s24 10.7 24 24v80.1l20-23.5C125 63.4 186.9 32 256 32c123.7 0 224 100.3 224 224s-100.3 224-224 224c-50.4 0-97-16.7-134.4-44.8c-10.6-8-12.7-23-4.8-33.6s23-12.7 33.6-4.8C179.8 418.9 216.3 432 256 432c97.2 0 176-78.8 176-176s-78.8-176-176-176c-54.3 0-102.9 24.6-135.2 63.4l-.1 .2 0 0L93.1 176H184c13.3 0 24 10.7 24 24s-10.7 24-24 24H40z"/></svg>',rollback:Oe,unorderedlist:'<svg viewBox="0 0 512 512"><path d="M64 64a32 32 0 1 0 0 64 32 32 0 1 0 0-64zm120 8c-13.3 0-24 10.7-24 24s10.7 24 24 24H488c13.3 0 24-10.7 24-24s-10.7-24-24-24H184zm0 160c-13.3 0-24 10.7-24 24s10.7 24 24 24H488c13.3 0 24-10.7 24-24s-10.7-24-24-24H184zm0 160c-13.3 0-24 10.7-24 24s10.7 24 24 24H488c13.3 0 24-10.7 24-24s-10.7-24-24-24H184zM96 256a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zM64 384a32 32 0 1 0 0 64 32 32 0 1 0 0-64z"/></svg>',video:'<svg viewBox="0 0 512 512"><path d="M48 416c0 8.8 7.2 16 16 16H448c8.8 0 16-7.2 16-16V208H48V416zM336 160h64l64-64c0-8.8-7.2-16-16-16H416l-80 80zm-96 0l80-80H256l-80 80h64zM80 160l80-80H96L48 128v32H80zM512 96v64 24 24V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V208 184 160 96C0 60.7 28.7 32 64 32H448c35.3 0 64 28.7 64 64zM216.5 241.9c5.2-2.8 11.5-2.5 16.4 .8l96 64c4.4 3 7.1 8 7.1 13.3s-2.7 10.3-7.1 13.3l-96 64c-4.9 3.3-11.2 3.6-16.4 .8s-8.5-8.2-8.5-14.1V256c0-5.9 3.2-11.3 8.5-14.1z"/></svg>',css:'<svg viewBox="0 0 512 512"><path d="M480 32l-64 368-223.3 80L0 400l19.6-94.8h82l-8 40.6L210 390.2l134.1-44.4 18.8-97.1H29.5l16-82h333.7l10.5-52.7H56.3l16.3-82H480z"/></svg>',ellipsis:'<svg viewBox="0 0 448 512"><path d="M432 256a48 48 0 1 1 -96 0 48 48 0 1 1 96 0zm-160 0a48 48 0 1 1 -96 0 48 48 0 1 1 96 0zM64 304a48 48 0 1 1 0-96 48 48 0 1 1 0 96z"/></svg>',spellCheck:'<svg viewBox="0 0 576 512"><path d="M134.1 14.6C130.4 5.8 121.6 0 112 0s-18.3 5.8-22.1 14.6l-88 208c-5.2 12.2 .5 26.3 12.8 31.5s26.3-.5 31.5-12.8L56.8 216H167.2l10.7 25.4c5.2 12.2 19.2 17.9 31.5 12.8s17.9-19.2 12.8-31.5l-88-208zM146.9 168H77.1L112 85.6 146.9 168zM256 24V128 232c0 13.3 10.7 24 24 24h92c42 0 76-34 76-76c0-24.6-11.7-46.4-29.8-60.3C426.9 107.3 432 92.2 432 76c0-42-34-76-76-76H280c-13.3 0-24 10.7-24 24zm100 80H304V48h52c15.5 0 28 12.5 28 28s-12.5 28-28 28zm-52 48h52 16c15.5 0 28 12.5 28 28s-12.5 28-28 28H304V152zM568.6 313.3c9.6-9.2 9.9-24.4 .7-33.9s-24.4-9.9-33.9-.7l-183 175.7L265 367c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9L335 505c9.2 9.2 24.2 9.4 33.6 .3l200-192z"/></svg>',gear:'<svg viewBox="0 0 512 512"><path d="M256 0c17 0 33.6 1.7 49.8 4.8c7.9 1.5 21.8 6.1 29.4 20.1c2 3.7 3.6 7.6 4.6 11.8l9.3 38.5C350.5 81 360.3 86.7 366 85l38-11.2c4-1.2 8.1-1.8 12.2-1.9c16.1-.5 27 9.4 32.3 15.4c22.1 25.1 39.1 54.6 49.9 86.3c2.6 7.6 5.6 21.8-2.7 35.4c-2.2 3.6-4.9 7-8 10L459 246.3c-4.2 4-4.2 15.5 0 19.5l28.7 27.3c3.1 3 5.8 6.4 8 10c8.2 13.6 5.2 27.8 2.7 35.4c-10.8 31.7-27.8 61.1-49.9 86.3c-5.3 6-16.3 15.9-32.3 15.4c-4.1-.1-8.2-.8-12.2-1.9L366 427c-5.7-1.7-15.5 4-16.9 9.8l-9.3 38.5c-1 4.2-2.6 8.2-4.6 11.8c-7.7 14-21.6 18.5-29.4 20.1C289.6 510.3 273 512 256 512s-33.6-1.7-49.8-4.8c-7.9-1.5-21.8-6.1-29.4-20.1c-2-3.7-3.6-7.6-4.6-11.8l-9.3-38.5c-1.4-5.8-11.2-11.5-16.9-9.8l-38 11.2c-4 1.2-8.1 1.8-12.2 1.9c-16.1 .5-27-9.4-32.3-15.4c-22-25.1-39.1-54.6-49.9-86.3c-2.6-7.6-5.6-21.8 2.7-35.4c2.2-3.6 4.9-7 8-10L53 265.7c4.2-4 4.2-15.5 0-19.5L24.2 218.9c-3.1-3-5.8-6.4-8-10C8 195.3 11 181.1 13.6 173.6c10.8-31.7 27.8-61.1 49.9-86.3c5.3-6 16.3-15.9 32.3-15.4c4.1 .1 8.2 .8 12.2 1.9L146 85c5.7 1.7 15.5-4 16.9-9.8l9.3-38.5c1-4.2 2.6-8.2 4.6-11.8c7.7-14 21.6-18.5 29.4-20.1C222.4 1.7 239 0 256 0zM218.1 51.4l-8.5 35.1c-7.8 32.3-45.3 53.9-77.2 44.6L97.9 120.9c-16.5 19.3-29.5 41.7-38 65.7l26.2 24.9c24 22.8 24 66.2 0 89L59.9 325.4c8.5 24 21.5 46.4 38 65.7l34.6-10.2c31.8-9.4 69.4 12.3 77.2 44.6l8.5 35.1c24.6 4.5 51.3 4.5 75.9 0l8.5-35.1c7.8-32.3 45.3-53.9 77.2-44.6l34.6 10.2c16.5-19.3 29.5-41.7 38-65.7l-26.2-24.9c-24-22.8-24-66.2 0-89l26.2-24.9c-8.5-24-21.5-46.4-38-65.7l-34.6 10.2c-31.8 9.4-69.4-12.3-77.2-44.6l-8.5-35.1c-24.6-4.5-51.3-4.5-75.9 0zM208 256a48 48 0 1 0 96 0 48 48 0 1 0 -96 0zm48 96a96 96 0 1 1 0-192 96 96 0 1 1 0 192z"/></svg>',fill:'<svg  viewBox="0 0 576 512"><path d="M39 7C48.4-2.3 63.6-2.3 73 7l89.4 89.4 58.7-58.7c28.1-28.1 73.7-28.1 101.8 0L474.3 189.1c28.1 28.1 28.1 73.7 0 101.8L283.9 481.4c-37.5 37.5-98.3 37.5-135.8 0L30.6 363.9c-37.5-37.5-37.5-98.3 0-135.8l97.8-97.8L39 41C29.7 31.6 29.7 16.4 39 7zM231 233l-68.7-68.7L64.6 262.1c-7.3 7.3-11.8 16.4-13.4 25.9H409.4l31-31c9.4-9.4 9.4-24.6 0-33.9L289 71.6c-9.4-9.4-24.6-9.4-33.9 0l-58.7 58.7L265 199c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0zM512 512c-35.3 0-64-28.7-64-64c0-25.2 32.6-79.6 51.2-108.7c6-9.4 19.5-9.4 25.5 0C543.4 368.4 576 422.8 576 448c0 35.3-28.7 64-64 64z"/></svg>',face:'<svg viewBox="0 0 512 512"><path d="M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm177.6 62.1C192.8 334.5 218.8 352 256 352s63.2-17.5 78.4-33.9c9-9.7 24.2-10.4 33.9-1.4s10.4 24.2 1.4 33.9c-22 23.8-60 49.4-113.6 49.4s-91.7-25.5-113.6-49.4c-9-9.7-8.4-24.9 1.4-33.9s24.9-8.4 33.9 1.4zM144.4 208a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zm192-32a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"/></svg>',omega:'<svg viewBox="0 0 448 512"><path d="M224 80C126.8 80 48 158.8 48 256c0 63.7 33.8 119.5 84.6 150.4c11.4 7 19.4 19.6 19.4 34.2c0 21.8-17.6 39.4-39.4 39.4H24c-13.3 0-24-10.7-24-24s10.7-24 24-24H85.4C33.4 391 0 327.4 0 256C0 132.3 100.3 32 224 32s224 100.3 224 224c0 71.4-33.4 135-85.4 176H424c13.3 0 24 10.7 24 24s-10.7 24-24 24H335.4c-21.8 0-39.4-17.6-39.4-39.4c0-14.6 8-27.2 19.4-34.2C366.2 375.5 400 319.7 400 256c0-97.2-78.8-176-176-176z"/></svg>',layout:'<svg  viewBox="0 0 448 512"><path d="M48 80V240h96V80H48zM0 80C0 53.5 21.5 32 48 32h96c26.5 0 48 21.5 48 48V240c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V80zM304 272V432h96V272H304zm-48 0c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48V432c0 26.5-21.5 48-48 48H304c-26.5 0-48-21.5-48-48V272zM144 368H48v64h96V368zM48 320h96c26.5 0 48 21.5 48 48v64c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V368c0-26.5 21.5-48 48-48zM304 80v64h96V80H304zm-48 0c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v64c0 26.5-21.5 48-48 48H304c-26.5 0-48-21.5-48-48V80z"/></svg>'},Ve=" ",Ue="\uFEFF",Yn="­",J={UNKNOWN:-1,SPACE:0,PUNC:1,CHAR:2},_e=e=>{!l.isVoid(e)&&!l.nodeLength(e)&&(e.innerHTML=l.blank)},Ct=e=>e.offset===0,lt=e=>e.offset===l.nodeLength(e.node),je=e=>Ct(e)||lt(e),qe=(e,t)=>Ct(e)&&l.isLeftEdgeOf(e.node,t),We=(e,t)=>lt(e)&&l.isRightEdgeOf(e.node,t),Jn=e=>({node:e.parentNode,offset:l.position(e)}),Xn=e=>({node:e.parentNode,offset:l.position(e)+1}),Pt=(e,t)=>{let i,s;if(e.offset===0){if(l.isEditableRoot(e.node))return null;i=e.node.parentNode,s=l.position(e.node)}else l.hasChildren(e.node)?(i=e.node.childNodes[e.offset-1],s=l.nodeLength(i)):(i=e.node,s=t?0:e.offset-1);return{node:i,offset:s}},Bt=(e,t)=>{let i,s;if(e.offset===l.nodeLength(e.node)){if(l.isEditableRoot(e.node))return null;let n=l.getNextTextNode(e.node);n?(i=n,s=0):(i=e.node.parentNode,s=l.position(e.node)+1)}else l.hasChildren(e.node)?(i=e.node.childNodes[e.offset],s=0):(i=e.node,s=t?l.nodeLength(e.node):e.offset+1);return{node:i,offset:s}},Ke=(e,t)=>{let i,s=0;if(e.offset===l.nodeLength(e.node)){if(l.isEditableRoot(e.node))return null;i=e.node.parentNode,s=l.position(e.node)+1,l.isEditableRoot(i)&&(i=e.node.nextSibling,s=0)}else l.hasChildren(e.node)?(i=e.node.childNodes[e.offset],s=0):(i=e.node,s=t?l.nodeLength(e.node):e.offset+1);return{node:i,offset:s}},Ge=(e,t,i)=>{for(;e;){if(t(e))return e;e=i?Bt(e):Pt(e)}return null},Qe=(e,t,i)=>{let s=e;for(;e;){if(!t(e))return s;s=e,e=i?Bt(e):Pt(e)}return null},tr=(e,t)=>Ge(e,t,!1),er=(e,t)=>Ge(e,t,!0),or=(e,t)=>Qe(e,t,!1),ir=(e,t)=>Qe(e,t,!0),sr=(e,t,i,s)=>{let n=e;for(;n&&n.node&&(i(n),!Ye(n,t));){const r=s&&e.node!==n.node&&t.node!==n.node;n=Ke(n,r)}},nr=(e,t)=>{const i=e.node,s=e.offset,n=t.node,r=t.offset;let a,c,d,h,u;if(i==n)return s===r?0:s<r?-1:1;if(a=l.closest(n,i))return s<=l.position(a)?-1:1;if(a=l.closest(i,n))return l.position(a)<r?-1:1;if(c=getCommonAncestor(i,n),!c)throw new Error("comparePoints error: nodes have no common ancestor");if(d=i===c?c:l.closest(i,c),h=n===c?c:l.closest(n,c),d===h)throw new Error("comparePoints got to case 4 and childA and childB are the same!");for(u=c.firstChild;u;){if(u===d)return-1;if(u===h)return 1;u=u.nextSibling}},It=(e,t)=>{let i=t&&t.skipPaddingBlankHTML;const s=t&&t.skipEdgePoint,n=t&&t.discardEmptySplits;if(n&&(i=!0),je(e)&&(l.isText(e.node)||s)){if(Ct(e))return e.node;if(lt(e))return e.node.nextSibling}if(l.isText(e.node))return e.node.splitText(e.offset);{const r=e.node.childNodes[e.offset];let a=l.nextSiblings(r);a=a.filter(y.not(l.isEmpty));const c=l.insertAfter(e.node,e.node.cloneNode(!1));return l.appendChildNodes(c,a),i||(_e(e.node),_e(c)),n&&(l.isEmpty(e.node)&&l.remove(e.node),l.isEmpty(c))?(l.remove(c),e.node.nextSibling):c}},Ze=(e,t,i)=>{const s=l.matchSelector(e);let n=l.parents(t.node,s);if(n.length){if(n.length===1)return It(t,i)}else return null;if(n.length>2){let a=n.slice(0,n.length-1).find(c=>c.nextSibling);if(a&&t.offset!=0&&lt(t)){let c=a.nextSibling,d;c.nodeType==1?(d=c.childNodes[0],n=l.parents(d,s),t={node:d,offset:0}):c.nodeType==3&&!c.data.match(/[\n\r]/g)&&(d=c,n=l.parents(d,s),t={node:d,offset:0})}}return n.reduce((r,a)=>(r===t.node&&(r=It(t,i)),It({node:a,offset:r?l.position(r):l.nodeLength(a)},i)))},rr=(e,t)=>{const i=t?l.isPara:l.isBodyContainer,s=l.parents(e.node,i),n=f.last(s)||e.node;let r,a;i(n)?(r=s[s.length-2],a=n):(r=n,a=r.parentNode);let c=r&&Ze(r,e,{skipPaddingBlankHTML:t,skipEdgePoint:t});return!c&&a===e.node&&(c=e.node.childNodes[e.offset]),{rightNode:c,container:a}},Ye=(e,t)=>e.node===t.node&&e.offset===t.offset,ar=e=>{if(l.isText(e.node)||!l.hasChildren(e.node)||l.isEmpty(e.node))return!0;const t=e.node.childNodes[e.offset-1],i=e.node.childNodes[e.offset];return!!((!t||l.isVoid(t))&&(!i||l.isVoid(i))||l.isTable(i))},Ft=e=>{if(!l.isText(e.node))return J.UNKNOWN;const t=e.node.nodeValue.charAt(e.offset-1);return t?t===Ve||` \f
\r	\v`.indexOf(t)!==-1?J.SPACE:t==="_"?J.CHAR:new RegExp("^\\p{P}$","u").test(t)?J.PUNC:J.CHAR:J.UNKNOWN},Je=e=>Ft(e)==J.CHAR,Xe=e=>Ft(e)==J.SPACE,C={NBSP_CHAR:Ve,ZERO_WIDTH_NBSP_CHAR:Ue,SOFT_HYPHEN:Yn,CharTypes:J,isLeftEdgePoint:Ct,isRightEdgePoint:lt,isEdgePoint:je,isLeftEdgePointOf:qe,isRightEdgePointOf:We,isLeftEdgePointOf:qe,isRightEdgePointOf:We,prevPoint:Pt,nextPoint:Bt,pointBeforeNode:Jn,pointAfterNode:Xn,nextPointWithEmptyNode:Ke,comparePoints:nr,equals:Ye,isVisiblePoint:ar,prevPointUntil:tr,nextPointUntil:er,prevPointWhile:or,nextPointWhile:ir,isCharPoint:Je,isSpacePoint:Xe,walkPoint:sr,splitTree:Ze,splitPoint:rr,getCharType:Ft,isCharPoint:Je,isSpacePoint:Xe,isZwsp:e=>e===Ue,removeZwsp:e=>e.replace(/\uFEFF/g,"")},ct=(e,t)=>{const i=l.matchSelector(e);return function(){const s=l.closest(this.sc,i,!0,t);return!!s&&s===l.closest(this.ec,i,!0,t)}},lr=e=>e===!0?t=>[0,1].indexOf(C.getCharType(t))>-1:t=>C.getCharType(t)===0,cr=e=>{try{e.detach()}catch{}},K=(e,t)=>{let i=!1;e.isWrapper&&(e=Dt(e),i=!0);const s=t(e);return i&&cr(e),s},Dt=e=>{if(e.isWrapper){const{sc:t,so:i,ec:s,eo:n}=e;e=document.createRange(),e.setStart(t,i),e.setEnd(s,n)}return e},dr=e=>e.isWrapper?e:Ot(e),hr=(e,t)=>l.isChildOf(e.startContainer,t,!0)&&(e.endContainer==e.startContainer||l.isChildOf(e.endContainer,t,!0)),ur=ct(l.isEditableRoot,"div.note-editing-area"),fr=ct(l.isList),pr=ct(l.isAnchor),mr=ct(l.isCell),gr=ct(l.isData),Ot=e=>{const t=e;return new z(t.startContainer,t.startOffset,t.endContainer,t.endOffset)};function Vt(e,t,i,s){const n=arguments.length;if(n===2||n===4)return n===2&&(i=e,s=t),new z(e,t,i,s);let r=to();if(!r&&n===1){let a=arguments[0];return l.isEditableRoot(e)&&(a=a.lastChild),eo(a,l.emptyPara===arguments[0].innerHTML)}return r}const Ut=(e,t)=>t?new z(e.node,e.offset,t.node,t.offset):new z(e.node,e.offset),to=()=>{const e=window.getSelection?window.getSelection():window.document.selection;return!e||e.rangeCount===0||l.isBody(e.anchorNode)?null:Ot(e.getRangeAt(0))},eo=(e,t=!1)=>{var i=wt(e);return i.collapse(t)},wt=e=>{let t=e,i=0,s=e,n=l.nodeLength(s);return l.isVoid(t)&&(i=l.prevSiblings(t).length-1,t=t.parentNode),l.isBR(s)?(n=l.prevSiblings(s).length-1,s=s.parentNode):l.isVoid(s)&&(n=l.prevSiblings(s).length,s=s.parentNode),new z(t,i,s,n)},oo=e=>wt(e).collapse(!0),io=e=>wt(e).collapse(!1),br=e=>{const i=oo(f.head(e)).getStartPoint(),n=io(f.last(e)).getEndPoint();return Vt(i.node,i.offset,n.node,n.offset)},vr=(e,t)=>{const i=l.fromOffsetPath(e,t.s.path),s=t.s.offset,n=l.fromOffsetPath(e,t.e.path),r=t.e.offset;return new z(i,s,n,r)},Cr=(e,t)=>{const i=e.s.offset,s=e.e.offset,n=l.fromOffsetPath(f.head(t),e.s.path),r=l.fromOffsetPath(f.last(t),e.e.path);return new z(n,i,r,s)};class z{constructor(t,i,s,n){this.isWrapper=!0,this.startContainer=t,this.startOffset=i,this.endContainer=s,this.endOffset=n,this.collapsed=t===s&&i===n,this.isOnEditable=ur,this.isOnList=fr,this.isOnAnchor=pr,this.isOnCell=mr,this.isOnData=gr}updateStart(t,i){t!=this.startContainer&&(this._commonParent=void 0),this.startContainer=t,this.startOffset=i,this.collapsed=t===this.endContainer&&i===this.endOffset}updateEnd(t,i){t!=this.endContainer&&(this._commonParent=void 0),this.endContainer=t,this.endOffset=i,this.collapsed=t===this.startContainer&&i===this.startOffset}getNativeRange(){return Dt(this)}equals(t){if(t==this)return!0;if(t instanceof z||t instanceof Range){const{startContainer:i,startOffset:s,endContainer:n,endOffset:r}=t;return this.startContainer===i&&this.startOffset===s&&this.endContainer===n&&this.endOffset===r}return!1}startEquals(t){return t==this?!0:t instanceof z||t instanceof Range?this.startContainer===t.startContainer&&this.startOffset===t.startOffset:!1}endEquals(t){return t==this?!0:t instanceof z||t instanceof Range?this.endContainer===t.endContainer&&this.endOffset===t.endOffset:!1}get sc(){return this.startContainer}get so(){return this.startOffset}set so(t){return this.updateStart(this.startContainer,t)}get ec(){return this.endContainer}get eo(){return this.endOffset}set eo(t){return this.updateEnd(this.endContainer,t)}isCollapsed(){return this.collapsed}get commonAncestorContainer(){return this._commonParent||(this._commonParent=this.collapsed?this.startContainer:l.commonParent(this.startContainer,this.endContainer)),this._commonParent}cloneContents(){return K(this,t=>t.cloneContents())}cloneRange(){return new z(this.startContainer,this.startOffset,this.endContainer,this.endOffset)}collapse(t){const i=t?this.startContainer:this.endContainer,s=t?this.startOffset:this.endOffset;return this.updateStart(i,s),this.updateEnd(i,s),this}compareBoundaryPoints(t,i){var s,n,r,a,c=t==Range.END_TO_START||t==Range.START_TO_START?"start":"end",d=t==Range.START_TO_END||t==Range.START_TO_START?"start":"end";return s=this[c+"Container"],n=this[c+"Offset"],r=i[d+"Container"],a=i[d+"Offset"],C.comparePoints({node:s,offset:n},{node:r,offset:a})}compareNode(t){return K(this,i=>i.compareNode(t))}comparePoint(t,i){return K(this,s=>s.comparePoint(t,i))}createContextualFragment(t){return K(this,i=>i.createContextualFragment(t))}deleteContents(){if(this.collapsed)return this;const t=this.splitText(),i=t.nodes(null,{fullyContains:!0}),s=C.prevPointUntil(t.getStartPoint(),r=>!f.contains(i,r.node)),n=[];return f.each(i,r=>{const a=r.parentNode;s.node!==a&&l.nodeLength(a)===1&&n.push(a),l.remove(r,!1)}),f.each(n,r=>{l.remove(r,!1)}),new z(s.node,s.offset,s.node,s.offset).normalize()}detach(){return this}extractContents(){return K(this,t=>t.extractContents())}getBoundingClientRect(){return K(this,t=>t.getBoundingClientRect())}getClientRects(){return K(this,t=>t.getClientRects())}insertNode(t,i=!1){let s=this;l.isInlineOrText(t)&&(s=this.wrapBodyInlineWithPara().deleteContents());const n=C.splitPoint(s.getStartPoint(),!l.isBlock(t));return n.rightNode?(n.rightNode.parentNode.insertBefore(t,n.rightNode),l.isEmpty(n.rightNode)&&(i||l.isPara(t))&&n.rightNode.parentNode.removeChild(n.rightNode)):n.container&&n.container.appendChild(t),t}intersectsNode(t){return K(this,i=>i.intersectsNode(t))}isPointInRange(t,i){return K(this,s=>s.isPointInRange(t,i))}selectNode(t){const i=C.pointBeforeNode(t),s=C.pointAfterNode(t);return this.updateStart(i.node,i.offset),this.updateEnd(s.node,s.offset),this}selectNodeContents(t){return this.updateStart(t,0),this.updateEnd(t,l.nodeLength(t)),this}setEnd(t,i){return this.updateEnd(t,i),this}setEndAfter(t){const i=C.pointAfterNode(t);return this.updateEnd(i.node,i.offset),this}setEndBefore(t){const i=C.pointBeforeNode(t);return this.updateEnd(i.node,i.offset),this}setStart(t,i){return this.updateStart(t,i),this}setStartAfter(t){const i=C.pointAfterNode(t);return this.updateStart(i.node,i.offset),this}setStartBefore(t){const i=C.pointBeforeNode(t);return this.updateStart(i.node,i.offset),this}surroundContents(t){return K(this,i=>{i.surroundContents(t),this.updateStart(i.startContainer,i.startOffset),this.updateEnd(i.endContainer,i.endOffset)}),this}toString(){return K(this,t=>t.toString())}getPoints(){return{sc:this.startContainer,so:this.startOffset,ec:this.endContainer,eo:this.endOffset}}getStartPoint(){return{node:this.startContainer,offset:this.startOffset}}getEndPoint(){return{node:this.endContainer,offset:this.endOffset}}walk(t,i){const s=this.startOffset,n=i?l.getRangeNode(this.startContainer,s):this.startContainer,r=this.endOffset,a=i?l.getRangeNode(this.endContainer,r-1):this.endContainer,c=k=>{let g=k[0];l.isText(g)&&g===n&&s>=g.data.length&&k.splice(0,1);let b=k[k.length-1];return r===0&&k.length>0&&b===a&&l.isText(b)&&k.splice(k.length-1,1),k=f.reject(k,S=>l.isWhiteSpace(S)&&(l.isElement(S.previousSibling)||l.isElement(S.nextSibling))),k},d=(k,g="nextSibling"|"previousSibling",b)=>{const S=[];for(;k&&k!==b;k=k[g])S.push(k);return S},h=(k,g)=>l.closest(k,b=>b.parentNode===g),u=k=>{k&&k.length&&t(k)},p=(k,g,b)=>{const S=b?"nextSibling":"previousSibling";for(let N=k,j=N.parentNode;N&&N!==g;N=j){j=N.parentNode;const B=d(N===k?N:N[S],S);B.length&&(b||B.reverse(),u(c(B)))}};if(n===a)return u(c([n]));const m=l.commonParent(n,a)||l.getEditableRoot(n);if(l.isChildOf(n,a))return p(n,m,!0);if(l.isChildOf(a,n))return p(a,m);const v=h(n,m)||n,T=h(a,m)||a;p(n,v,!0);const P=d(v===n?v:v.nextSibling,"nextSibling",T===a?T.nextSibling:T);P.length&&u(c(P)),p(a,T)}scrollIntoView(t){const i=$(t).height();return t.scrollTop+i<this.startContainer.offsetTop&&(t.scrollTop+=Math.abs(t.scrollTop+i-this.startContainer.offsetTop)),this}normalize(){const t=function(n,r){if(!n||C.isVisiblePoint(n)&&(!C.isEdgePoint(n)||C.isRightEdgePoint(n)&&!r||C.isLeftEdgePoint(n)&&r||C.isRightEdgePoint(n)&&r&&l.isVoid(n.node.nextSibling)||C.isLeftEdgePoint(n)&&!r&&l.isVoid(n.node.previousSibling)||l.isBlock(n.node)&&l.isEmpty(n.node)))return n;const a=l.closest(n.node,l.isBlock);let c=!1;if(!c){const u=C.prevPoint(n)||{node:null};c=(C.isLeftEdgePointOf(n,a)||l.isVoid(u.node))&&!r}let d=!1;if(!d){const u=C.nextPoint(n)||{node:null};d=(C.isRightEdgePointOf(n,a)||l.isVoid(u.node))&&r}if(c||d){if(C.isVisiblePoint(n))return n;r=!r}return(r?C.nextPointUntil(C.nextPoint(n),C.isVisiblePoint):C.prevPointUntil(C.prevPoint(n),C.isVisiblePoint))||n},i=t(this.getEndPoint(),!1),s=this.collapsed?i:t(this.getStartPoint(),!0);return new z(s.node,s.offset,i.node,i.offset)}nodes(t,i){const s=l.matchSelector(t,y.ok),n=i&&i.includeAncestor,r=i&&i.fullyContains,a=this.getStartPoint(),c=this.getEndPoint(),d=[],h=[];return C.walkPoint(a,c,u=>{if(l.isEditableRoot(u.node))return;let p;r?(C.isLeftEdgePoint(u)&&h.push(u.node),C.isRightEdgePoint(u)&&f.contains(h,u.node)&&(p=u.node)):n?p=l.closest(u.node,s):p=u.node,p&&s(p)&&d.push(p)},!0),f.unique(d)}expand(t){const i=l.matchSelector(t),s=l.closest(this.startContainer,i),n=l.closest(this.endContainer,i);if(!s&&!n)return this;const r=this.getPoints();return s&&(r.sc=s,r.so=0),n&&(r.ec=n,r.eo=l.nodeLength(n)),this.setStart(r.sc,r.so),this.setEnd(r.ec,r.eo),this}splitText(){const t=this.sc===this.ec,i=this.getPoints();return l.isText(this.ec)&&!C.isEdgePoint(this.getEndPoint())&&this.ec.splitText(this.eo),l.isText(this.sc)&&!C.isEdgePoint(this.getStartPoint())&&(i.sc=this.sc.splitText(this.so),i.so=0,t&&(i.ec=i.sc,i.eo=this.eo-this.so)),this.setStart(i.sc,i.so),this.setEnd(i.ec,i.eo),this}isLeftEdgeOf(t){if(!C.isLeftEdgePoint(this.getStartPoint()))return!1;const i=l.closest(this.sc,t);return i&&l.isLeftEdgeOf(this.sc,i)}isSingleContainer(){return this.startContainer===this.endContainer}wrapBodyInlineWithPara(){if(l.isBodyContainer(this.sc)&&l.isEmpty(this.sc))return this.sc.innerHTML=l.emptyPara,Vt(this.sc.firstChild,0,this.sc.firstChild,0);const t=this.normalize();if(l.isParaInline(this.sc)||l.isPara(this.sc))return t;let i;if(l.isBlock(t.sc))i=t.sc.childNodes[t.so>0?t.so-1:0];else{const s=l.parents(t.sc,l.isBlock);i=f.last(s),l.isBlock(i)&&(i=s[s.length-2]||t.sc.childNodes[t.so])}if(i){let s=l.prevSiblings(i,l.isParaInline).reverse();if(s=s.concat(l.nextSiblings(i.nextSibling,l.isParaInline)),s.length){const n=l.wrap(f.head(s),"p");l.appendChildNodes(n,f.tail(s))}}return this.normalize()}pasteHTML(t){t=((t||"")+"").trim(t);const i=l.create("div",null,t);let s=f.from(i.childNodes);const n=this;let r=!1;return n.so>=0&&(s=s.reverse(),r=!0),s=s.map(function(a){return n.insertNode(a,!l.isInline(a))}),r&&(s=s.reverse()),s}findWordEndpoint(t,i,s){const n=t?this.getStartPoint():this.getEndPoint(),r=lr(i);if(r(n))return n;let a=t?C.prevPointUntil(n,r):C.nextPointUntil(n,r);if(!t&&s&&!C.equals(n,a)){const c=C.getCharType(a);(c<1||!i||c===1)&&(a=C.prevPoint(a))}return a}getWordRange(t){const i=H.isBoolean(t)?t:(t==null?void 0:t.forward)===!0,s=(t==null?void 0:t.trim)===!0,n=(t==null?void 0:t.stopAtPunc)===!0,r=this.findWordEndpoint(!0,n,s),a=i?this.findWordEndpoint(!1,n,s):r;return new z(r.node,r.offset,a.node,a.offset)}getWordsRange(t){var i=this.getEndPoint();const s=r=>C.getCharType(r)===-1;if(s(i))return this;const n=C.prevPointUntil(i,s);return t&&(i=C.nextPointUntil(i,s)),new z(n.node,n.offset,i.node,i.offset)}getWordsMatchRange(t){const i=this.getEndPoint(),s=C.prevPointUntil(i,c=>{if(C.getCharType(c)===-1)return!0;const d=Ut(c,i),h=t.exec(d.toString());return h&&h.index===0}),n=Ut(s,i),r=n.toString(),a=t.exec(r);return a&&a[0].length===r.length?n:null}createBookmark(t){return{s:{path:l.makeOffsetPath(t,this.sc),offset:this.so},e:{path:l.makeOffsetPath(t,this.ec),offset:this.eo}}}createParaBookmark(t){return{s:{path:f.tail(l.makeOffsetPath(f.head(t),this.sc)),offset:this.so},e:{path:f.tail(l.makeOffsetPath(f.last(t),this.ec)),offset:this.eo}}}}const x={create:Vt,createFromBodyElement:eo,createFromSelection:to,createFromNode:wt,createFromNodeBefore:oo,createFromNodeAfter:io,createFromNodes:br,createFromBookmark:vr,createFromParaBookmark:Cr,createFromNativeRange:Ot,createFromPoints:Ut,getWrappedRange:dr,getNativeRange:Dt,isFullyContainedInNode:hr},A={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221,HOME:36,END:35,PAGEUP:33,PAGEDOWN:34},E={isEdit:e=>f.contains([A.BACKSPACE,A.TAB,A.ENTER,A.SPACE,A.DELETE],e),isRemove:e=>f.contains([A.BACKSPACE,A.DELETE],e),isMove:e=>f.contains([A.LEFT,A.UP,A.RIGHT,A.DOWN],e),isNavigation:e=>f.contains([A.HOME,A.END,A.PAGEUP,A.PAGEDOWN],e),nameFromCode:W.invert(A),code:A};function wr(e){return $.Deferred(t=>{$.extend(new FileReader,{onload:i=>{const s=i.target.result;t.resolve(s)},onerror:i=>{t.reject(i)}}).readAsDataURL(e)}).promise()}function kr(e){return $.Deferred(t=>{const i=$("<img>");i.one("load",()=>{i.off("error abort"),t.resolve(i)}).one("error abort",()=>{i.off("load").detach(),t.reject(i)}).css({display:"none"}).appendTo(document.body).attr("src",e)}).promise()}class yr{constructor(t){this.stack=[],this.stackOffset=-1,this.context=t,this.$editable=t.layoutInfo.editable,this.editable=this.$editable[0]}get editor(){return this.context.modules.editor}makeSnapshot(){const t=x.create(this.editable),i={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:this.$editable.html(),bookmark:t&&t.isOnEditable()?t.createBookmark(this.editable):i}}applySnapshot(t){t.contents!==null&&this.$editable.html(t.contents),t.bookmark!==null&&this.editor.selection.moveToBookmark(t.bookmark)}rewind(){this.$editable.html()!==this.stack[this.stackOffset].contents&&this.recordUndo(),this.stackOffset=0,this.applySnapshot(this.stack[this.stackOffset])}commit(){this.stack=[],this.stackOffset=-1,this.recordUndo()}reset(){this.stack=[],this.stackOffset=-1,this.$editable.html(""),this.recordUndo()}canUndo(){return this.stackOffset>0}undo(){this.$editable.html()!==this.stack[this.stackOffset].contents&&this.recordUndo(),this.stackOffset>0&&(this.stackOffset--,this.applySnapshot(this.stack[this.stackOffset]))}canRedo(){return this.stack.length-1>this.stackOffset}redo(){this.stack.length-1>this.stackOffset&&(this.stackOffset++,this.applySnapshot(this.stack[this.stackOffset]))}recordUndo(){this.stackOffset++,this.stack.length>this.stackOffset&&(this.stack=this.stack.slice(0,this.stackOffset)),this.stack.push(this.makeSnapshot()),this.stack.length>this.context.options.historyLimit&&(this.stack.shift(),this.stackOffset-=1)}}class xr{jQueryCSS(t,i){const s={};return $.each(i,(n,r)=>{s[r]=t.css(r)}),s}fromNode(t){const i=["font-family","font-size","text-align","list-style-type","line-height"],s=this.jQueryCSS(t,i)||{},n=t[0].style.fontSize||s["font-size"];return s["font-size"]=parseInt(n,10),s["font-size-unit"]=n.match(/[a-z%]+$/),s}stylePara(t,i){f.each(t.nodes(l.isPara,{includeAncestor:!0}),s=>{$(s).css(i)})}styleNodes(t,i){t=t.splitText();const s=i&&i.nodeName||"SPAN",n=!!(i&&i.expandClosestSibling),r=!!(i&&i.onlyPartialContains);if(t.collapsed)return[t.insertNode(l.create(s))];let a=l.matchNodeNames(s);const c=t.nodes(l.isText,{fullyContains:!0}).map(d=>l.closestSingleParent(d,a)||l.wrap(d,s));if(n){if(r){const d=t.nodes();a=y.and(a,h=>f.contains(d,h))}return c.map(d=>{const h=l.withClosestSiblings(d,a),u=f.head(h),p=f.tail(h);return $.each(p,(m,v)=>{l.appendChildNodes(u,v.childNodes),l.remove(v)}),f.head(h)})}else return c}current(t){const i=$(l.isElement(t.sc)?t.sc:t.sc.parentNode);let s=this.fromNode(i);try{s=$.extend(s,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal","font-family":document.queryCommandValue("fontname")||s["font-family"]})}catch{}if(!t.isOnList())s["list-style"]="none";else{const a=["circle","disc","disc-leading-zero","square"].indexOf(s["list-style-type"])>-1;s["list-style"]=a?"unordered":"ordered"}const n=l.ancestor(t.sc,l.isPara);if(n&&n.style["line-height"])s["line-height"]=n.style.lineHeight;else{const r=parseInt(s["line-height"],10)/parseInt(s["font-size"],10);s["line-height"]=r.toFixed(1)}return s.anchor=t.isOnAnchor()&&l.ancestor(t.sc,l.isAnchor),s.ancestors=l.parents(t.sc),s.range=t,s}}class so{constructor(t){this.context=t}get selection(){return this.context.modules.editor.selection}insertOrderedList(t){this.toggleList("OL",t)}insertUnorderedList(t){this.toggleList("UL",t)}indent(t){t=t||this.selection.getRange(),t=t.wrapBodyInlineWithPara();const i=t.nodes(l.isPara,{includeAncestor:!0}),s=f.clusterBy(i,"parentNode");f.each(s,n=>{const r=f.head(n);if(l.isLi(r)){const a=this.findList(r.previousSibling);a?n.map(c=>a.appendChild(c)):(this.wrapList(n,r.parentNode.nodeName),n.map(c=>c.parentNode).map(c=>this.appendToPrevious(c)))}else f.each(n,a=>{$(a).css("marginLeft",(c,d)=>(parseInt(d,10)||0)+25)})}),this.selection.setRange(t)}outdent(t){t=t||this.selection.getRange(),t=t.wrapBodyInlineWithPara();const i=t.nodes(l.isPara,{includeAncestor:!0}),s=f.clusterBy(i,"parentNode");f.each(s,n=>{const r=f.head(n);l.isLi(r)?this.releaseList([n]):f.each(n,a=>{$(a).css("marginLeft",(c,d)=>(d=parseInt(d,10)||0,d>25?d-25:""))})}),this.selection.setRange(t)}toggleList(t,i){i=i||this.selection.getRange(),i=i.wrapBodyInlineWithPara();let s=i.nodes(l.isPara,{includeAncestor:!0});const n=i.createParaBookmark(s),r=f.clusterBy(s,"parentNode");if(f.find(s,l.isPurePara)){let a=[];f.each(r,c=>{a=a.concat(this.wrapList(c,t))}),s=a}else{const a=i.nodes(l.isList,{includeAncestor:!0}).filter(c=>!$.nodeName(c,t));a.length?f.each(a,c=>{l.rename(c,t)}):s=this.releaseList(r,!0)}i=x.createFromParaBookmark(n,s),this.selection.setRange(i)}wrapList(t,i){const s=f.head(t),n=f.last(t),r=l.isList(s.previousSibling)&&s.previousSibling,a=l.isList(n.nextSibling)&&n.nextSibling,c=r||l.insertAfter(n,l.create(i||"UL"));return t=t.map(d=>l.isPurePara(d)?l.rename(d,"LI"):d),l.appendChildNodes(c,t,!0),a&&(l.appendChildNodes(c,f.from(a.childNodes),!0),l.remove(a)),t}releaseList(t,i){let s=[];return f.each(t,n=>{const r=f.head(n),a=f.last(n),c=i?l.farthestParent(r,l.isList):r.parentNode,d=c.parentNode;if(c.parentNode.nodeName==="LI")n.map(h=>{const u=this.findNextSiblings(h);d.nextSibling?d.parentNode.insertBefore(h,d.nextSibling):d.parentNode.appendChild(h),u.length&&(this.wrapList(u,c.nodeName),h.appendChild(u[0].parentNode))}),c.children.length===0&&d.removeChild(c),d.childNodes.length===0&&d.parentNode.removeChild(d);else{const h=c.childNodes.length>1?C.splitTree(c,{node:a.parentNode,offset:l.position(a)+1},{skipPaddingBlankHTML:!0}):null,u=C.splitTree(c,{node:r.parentNode,offset:l.position(r)},{skipPaddingBlankHTML:!0});n=i?l.children(u,l.isLi):f.from(u.childNodes).filter(l.isLi),(i||!l.isList(c.parentNode))&&(n=n.map(m=>l.rename(m,"P"))),f.each(f.from(n).reverse(),m=>{l.insertAfter(c,m)});const p=f.compact([c,u,h]);f.each(p,m=>{const v=[m].concat(l.children(m,l.isList));f.each(v.reverse(),T=>{l.nodeLength(T)||l.remove(T,!0)})})}s=s.concat(n)}),s}appendToPrevious(t){return t.previousSibling?l.appendChildNodes(t.previousSibling,[t]):this.wrapList([t],"LI")}findList(t){return t?f.find(t.children,i=>["OL","UL"].indexOf(i.nodeName)>-1):null}findNextSiblings(t){const i=[];for(;t.nextSibling;)i.push(t.nextSibling),t=t.nextSibling;return i}}class $r{constructor(t){this.context=t,this.bullet=new so(t)}get selection(){return this.context.modules.editor.selection}insertTab(t,i){const s=l.createText(new Array(i+1).join(C.NBSP_CHAR));t=t.deleteContents(),t.insertNode(s,!0),t=x.create(s,i),this.selection.setRange(t)}insertParagraph(t){t=t||this.selection.getRange(),t=t.deleteContents(),t=t.wrapBodyInlineWithPara();const i=l.closest(t.sc,l.isPara);let s;if(i)if(l.isLi(i)&&(l.isEmpty(i)||l.deepestChildIsEmpty(i))){this.bullet.toggleList(i.parentNode.nodeName);return}else{let n=null;if(this.context.options.blockquoteBreakingLevel===1?n=l.ancestor(i,l.isBlockquote):this.context.options.blockquoteBreakingLevel===2&&(n=l.farthestParent(i,l.isBlockquote)),n){s=$(l.emptyPara)[0],C.isRightEdgePoint(t.getStartPoint())&&l.isBR(t.sc.nextSibling)&&$(t.sc.nextSibling).remove();const r=C.splitTree(n,t.getStartPoint(),{isDiscardEmptySplits:!0});r?r.parentNode.insertBefore(s,r):l.insertAfter(n,s)}else{s=C.splitTree(i,t.getStartPoint());let r=l.children(i,l.isEmptyAnchor);r=r.concat(l.children(s,l.isEmptyAnchor)),$.each(r,(a,c)=>{l.remove(c)}),(l.isHeading(s)||l.isPre(s)||l.isCustomStyleTag(s))&&l.isEmpty(s)&&(s=l.rename(s,"p"))}}else{const n=t.sc.childNodes[t.so];s=$(l.emptyPara)[0],n?t.sc.insertBefore(s,n):t.sc.appendChild(s)}this.selection.setRange(x.create(s,0).normalize()).scrollIntoView()}}const w=function(e,t,i,s){const n={colPos:0,rowPos:0},r=[],a=[];function c(){!e||!e.tagName||e.tagName.toLowerCase()!=="td"&&e.tagName.toLowerCase()!=="th"||(n.colPos=e.cellIndex,!(!e.parentElement||!e.parentElement.tagName||e.parentElement.tagName.toLowerCase()!=="tr")&&(n.rowPos=e.parentElement.rowIndex))}function d(g,b,S,N,j,B,X){const G={baseRow:S,baseCell:N,isRowSpan:j,isColSpan:B,isVirtual:X};r[g]||(r[g]=[]),r[g][b]=G}function h(g,b,S,N){return{baseCell:g.baseCell,action:b,virtualTable:{rowIndex:S,cellIndex:N}}}function u(g,b){if(!r[g]||!r[g][b])return b;let S=b;for(;r[g][S];)if(S++,!r[g][S])return S}function p(g,b){const S=u(g.rowIndex,b.cellIndex),N=b.colSpan>1,j=b.rowSpan>1,B=g.rowIndex===n.rowPos&&b.cellIndex===n.colPos;d(g.rowIndex,S,g,b,j,N,!1);const X=b.attributes.rowSpan?parseInt(b.attributes.rowSpan.value,10):0;if(X>1)for(let V=1;V<X;V++){const it=g.rowIndex+V;m(it,S,b,B),d(it,S,g,b,!0,N,!0)}const G=b.attributes.colSpan?parseInt(b.attributes.colSpan.value,10):0;if(G>1)for(let V=1;V<G;V++){const it=u(g.rowIndex,S+V);m(g.rowIndex,it,b,B),d(g.rowIndex,it,g,b,j,!0,!0)}}function m(g,b,S,N){g===n.rowPos&&n.colPos>=S.cellIndex&&S.cellIndex<=b&&!N&&n.colPos++}function v(){const g=s.rows;for(let b=0;b<g.length;b++){const S=g[b].cells;for(let N=0;N<S.length;N++)p(g[b],S[N])}}function T(g){switch(t){case w.where.Column:if(g.isColSpan)return w.resultAction.SubtractSpanCount;break;case w.where.Row:if(!g.isVirtual&&g.isRowSpan)return w.resultAction.AddCell;if(g.isRowSpan)return w.resultAction.SubtractSpanCount;break}return w.resultAction.RemoveCell}function P(g){switch(t){case w.where.Column:if(g.isColSpan)return w.resultAction.SumSpanCount;if(g.isRowSpan&&g.isVirtual)return w.resultAction.Ignore;break;case w.where.Row:if(g.isRowSpan)return w.resultAction.SumSpanCount;if(g.isColSpan&&g.isVirtual)return w.resultAction.Ignore;break}return w.resultAction.AddCell}function k(){c(),v()}this.getActionList=function(){const g=t===w.where.Row?n.rowPos:-1,b=t===w.where.Column?n.colPos:-1;let S=0,N=!0;for(;N;){const j=g>=0?g:S,B=b>=0?b:S,X=r[j];if(!X)return N=!1,a;const G=X[B];if(!G)return N=!1,a;let V=w.resultAction.Ignore;switch(i){case w.requestAction.Add:V=P(G);break;case w.requestAction.Delete:V=T(G);break}a.push(h(G,V,j,B)),S++}return a},k()};w.where={Row:0,Column:1},w.requestAction={Add:0,Delete:1},w.resultAction={Ignore:0,SubtractSpanCount:1,RemoveCell:2,AddCell:3,SumSpanCount:4};class Sr{constructor(t){this.context=t}get selection(){return this.context.modules.editor.selection}tab(t,i){const s=l.closest(t.commonAncestorContainer,l.isCell),n=l.closest(s,l.isTable),r=l.children(n,l.isCell),a=f[i?"prev":"next"](r,s);a&&this.selection.setRange(x.create(a,0))}addRow(t,i){const s=l.ancestor(t.commonAncestorContainer,l.isCell),n=$(s).closest("tr"),r=this.recoverAttributes(n),a=$("<tr"+r+"></tr>"),d=new w(s,w.where.Row,w.requestAction.Add,$(n).closest("table")[0]).getActionList();for(let h=0;h<d.length;h++){const u=d[h],p=this.recoverAttributes(u.baseCell);switch(u.action){case w.resultAction.AddCell:a.append("<td"+p+">"+l.blank+"</td>");break;case w.resultAction.SumSpanCount:{if(i==="top"&&(u.baseCell.parent?u.baseCell.closest("tr").rowIndex:0)<=n[0].rowIndex){const P=$("<div></div>").append($("<td"+p+">"+l.blank+"</td>").removeAttr("rowspan")).html();a.append(P);break}let m=parseInt(u.baseCell.rowSpan,10);m++,u.baseCell.setAttribute("rowSpan",m)}break}}if(i==="top")n.before(a);else{if(s.rowSpan>1){const u=n[0].rowIndex+(s.rowSpan-2);$($(n).parent().find("tr")[u]).after($(a));return}n.after(a)}}addCol(t,i){const s=l.ancestor(t.commonAncestorContainer,l.isCell),n=$(s).closest("tr");$(n).siblings().push(n);const c=new w(s,w.where.Column,w.requestAction.Add,$(n).closest("table")[0]).getActionList();for(let d=0;d<c.length;d++){const h=c[d],u=this.recoverAttributes(h.baseCell);switch(h.action){case w.resultAction.AddCell:i==="right"?$(h.baseCell).after("<td"+u+">"+l.blank+"</td>"):$(h.baseCell).before("<td"+u+">"+l.blank+"</td>");break;case w.resultAction.SumSpanCount:if(i==="right"){let p=parseInt(h.baseCell.colSpan,10);p++,h.baseCell.setAttribute("colSpan",p)}else $(h.baseCell).before("<td"+u+">"+l.blank+"</td>");break}}}recoverAttributes(t){let i="";if(!t)return i;const s=t.attributes||[];for(let n=0;n<s.length;n++)s[n].name.toLowerCase()!=="id"&&s[n].specified&&(i+=" "+s[n].name+"='"+s[n].value+"'");return i}deleteRow(t){const i=l.ancestor(t.commonAncestorContainer,l.isCell),s=$(i).closest("tr"),n=s.children("td, th").index($(i)),r=s[0].rowIndex,c=new w(i,w.where.Row,w.requestAction.Delete,$(s).closest("table")[0]).getActionList();for(let d=0;d<c.length;d++){if(!c[d])continue;const h=c[d].baseCell,u=c[d].virtualTable,p=h.rowSpan&&h.rowSpan>1;let m=p?parseInt(h.rowSpan,10):0;switch(c[d].action){case w.resultAction.Ignore:continue;case w.resultAction.AddCell:{const v=s.next("tr")[0];if(!v)continue;const T=s[0].cells[n];p&&(m>2?(m--,v.insertBefore(T,v.cells[n]),v.cells[n].setAttribute("rowSpan",m),v.cells[n].innerHTML=""):m===2&&(v.insertBefore(T,v.cells[n]),v.cells[n].removeAttribute("rowSpan"),v.cells[n].innerHTML=""))}continue;case w.resultAction.SubtractSpanCount:p&&(m>2?(m--,h.setAttribute("rowSpan",m),u.rowIndex!==r&&h.cellIndex===n&&(h.innerHTML="")):m===2&&(h.removeAttribute("rowSpan"),u.rowIndex!==r&&h.cellIndex===n&&(h.innerHTML="")));continue;case w.resultAction.RemoveCell:continue}}s.remove()}deleteCol(t){const i=l.ancestor(t.commonAncestorContainer,l.isCell),s=$(i).closest("tr"),n=s.children("td, th").index($(i)),a=new w(i,w.where.Column,w.requestAction.Delete,$(s).closest("table")[0]).getActionList();for(let c=0;c<a.length;c++)if(a[c])switch(a[c].action){case w.resultAction.Ignore:continue;case w.resultAction.SubtractSpanCount:{const d=a[c].baseCell;if(d.colSpan&&d.colSpan>1){let u=d.colSpan?parseInt(d.colSpan,10):0;u>2?(u--,d.setAttribute("colSpan",u),d.cellIndex===n&&(d.innerHTML="")):u===2&&(d.removeAttribute("colSpan"),d.cellIndex===n&&(d.innerHTML=""))}}continue;case w.resultAction.RemoveCell:l.remove(a[c].baseCell,!0);continue}}createTable(t,i,s){const n=[];let r;for(let h=0;h<t;h++)n.push("<td>"+l.blank+"</td>");r=n.join("");const a=[];let c;for(let h=0;h<i;h++)a.push("<tr>"+r+"</tr>");c=a.join("");const d=$("<table>"+c+"</table>");return s&&s.tableClassName&&d.addClass(s.tableClassName),d[0]}deleteTable(t){const i=l.ancestor(t.commonAncestorContainer,l.isCell);$(i).closest("table").remove()}}const _t=e=>l.isText(e)&&e.data.length>0,no=(e,t)=>{const i={"data-note-type":"bookmark",id:e,style:"overflow:hidden;line-height:0px"};return t?l.create("span",i,"&#xFEFF;"):l.create("span",i)},Nr=(e,t,i)=>{let s=0;return f.each(l.select(e,t),n=>{if(n.getAttribute("data-note-bogus")!=="all"){if(n===i)return!1;s++;return}}),s},jt=(e,t)=>{let i=t?e.startContainer:e.endContainer,s=t?e.startOffset:e.endOffset;if(l.isElement(i)&&i.nodeName==="TR"){const n=i.childNodes;i=n[Math.min(t?s:s-1,n.length-1)],i&&(s=t?0:i.childNodes.length,t?e.setStart(i,s):e.setEnd(i,s))}},ro=e=>(jt(e,!0),jt(e,!1),e),ao=e=>(l.isElement(e)&&l.isBlock(e)&&!e.innerHTML&&(e.innerHTML='<br data-note-bogus="1" />'),e),lo=(e,t)=>{const i=document.getElementById(t.id+"_"+e),s=i==null?void 0:i.parentNode,n=t.keep;if(i&&s){let r,a;if(e==="start"?n?i.hasChildNodes()?(r=i.firstChild,a=1):_t(i.nextSibling)?(r=i.nextSibling,a=0):_t(i.previousSibling)?(r=i.previousSibling,a=i.previousSibling.data.length):(r=s,a=l.position(i)+1):(r=s,a=l.position(i)):n?i.hasChildNodes()?(r=i.firstChild,a=1):_t(i.previousSibling)?(r=i.previousSibling,a=i.previousSibling.data.length):(r=s,a=l.position(i)):(r=s,a=l.position(i)),!n){const c=i.previousSibling,d=i.nextSibling;f.each(i.childNodes,u=>{l.isText(u)&&(u.data=u.data.replace(/\uFEFF/g,""))});let h;for(;h=document.getElementById(t.id+"_"+e);)l.remove(h,!1);if(l.isText(d)&&l.isText(c)){const u=c.data.length;c.appendData(d.data),l.remove(d,!0),r=c,a=u}}return{node:r,offset:a}}else return null},kt=e=>{l.isText(e)&&e.data.length===0&&l.remove(e,!0)},Er=(e,t)=>{x.getNativeRange(e).insertNode(t),kt(t.previousSibling),kt(t.nextSibling)},Hr=(e,t)=>{const i=t.firstChild,s=t.lastChild;x.getNativeRange(e).insertNode(t),kt(i==null?void 0:i.previousSibling),kt(s==null?void 0:s.nextSibling)},co=(e,t)=>{l.isDocumentFragment(t)?Hr(e,t):Er(e,t)},qt={moveEndPoint:jt,getPersistentBookmark:(e,t)=>{let i=e.getRange();const s=y.uniqueId("note_"),n=i.collapsed,r=e.getNode(),a=r.nodeName,c=e.isForward();if(a==="IMG")return{name:a,index:Nr(e.editor.editable,a,r)};const d=ro(i.cloneRange());if(!n){d.collapse(!1);const u=no(s+"_end",t);co(d,u)}i=ro(i),i.collapse(!0);const h=no(s+"_start",t);return co(i,h),e.moveToBookmark({id:s,keep:!0,forward:c}),{id:s,forward:c}},resolvePersistentBookmark:e=>{const t=lo("start",e),i=lo("end",e)||t;return t&&i?{range:x.create(ao(t.node),t.offset,ao(i.node),i.offset),forward:e.forward===!0}:null}};let yt=window;const Wt=e=>{let t=x.create(e.editable);return $(t.sc).closest(".note-editable").length===0&&(t=x.createFromBodyElement(e.editable)),t},ho=(e,t,i,s,n)=>{let r=i?t.startContainer:t.endContainer,a=i?t.startOffset:t.endOffset;return r&&(!s||!t.collapsed)&&(r=r.childNodes[n(r,a)]||r,!l.isElement(r)&&l.isElement(r.parentNode)&&(r=r.parentNode)),r||e};class Tr{constructor(t){this.context=t,this.selectedControl=null,this.explicitRange=null,this.selectedRange=null,this.bookmark=null}initialize(t){this.hasFocus=t.hasFocus();const i=()=>{const a=this.nativeSelection;let c;return a.rangeCount>0?c=x.createFromNativeRange(a.getRangeAt(0)):c=Wt(this.editor),c},s=y.throttle(a=>{a.type==="blur"&&(this.hasFocus=!1),a.type==="focus"?(this.hasFocus=!0,this.bookmark=i()):a.type!=="summernote"&&(this.bookmark=i())},200),n=["keydown","keyup","mouseup","paste","focus","blur"].map(a=>a+".selection").join(" ");t.$editable.on(n,s),this.context.layoutInfo.note.on("summernote.change.selection",s)}destroy(){this.editor.$editable.off("selection"),this.context.layoutInfo.note.off("selection"),this.context=null,this.selectedRange=null,this.explicitRange=null,this.bookmark=null,yt=null}get editor(){return this.context.modules.editor}get nativeSelection(){return yt.getSelection?yt.getSelection():yt.document.selection}isValidRange(t){if(!(t&&(t.isWrapper||t instanceof Range)))return!1;const s=this.editor.editable;return x.isFullyContainedInNode(t,s)}collapse(t){const i=this.getRange();i.collapse(!!t),this.setRange(i)}getRange(){let t;const i=(n,r,a)=>{try{return r.compareBoundaryPoints(n,a)}catch{return-1}},s=this.editor;if(H.isAssigned(this.bookmark)&&!this.hasFocus)return this.bookmark;if(!t&&this.hasFocus)try{const n=this.nativeSelection;n&&n.rangeCount>0&&!l.isRestrictedNode(n.anchorNode)&&(t=x.createFromNativeRange(n.getRangeAt(0)))}catch{}return t||(t=Wt(s)),this.selectedRange&&this.explicitRange&&(i(t.START_TO_START,t,this.selectedRange)===0&&i(t.END_TO_END,t,this.selectedRange)===0?t=this.explicitRange:(this.selectedRange=null,this.explicitRange=null,this.bookmark=null)),t}setRange(t,i){if(!this.isValidRange(t))return this;const s=this.nativeSelection;if(s){t.isWrapper||(t=x.getWrappedRange(t)),this.explicitRange=t,this.bookmark=t;try{s.removeAllRanges(),s.addRange(x.getNativeRange(t))}catch{}i===!1&&s.extend&&(s.collapse(t.endContainer,t.endOffset),s.extend(t.startContainer,t.startOffset)),this.selectedRange=s.rangeCount>0?t:null}if(!t.collapsed&&t.startContainer===t.endContainer&&(s!=null&&s.setBaseAndExtent)&&t.endOffset-t.startOffset<2&&t.startContainer.hasChildNodes()){const n=t.startContainer.childNodes[t.startOffset];n&&n.nodeName==="IMG"&&(s.setBaseAndExtent(t.startContainer,t.startOffset,t.endContainer,t.endOffset),(s.anchorNode!==t.startContainer||s.focusNode!==t.endContainer)&&s.setBaseAndExtent(n,0,n,1))}return this}setNode(t){return t}getNode(){const t=this.getRange(),i=this.editor.$editable;if(!t)return i;const s=t.startOffset,n=t.endOffset;let r=t.startContainer,a=t.endContainer,c=t.commonAncestorContainer;t.collapsed||(r===a&&n-s<2&&r.hasChildNodes()&&(c=r.childNodes[s]),l.isText(r)&&l.isText(a)&&(r.length===s?r=l.skipEmptyTextNodes(r.nextSibling,!0):r=r.parentNode,n===0?a=l.skipEmptyTextNodes(a.previousSibling,!1):a=a.parentNode,r&&r===a&&(c=r)));const d=l.isText(c)?c.parentNode:c;return l.isHTMLElement(d)?d:i}getTextContent(){let t=this.getRange();return t.isOnAnchor()&&(t=x.createFromNode(l.closest(t.startContainer,l.isAnchor))),t.toString()}getHtmlContent(){let t=this.getRange();var i=t.commonAncestorContainer.parentNode.cloneNode(!1);return i.appendChild(t.cloneContents()),i.innerHTML}pasteContent(t){if(!t||this.editor.isLimited(t.length))return;t=this.context.invoke("codeview.purify",t.trim());const i=this.getRange(),s=l.create("div",null,t);let n=f.from(s.childNodes),r=!1;return i.so>=0&&(n=n.reverse(),r=!0),n=n.map(a=>i.insertNode(a,l.isBlock(a)||l.isData(a))),r&&(n=n.reverse()),this.setRange(x.createFromNodeAfter(f.last(n))),n}getStart(t,i=null){return ho(this.editor.editable,i||this.getRange(),!0,t,(s,n)=>Math.min(s.childNodes.length,n))}getEnd(t,i=null){return ho(this.editor.editable,i||this.getRange(),!1,t,(s,n)=>n>0?n-1:n)}createBookmark(t){return t?qt.getPersistentBookmark(this):this.getRange().createBookmark(this.editor.editable)}createParaBookmark(t){return this.getRange().createParaBookmark(t)}moveToBookmark(t){let i,s=!0;if(this.isValidRange(t))i=t;else if(t.s&&t.e)i=x.createFromBookmark(this.editor.editable,t),this.isValidRange(i)||(i=null);else if(t.id){const n=qt.resolvePersistentBookmark(t);i=n==null?void 0:n.range,s=n==null?void 0:n.forward}i&&(this.setRange(i,s),i.scrollIntoView(this.editor.editable))}setBookmark(t){this.isValidRange(t)?(t=x.getWrappedRange(t),this.bookmark=t):this.bookmark=Wt(this.editor)}restoreBookmark(){this.bookmark&&(this.setRange(this.bookmark),this.editor.focus())}select(t){if(l.isChildOf(t,this.editor.editable,!0)){const i=x.createFromNode(t);this.setRange(i)}return t}setNode(t){const i=l.outerHtml(t);return this.pasteContent(i),t}isCollapsed(){const t=this.getRange();return t?t.collapsed:!1}isEditable(){const t=this.getRange();return t.collapsed?l.isContentEditable(t.startContainer):l.isContentEditable(t.startContainer)&&l.isContentEditable(t.endContainer)}scrollIntoView(){this.getRange().scrollIntoView(this.editor.editable)}setCursorLocation(t,i){const s=document.createRange();H.isAssigned(t)&&H.isAssigned(i)?(s.setStart(t,i),s.setEnd(t,i),this.setRange(s),this.collapse(!1)):(qt.moveEndPoint(s,!0),this.setRange(s))}isForward(){const t=this.nativeSelection,i=t==null?void 0:t.anchorNode,s=t==null?void 0:t.focusNode;if(!t||!i||!s||l.isRestrictedNode(i)||l.isRestrictedNode(s))return!0;const n=document.createRange(),r=document.createRange();try{n.setStart(i,t.anchorOffset),n.collapse(!0),r.setStart(s,t.focusOffset),r.collapse(!0)}catch{return!0}return n.compareBoundaryPoints(n.START_TO_START,r)<=0}normalize(){const t=this.getRange();if(this.nativeSelection.rangeCount>0){const s=t.normalize();return this.setRange(s,this.isForward()),s}return t}}const Rr=e=>{const t=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;return e=e.replace(t,function(i,s,n){n=n.toUpperCase();const r=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(n)&&!!s,a=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(n);return i+(r||a?`
`:"")}),e.trim()},Lr={sanitizeHtml:(e,t)=>{const i=e.options.callbacks.onSanitizeHtml;return H.isFunction(i)?(t=i.call(e,t,{sanitize:!0,prettify:!0}),t):Rr(t)}},Ar="bogus";class zr{constructor(t){this.context=t,this.$note=t.layoutInfo.note,this.$editor=t.layoutInfo.editor,this.$editable=t.layoutInfo.editable,this.options=t.options,this.lang=this.options.langInfo,this.editable=this.$editable[0],this.snapshot=null,this.table=new Sr(t),this.bullet=new so(t),this.typing=new $r(t,this.bullet),this.history=new yr(t),this.style=new xr(t),this.selection=new Tr(t),this.context.memo("help.escape",this.lang.help.escape),this.context.memo("help.undo",this.lang.help.undo),this.context.memo("help.redo",this.lang.help.redo),this.context.memo("help.tab",this.lang.help.tab),this.context.memo("help.untab",this.lang.help.untab),this.context.memo("help.insertParagraph",this.lang.help.insertParagraph),this.context.memo("help.insertOrderedList",this.lang.help.insertOrderedList),this.context.memo("help.insertUnorderedList",this.lang.help.insertUnorderedList),this.context.memo("help.indent",this.lang.help.indent),this.context.memo("help.outdent",this.lang.help.outdent),this.context.memo("help.formatPara",this.lang.help.formatPara),this.context.memo("help.insertHorizontalRule",this.lang.help.insertHorizontalRule),this.context.memo("help.fontName",this.lang.help.fontName);const i=["bold","italic","underline","strikethrough","superscript","subscript","code","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor"];for(let s=0,n=i.length;s<n;s++)this[i[s]]=(r=>a=>{this.beforeCommand(),document.execCommand(r,!1,a),this.afterCommand(!0)})(i[s]),this.context.memo("help."+i[s],this.lang.help[i[s]]);this.fontName=this.wrapCommand(s=>this.fontStyling("font-family",L.validFontName(s))),this.fontSize=this.wrapCommand(s=>{const n=this.currentStyle()["font-size-unit"];return this.fontStyling("font-size",s+n)}),this.fontSizeUnit=this.wrapCommand(s=>{const n=this.currentStyle()["font-size"];return this.fontStyling("font-size",n+s)});for(let s=1;s<=6;s++)this["formatH"+s]=(n=>()=>{this.formatBlock("H"+n)})(s),this.context.memo("help.formatH"+s,this.lang.help["formatH"+s]);this.insertParagraph=this.wrapCommand(s=>{this.typing.insertParagraph(s)}),this.insertOrderedList=this.wrapCommand(s=>{this.bullet.insertOrderedList(s)}),this.insertUnorderedList=this.wrapCommand(s=>{this.bullet.insertUnorderedList(s)}),this.indent=this.wrapCommand(s=>{this.bullet.indent(s)}),this.outdent=this.wrapCommand(s=>{this.bullet.outdent(s)}),this.insertNode=this.wrapCommand(s=>{if(this.isLimited($(s).text().length))return;this.selection.getRange().insertNode(s),this.selection.setRange(x.createFromNodeAfter(s))}),this.insertText=this.wrapCommand(s=>{if(this.isLimited(s.length))return;const r=this.selection.getRange().insertNode(l.createText(s));this.selection.setRange(x.create(r,l.nodeLength(r)))}),this.pasteHTML=this.wrapCommand(s=>{this.selection.pasteContent(s)}),this.formatBlock=this.wrapCommand((s,n)=>{const r=this.options.callbacks.onApplyCustomStyle;r?r.call(this,n,this.context,this.onFormatBlock):this.onFormatBlock(s,n)}),this.insertHorizontalRule=this.wrapCommand(()=>{const s=this.selection.getRange().insertNode(l.create("HR"));s.nextSibling&&this.selection.setRange(x.create(s.nextSibling,0).normalize())}),this.lineHeight=this.wrapCommand(s=>{this.style.stylePara(this.selection.getRange(),{lineHeight:s})}),this.createLink=this.wrapCommand(s=>{let n=[],r=s.url;const a=s.text,c=s.isNewWindow;typeof r=="string"&&(r=r.trim()),this.options.onCreateLink?r=this.options.onCreateLink(r):r=this.checkLinkUrl(r)||r;let d=[];if(s.img&&!s.a)$(s.img).wrap('<a href="'+r+'"></a>'),s.a=s.img.parentElement,d.push(s.a);else if(s.img&&s.a)d.push(s.a);else{let h=s.range||this.selection.getRange();const u=a.length-h.toString().length;if(u>0&&this.isLimited(u))return;if(h.toString()!==a){h=h.deleteContents();const m=h.insertNode($("<A></A>").text(a)[0]);d.push(m)}else d=this.style.styleNodes(h,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0})}$.each(d,(h,u)=>{u.setAttribute("href",r),s.rel&&(u.rel=s.rel),s.cssClasss&&(u.className=s.cssClasss),s.cssStyle&&(u.style.cssText=s.cssStyle),c?(u.target="_blank",s.rel||(this.options.linkAddNoReferrer&&n.push("noreferrer"),this.options.linkAddNoOpener&&n.push("noopener"),n.length&&(u.rel=n.join(" ")))):u.removeAttribute("target")}),this.selection.setRange(x.createFromNodes(d))}),this.color=this.wrapCommand(s=>{const n=s.foreColor,r=s.backColor;n&&document.execCommand("foreColor",!1,n),r&&document.execCommand("backColor",!1,r)}),this.foreColor=this.wrapCommand(s=>{document.execCommand("foreColor",!1,s)}),this.insertTable=this.wrapCommand(s=>{const n=s.split("x");this.selection.getRange().deleteContents().insertNode(this.table.createTable(n[0],n[1],this.options))}),this.removeMedia=this.wrapCommand(()=>{let s=$(this.restoreTarget()).parent();s.closest("figure").length?s.closest("figure").remove():s=$(this.restoreTarget()).detach(),this.selection.setRange(x.createFromSelection(s)),this.context.triggerEvent("media.delete",s,this.$editable)}),this.floatMe=this.wrapCommand(s=>{const n=$(this.restoreTarget());n.removeClass("float-right float-left"),(s=="left"||s=="right")&&n.addClass("float-"+s)}),this.resize=this.wrapCommand(s=>{const n=$(this.restoreTarget());n.css("width","").css("height","").removeClass("w-100 w-50 w-25"),s=parseFloat(s),s>0&&(s===.25?n.addClass("w-25"):s===.5?n.addClass("w-50"):s===1?n.addClass("w-100"):n.css({width:s*100+"%"})),this.cleanEmptyStyling(n)})}cleanEmptyStyling(t){$(t).each((i,s)=>{s.className||s.removeAttribute("class"),s.style.cssText||s.removeAttribute("style")})}initialize(){this.selection.initialize(this),this.$editable.on("keydown",t=>{if(t.keyCode===E.code.ENTER&&this.context.triggerEvent("enter",t),this.context.triggerEvent("keydown",t),this.snapshot=this.history.makeSnapshot(),this.hasKeyShortCut=!1,t.isDefaultPrevented()||(this.options.shortcuts?this.hasKeyShortCut=this.handleKeyMap(t):this.preventDefaultEditableShortCuts(t)),this.isLimited(1,t)){const i=this.selection.getRange();if(i.eo-i.so===0)return!1}this.options.recordEveryKeystroke&&this.hasKeyShortCut===!1&&this.history.recordUndo()}).on("keyup mousedown mouseup copy paste copy focus blur scroll",t=>{this.context.triggerEvent(t.type,t)}).on("input",()=>{this.isLimited(0)&&this.snapshot&&this.history.applySnapshot(this.snapshot)}),this.$editable.attr("spellcheck",this.options.spellCheck),this.$editable.attr("autocorrect",this.options.spellCheck),this.options.disableGrammar&&this.$editable.attr("data-gramm",!1),this.$editable.html(l.value(this.$note)||l.emptyPara),this.$editable.on(L.inputEventName,y.debounce(()=>{this.context.triggerEvent("change",this.$editable)},10)),this.$editable.on("focusin",t=>{this.context.triggerEvent("focusin",t)}).on("focusout",t=>{this.context.triggerEvent("focusout",t)}),this.options.airMode?this.options.overrideContextMenu&&this.$editor.on("contextmenu",t=>(this.context.triggerEvent("contextmenu",t),!1)):(this.options.width&&this.$editor.outerWidth(this.options.width),this.options.height&&this.$editable.outerHeight(this.options.height),this.options.maxHeight&&this.$editable.css("max-height",this.options.maxHeight),this.options.minHeight&&this.$editable.css("min-height",this.options.minHeight)),this.history.recordUndo()}destroy(){this.selection.destroy(),this.$editable.off()}handleKeyMap(t){const i=this.options.keyMap[L.isMac?"mac":"pc"],s=[];t.metaKey&&s.push("CMD"),t.ctrlKey&&!t.altKey&&s.push("CTRL"),t.shiftKey&&s.push("SHIFT");const n=E.nameFromCode[t.keyCode];n&&s.push(n);const r=i[s.join("+")];if(n==="TAB"&&this.options.tabDisable)this.afterCommand();else if(r){if(this.context.invoke(r)!==!1)return t.preventDefault(),!0}else E.isEdit(t.keyCode)&&(E.isRemove(t.keyCode)&&this.context.invoke("removed"),this.afterCommand());return!1}preventDefaultEditableShortCuts(t){(t.ctrlKey||t.metaKey)&&f.contains([66,73,85],t.keyCode)&&t.preventDefault()}isLimited(t,i){return t=t||0,typeof i<"u"&&(E.isMove(i.keyCode)||E.isNavigation(i.keyCode)||i.ctrlKey||i.metaKey||f.contains([E.code.BACKSPACE,E.code.DELETE],i.keyCode))?!1:this.options.maxTextLength>0&&this.$editable.text().length+t>this.options.maxTextLength}checkLinkUrl(t){if(t=t==null?void 0:t.trim(),t){if(q.isValidEmail(t))return"mailto://"+t;if(q.isValidTel(t))return"tel://"+t;if(!q.startsWithUrlScheme(t)){let s=t,n=s.indexOf("/");if(n>1&&(s=s.substring(0,n)),q.isValidHost(s))return"https://"+t;var i=t[0];if(i==="/"||i==="~"||i==="\\"||i==="."||i==="#")return t}}return""}createRange(){return this.focus(),this.selection.getRange()}setLastRange(t){this.selection.setBookmark(t)}getLastRange(){return this.selection.bookmark||this.selection.setBookmark(),this.selection.bookmark}saveRange(t){t&&this.selection.collapse()}restoreRange(){this.selection.restoreBookmark()}html(t){let i=this.$editable.html();const s=W.valueOrDefault(this.options.sanitizeHtml,this.options.prettifyHtml);return W.valueOrDefault(t,s)&&(i=Lr.sanitizeHtml(this.context,i)),i}saveTarget(t){this.selection.selectedControl=t}clearTarget(){this.selection.selectedControl=null}restoreTarget(){return this.selection.selectedControl}currentStyle(){let t=x.create();return t?(t=t.normalize(),this.style.current(t)):this.style.fromNode(this.$editable)}styleFromNode(t){return this.style.fromNode(t)}undo(){this.context.triggerEvent("before.command",this.$editable),this.history.undo(),this.context.triggerEvent("change",this.$editable)}commit(){this.context.triggerEvent("before.command",this.$editable),this.history.commit(),this.context.triggerEvent("change",this.$editable)}redo(){this.context.triggerEvent("before.command",this.$editable),this.history.redo(),this.context.triggerEvent("change",this.$editable)}beforeCommand(){this.context.triggerEvent("before.command",this.$editable),document.execCommand("styleWithCSS",!1,this.options.styleWithCSS),this.focus()}afterCommand(t){this.normalizeContent(),this.history.recordUndo(),t||this.context.triggerEvent("change",this.$editable)}tab(){const t=this.selection.getRange();if(t.collapsed&&t.isOnCell())this.table.tab(t);else{if(this.options.tabSize===0)return!1;this.isLimited(this.options.tabSize)||(this.beforeCommand(),this.typing.insertTab(t,this.options.tabSize),this.afterCommand())}}untab(){const t=this.selection.getRange();if(t.collapsed&&t.isOnCell())this.table.tab(t,!0);else if(this.options.tabSize===0)return!1}wrapCommand(t){return function(){this.beforeCommand(),t.apply(this,arguments),this.afterCommand()}}removed(t,i,s){t=x.create(),t.collapsed&&t.isOnCell()&&(i=t.ec,(s=i.tagName)&&i.childElementCount===1&&i.childNodes[0].tagName==="BR"&&(s==="P"?i.remove():["TH","TD"].indexOf(s)>=0&&i.firstChild.remove()))}insertImage(t,i){return kr(t).then(s=>{this.beforeCommand(),typeof i=="function"?i(s):(typeof i=="string"&&s.attr("data-filename",i),s.css("width",Math.min(this.$editable.width(),s.width()))),s.show(),this.selection.getRange().insertNode(s[0]),this.selection.setRange(x.createFromNodeAfter(s[0])),this.afterCommand()}).fail(s=>{this.context.triggerEvent("image.upload.error",s)})}insertImagesAsDataURL(t){$.each(t,(i,s)=>{const n=s.name;this.options.maximumImageFileSize&&this.options.maximumImageFileSize<s.size?this.context.triggerEvent("image.upload.error",this.lang.image.maximumFileSizeError):wr(s).then(r=>this.insertImage(r,n)).fail(()=>{this.context.triggerEvent("image.upload.error")})})}insertImagesOrCallback(t){this.options.callbacks.onImageUpload?this.context.triggerEvent("image.upload",t):this.insertImagesAsDataURL(t)}getSelectedText(){return this.selection.getTextContent()}getTagStyleClass(t){let i=f.find(this.options.styleTags,s=>$.isPlainObject(s)&&s.tag.toUpperCase()==t.toUpperCase());return i==null?void 0:i.className}onFormatBlock(t,i){let s=this.createRange(),n=$([s.sc,s.ec]).closest(t),r={};if(n.length)for(const a of n[0].attributes)a.value&&(r[a.name]=a.value);if(document.execCommand("FormatBlock",!1,L.isMSIE?"<"+t+">":t),s=this.createRange(),n=$([s.sc,s.ec]).closest(t),r.hasOwnProperty()&&(n!=null&&n.length)&&Object.keys(r).forEach(a=>{n[0].setAttribute(a,r[a])}),i!=null&&i.length&&(i[0].tagName.toUpperCase()!==t.toUpperCase()&&(i=i.find(t)),i!=null&&i.length)){const a=i[0].className||"";a&&n.addClass(a)}this.cleanEmptyStyling(n)}formatPara(){this.formatBlock("P")}fontStyling(t,i){const s=this.selection.getRange();if(s!==""){const n=this.style.styleNodes(s);if(this.$editor.find(".note-status-output").html(""),$(n).css(t,i),s.collapsed){const r=f.head(n);r&&!l.nodeLength(r)&&(r.innerHTML=C.ZERO_WIDTH_NBSP_CHAR,this.selection.setRange(x.createFromNode(r.firstChild)),this.$editable.data(Ar,r))}else this.selection.setRange(s)}else{const n=$.now();this.$editor.find(".note-status-output").html('<div id="note-status-output-'+n+'" class="alert alert-info">'+this.lang.output.noSelection+"</div>"),setTimeout(function(){$("#note-status-output-"+n).remove()},5e3)}}unlink(){let t=$(this.selection.selectedControl);if(t.is("img")&&t.parent().is("a"))this.beforeCommand(),t.unwrap(),this.afterCommand(!0),this.context.modules.imagePopover.hide();else{let i=this.selection.getRange();if(i.isOnAnchor()){const s=l.ancestor(i.sc,l.isAnchor);i=x.createFromNode(s),this.selection.setRange(i),this.beforeCommand(),document.execCommand("unlink"),this.afterCommand()}}}getLinkInfo(){var r;this.hasFocus()||this.focus();let t,i,s;t=this.selection.selectedControl,(r=t==null?void 0:t.parentElement)!=null&&r.matches("a")&&(i=t.parentElement,s=x.create(i,0,i,i.childNodes.length)),s||(s=this.selection.getRange().expand(l.isAnchor)),i||(i=f.head(s.nodes(l.isAnchor)));const n={range:s,a:i,img:t,text:t?null:s.toString()};return i&&(n.url=i.getAttribute("href"),n.cssClass=i.className,n.cssStyle=i.style.cssText,n.rel=i.rel,n.isNewWindow=i.target=="_blank"),n}addRow(t){const i=this.selection.getRange();i.collapsed&&i.isOnCell()&&(this.beforeCommand(),this.table.addRow(i,t),this.afterCommand())}addCol(t){const i=this.selection.getRange();i.collapsed&&i.isOnCell()&&(this.beforeCommand(),this.table.addCol(i,t),this.afterCommand())}deleteRow(){const t=this.selection.getRange();t.collapsed&&t.isOnCell()&&(this.beforeCommand(),this.table.deleteRow(t),this.afterCommand())}deleteCol(){const t=this.selection.getRange();t.collapsed&&t.isOnCell()&&(this.beforeCommand(),this.table.deleteCol(t),this.afterCommand())}deleteTable(){const t=this.selection.getRange();t.collapsed&&t.isOnCell()&&(this.beforeCommand(),this.table.deleteTable(t),this.afterCommand())}resizeTo(t,i,s){let n;if(s){const r=t.y/t.x,a=i.data("ratio");n={width:a>r?t.x:t.y/a,height:a>r?t.x*a:t.y}}else n={width:t.x,height:t.y};i.css(n)}hasFocus(){return this.$editable.is(":focus")}focus(){this.hasFocus()||this.$editable.trigger("focus")}isEmpty(){return l.isEmpty(this.$editable[0])||l.emptyPara===this.$editable.html()}empty(){this.context.invoke("code",l.emptyPara)}normalizeContent(){this.$editable[0].normalize()}showPopover(t,i,s="top"){if(t!=null&&t.length){let n=t.data("popper");n&&n.destroy(),n=new Popper(i,t[0],{placement:s,modifiers:{computeStyle:{gpuAcceleration:!1},arrow:{element:".arrow"},preventOverflow:{boundariesElement:this.$editable[0]}}}),n.scheduleUpdate(),this.context.triggerEvent("popover.shown"),t.data("popper",n).show()}}hidePopover(t){if(t!=null&&t.length){const i=t.data("popper");i&&(i.destroy(),t.removeData("popper")),t.hide()}}}class Mr{constructor(t){this.context=t,this.options=t.options,this.$editable=t.layoutInfo.editable}initialize(){this.$editable.on("paste",this.pasteByEvent.bind(this))}pasteByEvent(t){if(this.context.isDisabled())return;const i=t.originalEvent.clipboardData;if(i&&i.items&&i.items.length){const s=i.files,n=i.getData("Text");s.length>0&&this.options.allowClipboardImagePasting&&(this.context.invoke("editor.insertImagesOrCallback",s),t.preventDefault()),n.length>0&&this.context.invoke("editor.isLimited",n.length)&&t.preventDefault()}else if(window.clipboardData){let s=window.clipboardData.getData("text");this.context.invoke("editor.isLimited",s.length)&&t.preventDefault()}setTimeout(()=>{this.context.invoke("editor.afterCommand")},10)}}class Pr{constructor(t){this.context=t,this.$eventListener=$(document),this.$editor=t.layoutInfo.editor,this.$editable=t.layoutInfo.editable,this.options=t.options,this.lang=this.options.langInfo,this.documentEventHandlers={},this.$dropzone=$(['<div class="note-dropzone">','<div class="note-dropzone-message"></div>',"</div>"].join("")).prependTo(this.$editor)}initialize(){this.options.disableDragAndDrop?(this.documentEventHandlers.onDrop=t=>{t.preventDefault()},this.$eventListener=this.$dropzone,this.$eventListener.on("drop",this.documentEventHandlers.onDrop)):this.attachDragAndDropEvent()}attachDragAndDropEvent(){let t=$();const i=this.$dropzone.find(".note-dropzone-message");this.documentEventHandlers.onDragenter=s=>{const n=this.context.invoke("codeview.isActivated"),r=this.$editor.width()>0&&this.$editor.height()>0;!n&&!t.length&&r&&(this.$editor.addClass("dragover"),this.$dropzone.width(this.$editor.width()),this.$dropzone.height(this.$editor.height()),i.text(this.lang.image.dragImageHere)),t=t.add(s.target)},this.documentEventHandlers.onDragleave=s=>{t=t.not(s.target),(!t.length||s.target.nodeName==="BODY")&&(t=$(),this.$editor.removeClass("dragover"))},this.documentEventHandlers.onDrop=()=>{t=$(),this.$editor.removeClass("dragover")},this.$eventListener.on("dragenter",this.documentEventHandlers.onDragenter).on("dragleave",this.documentEventHandlers.onDragleave).on("drop",this.documentEventHandlers.onDrop),this.$dropzone.on("dragenter",()=>{this.$dropzone.addClass("hover"),i.text(this.lang.image.dropImage)}).on("dragleave",()=>{this.$dropzone.removeClass("hover"),i.text(this.lang.image.dragImageHere)}),this.$dropzone.on("drop",s=>{const n=s.originalEvent.dataTransfer;s.preventDefault(),n&&n.files&&n.files.length?(this.$editable.trigger("focus"),this.context.invoke("editor.insertImagesOrCallback",n.files)):$.each(n.types,(r,a)=>{if(a.toLowerCase().indexOf("_moz_")>-1)return;const c=n.getData(a);a.toLowerCase().indexOf("text")>-1?this.context.invoke("editor.pasteHTML",c):$(c).each((d,h)=>{this.context.invoke("editor.insertNode",h)})})}).on("dragover",!1)}destroy(){Object.keys(this.documentEventHandlers).forEach(t=>{this.$eventListener.off(t.slice(2).toLowerCase(),this.documentEventHandlers[t])}),this.documentEventHandlers={}}}const uo="__note-jm__",fo="<!--"+uo+"-->";class Br{constructor(t){this.context=t,this.$editor=t.layoutInfo.editor,this.$editable=t.layoutInfo.editable,this.$codable=t.layoutInfo.codable,this.options=t.options,this.CodeMirrorConstructor=window.CodeMirror,this.options.codemirror.CodeMirrorConstructor&&(this.CodeMirrorConstructor=this.options.codemirror.CodeMirrorConstructor)}sync(t){const i=this.isActivated(),s=this.CodeMirrorConstructor;i&&(t?s?this.$codable.data("cmEditor").getDoc().setValue(t):this.$codable.val(t):s&&this.$codable.data("cmEditor").save())}initialize(){this.$codable.on("keyup",t=>{t.keyCode===E.code.ESCAPE&&this.deactivate()})}isActivated(){return this.$editor.hasClass("codeview")}toggle(){this.isActivated()?this.deactivate():this.activate(),this.context.triggerEvent("codeview.toggled")}purify(t){if(this.options.codeviewFilter&&(t=t.replace(this.options.codeviewFilterRegex,""),this.options.codeviewIframeFilter)){const i=this.options.codeviewIframeWhitelistSrc.concat(this.options.codeviewIframeWhitelistSrcBase);t=t.replace(/(<iframe.*?>.*?(?:<\/iframe>)?)/gi,function(s){if(/<.+src(?==?('|"|\s)?)[\s\S]+src(?=('|"|\s)?)[^>]*?>/i.test(s))return"";for(const n of i)if(new RegExp('src="(https?:)?//'+n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+'/(.+)"').test(s))return s;return""})}return t}normalizeSelRange(){const i=this.context.modules.editor.selection;let s;return i.selectedControl?s=x.createFromNodeBefore(i.selectedControl):s=i.getRange().cloneRange().collapse(!0),x.getNativeRange(s)}activate(){this.context.triggerEvent("codeview.activating");const t=this.CodeMirrorConstructor,i=this.context.modules.editor;this.normalizeSelRange().insertNode(document.createComment(uo));let n=i.html();const r=q.findPosition(n,fo);if(r&&(n=n.replace(fo,"")),this.$codable.val(n),this.$codable.height(this.$editable.height()),this.context.invoke("toolbar.updateCodeview",!0),this.context.invoke("airPopover.updateCodeview",!0),this.$editor.addClass("codeview"),this.$codable.trigger("focus"),t){const a=t.fromTextArea(this.$codable[0],this.options.codemirror);if(this.options.codemirror.tern){const c=new t.TernServer(this.options.codemirror.tern);a.ternServer=c,a.on("cursorActivity",d=>{c.updateArgHints(d)})}if(a.on("blur",c=>{this.context.triggerEvent("blur.codeview",a.getValue(),c)}),a.on("change",()=>{this.context.triggerEvent("change.codeview",a.getValue(),a)}),a.setSize(null,this.$editable.outerHeight()),this.$codable.data("cmEditor",a),r){const c={line:r.line,ch:r.column};a.setCursor(c),a.scrollIntoView(c)}}else this.$codable.on("blur",a=>{this.context.triggerEvent("blur.codeview",this.$codable.val(),a)}),this.$codable.on("input",()=>{this.context.triggerEvent("change.codeview",this.$codable.val(),this.$codable)})}deactivate(){if(this.context.triggerEvent("codeview.leaving"),this.CodeMirrorConstructor){const n=this.$codable.data("cmEditor");this.$codable.val(n.getValue()),n.toTextArea()}const i=this.purify(l.value(this.$codable,this.options.prettifyHtml)||l.emptyPara),s=this.$editable.html()!==i;this.$editable.html(i),this.$editable.height(this.options.height?this.$codable.height():"auto"),this.$editor.removeClass("codeview"),s&&this.context.triggerEvent("change",this.$editable),this.$editable.trigger("focus"),this.context.invoke("toolbar.updateCodeview",!1),this.context.invoke("airPopover.updateCodeview",!1)}destroy(){this.isActivated()&&this.deactivate()}}const po=24;class Ir{constructor(t){this.$document=$(document),this.$statusbar=t.layoutInfo.statusbar,this.$editable=t.layoutInfo.editable,this.$codable=t.layoutInfo.codable,this.options=t.options}initialize(){if(this.options.airMode||this.options.disableResizeEditor){this.destroy();return}this.$statusbar.on("mousedown touchstart",t=>{t.preventDefault(),t.stopPropagation();const i=this.$editable.offset().top-this.$document.scrollTop(),s=this.$codable.offset().top-this.$document.scrollTop(),n=r=>{let a=r.type=="mousemove"?r:r.originalEvent.touches[0],c=a.clientY-(i+po),d=a.clientY-(s+po);c=this.options.minheight>0?Math.max(c,this.options.minheight):c,c=this.options.maxHeight>0?Math.min(c,this.options.maxHeight):c,d=this.options.minheight>0?Math.max(d,this.options.minheight):d,d=this.options.maxHeight>0?Math.min(d,this.options.maxHeight):d,this.$editable.height(c),this.$codable.height(d)};this.$document.on("mousemove touchmove",n).one("mouseup touchend",()=>{this.$document.off("mousemove touchmove",n)})})}destroy(){this.$statusbar.off(),this.$statusbar.addClass("locked")}}class Fr{constructor(t){this.context=t,this.$editor=t.layoutInfo.editor,this.$toolbar=t.layoutInfo.toolbar,this.$editable=t.layoutInfo.editable,this.$codable=t.layoutInfo.codable,this.$window=$(window),this.$scrollbar=$("html, body"),this.scrollbarClassName="note-fullscreen-body",this.onResize=()=>{this.resizeTo({h:this.$window.height()-this.$toolbar.outerHeight()})}}resizeTo(t){this.$editable.css("height",t.h),this.$codable.css("height",t.h),this.$codable.data("cmeditor")&&this.$codable.data("cmeditor").setsize(null,t.h)}toggle(){this.$editor.toggleClass("fullscreen");const t=this.isFullscreen();this.$scrollbar.toggleClass(this.scrollbarClassName,t),t?(this.$editable.data("orgHeight",this.$editable.css("height")),this.$editable.data("orgMaxHeight",this.$editable.css("maxHeight")),this.$editable.css("maxHeight",""),this.$window.on("resize",this.onResize).trigger("resize")):(this.$window.off("resize",this.onResize),this.resizeTo({h:this.$editable.data("orgHeight")}),this.$editable.css("maxHeight",this.$editable.css("orgMaxHeight"))),this.context.invoke("toolbar.updateFullscreen",t)}isFullscreen(){return this.$editor.hasClass("fullscreen")}destroy(){this.$scrollbar.removeClass(this.scrollbarClassName)}}class Dr{constructor(t){this.context=t,this.editor=t.modules.editor,this.$document=$(document),this.$editingArea=t.layoutInfo.editingArea,this.options=t.options,this.lang=this.options.langInfo,this.events={"summernote.mousedown":(i,s)=>{this.update(s.target,s)&&s.preventDefault()},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":(i,s)=>{this.update(s==null?void 0:s.target,s)},"summernote.disable":()=>{this.hide()},"summernote.codeview.toggled":()=>{this.update()}}}initialize(){this.$handle=$(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"></div>','<div class="note-control-holder note-control-nw"></div>','<div class="note-control-holder note-control-ne"></div>','<div class="note-control-holder note-control-sw"></div>','<div class="',this.options.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"></div>',this.options.disableResizeImage?"":'<div class="note-control-selection-info"></div>',"</div>","</div>"].join("")).prependTo(this.$editingArea),this.$handle.on("mousedown",t=>{if(l.isControlSizing(t.target)){t.preventDefault(),t.stopPropagation();const i=this.$handle.find(".note-control-selection").data("target"),s=i.offset(),n=this.$document.scrollTop(),r=a=>{this.context.invoke("editor.resizeTo",{x:a.clientX-s.left,y:a.clientY-(s.top-n)},i,!a.shiftKey),this.update(i[0],a)};this.$document.on("mousemove",r).one("mouseup",a=>{a.preventDefault(),this.$document.off("mousemove",r),this.context.invoke("editor.afterCommand")}),i.data("ratio")||i.data("ratio",i.height()/i.width())}}),this.$handle.on("wheel",t=>{t.preventDefault(),this.update()})}destroy(){this.$handle.remove()}update(t,i){if(this.context.isDisabled())return!1;t=t||this.editor.selection.selectedControl;const s=(i==null?void 0:i.type)=="scroll";s&&(t=this.editor.selection.selectedControl);const n=l.isImg(t),r=this.$handle.find(".note-control-selection");if(s||this.context.invoke("imagePopover.update",t,i),n){const a=$(t),c=this.$editingArea[0].getBoundingClientRect(),d=t.getBoundingClientRect();r.css({display:"block",left:d.left-c.left,top:d.top-c.top,width:d.width,height:d.height}).data("target",a);const h=new Image;h.src=a.attr("src");let u=Math.ceil(d.width)+"x"+Math.ceil(d.height);h.width>0&&h.height>0&&(u+=" ("+this.lang.image.original+": "+h.width+"x"+h.height+")");const p=r.find(".note-control-selection-info").text(u),m=p.outerWidth()>d.width-10||p.outerHeight()>d.height-10;p.toggle(!m),this.context.invoke("editor.saveTarget",t)}else this.hide();return n}hide(){this.$handle.children().hide(),this.context.invoke("editor.clearTarget")}}const Or="http://",Vr=/^([A-Za-z][A-Za-z0-9+-.]*\:[\/]{2}|tel:|mailto:[A-Z0-9._%+-]+@|xmpp:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i;class Ur{constructor(t){this.context=t,this.options=t.options,this.$editable=t.layoutInfo.editable,this.events={"summernote.keyup":(i,s)=>{s.isDefaultPrevented()||this.handleKeyup(s)},"summernote.keydown":(i,s)=>{this.handleKeydown(s)}}}initialize(){this.lastWordRange=null}destroy(){this.lastWordRange=null}replace(){if(!this.lastWordRange)return;const t=this.lastWordRange.toString(),i=t.match(Vr);if(i&&(i[1]||i[2])){const s=i[1]?t:Or+t,n=this.options.showDomainOnlyForAutolink?t.replace(/^(?:https?:\/\/)?(?:tel?:?)?(?:mailto?:?)?(?:xmpp?:?)?(?:www\.)?/i,"").split("/")[0]:t,r=$("<a></a>").html(n).attr("href",s)[0];this.context.options.linkTargetBlank&&$(r).attr("target","_blank"),this.lastWordRange.insertNode(r),this.lastWordRange=null,this.context.invoke("editor.focus"),this.context.triggerEvent("change",this.$editable)}}handleKeydown(t){if(f.contains([E.code.ENTER,E.code.SPACE],t.keyCode)){const i=this.context.invoke("editor.createRange").getWordRange({trim:!0});this.lastWordRange=i}}handleKeyup(t){(E.code.SPACE===t.keyCode||E.code.ENTER===t.keyCode&&!t.shiftKey)&&this.replace()}}class _r{constructor(t){this.$note=t.layoutInfo.note,this.events={"summernote.change":()=>{this.$note.val(t.invoke("code"))}}}shouldInitialize(){return l.isTextarea(this.$note[0])}}class jr{constructor(t){this.context=t,this.options=t.options.replace||{},this.keys=[E.code.ENTER,E.code.SPACE,E.code.PERIOD,E.code.COMMA,E.code.SEMICOLON,E.code.SLASH],this.previousKeydownCode=null,this.events={"summernote.keyup":(i,s)=>{s.isDefaultPrevented()||this.handleKeyup(s)},"summernote.keydown":(i,s)=>{this.handleKeydown(s)}}}shouldInitialize(){return!!this.options.match}initialize(){this.lastWord=null}destroy(){this.lastWord=null}replace(){if(!this.lastWord)return;const t=this,i=this.lastWord.toString();this.options.match(i,function(s){if(s){let n="";if(typeof s=="string"?n=l.createText(s):s instanceof jQuery?n=s[0]:s instanceof Node&&(n=s),!n)return;t.lastWord.insertNode(n),t.lastWord=null,t.context.invoke("editor.focus")}})}handleKeydown(t){if(this.previousKeydownCode&&f.contains(this.keys,this.previousKeydownCode)){this.previousKeydownCode=t.keyCode;return}if(f.contains(this.keys,t.keyCode)){const i=this.context.invoke("editor.createRange").getWordRange();this.lastWord=i}this.previousKeydownCode=t.keyCode}handleKeyup(t){f.contains(this.keys,t.keyCode)&&this.replace()}}class qr{constructor(t){this.context=t,this.$editingArea=t.layoutInfo.editingArea,this.options=t.options,this.options.inheritPlaceholder===!0&&(this.options.placeholder=this.context.$note.attr("placeholder")||this.options.placeholder),this.events={"summernote.init summernote.change":()=>{this.update()},"summernote.codeview.toggled":()=>{this.update()}}}shouldInitialize(){return!!this.options.placeholder}initialize(){this.$placeholder=$('<div class="note-placeholder"></div>'),this.$placeholder.on("click",()=>{this.context.invoke("focus")}).html(this.options.placeholder).prependTo(this.$editingArea),this.update()}destroy(){this.$placeholder.remove()}update(){const t=!this.context.invoke("codeview.isActivated")&&this.context.invoke("editor.isEmpty");this.$placeholder.toggle(t)}}class Wr{constructor(t){this.ui=$.summernote.ui,this.context=t,this.$toolbar=t.layoutInfo.toolbar,this.options=t.options,this.lang=this.options.langInfo,this.invertedKeyMap=W.invert(this.options.keyMap[L.isMac?"mac":"pc"])}representShortcut(t){let i=this.invertedKeyMap[t];return!this.options.shortcuts||!i?"":(L.isMac&&(i=i.replace("CMD","⌘").replace("SHIFT","⇧")),i=i.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]")," ("+i+")")}button(t){return!this.options.tooltip&&t.tooltip&&delete t.tooltip,t.container=this.options.container,this.ui.button(t)}initialize(){this.addToolbarButtons(),this.addImagePopoverButtons(),this.addLinkPopoverButtons(),this.addTablePopoverButtons(),this.fontInstalledMap={}}destroy(){delete this.fontInstalledMap}isFontInstalled(t){return Object.prototype.hasOwnProperty.call(this.fontInstalledMap,t)||(this.fontInstalledMap[t]=L.isFontInstalled(t)||f.contains(this.options.fontNamesIgnoreCheck,t)),this.fontInstalledMap[t]}isFontDeservedToAdd(t){return t=t.toLowerCase(),t!==""&&this.isFontInstalled(t)&&L.genericFontFamilies.indexOf(t)===-1}colorPalette(t,i,s,n){return this.ui.buttonGroup({className:"note-color "+t,children:[this.button({className:"note-current-color-button",contents:this.ui.icon(this.options.icons.font+" note-recent-color"),tooltip:i,click:r=>{const a=$(r.currentTarget);s&&n?this.context.invoke("editor.color",{backColor:a.attr("data-backColor"),foreColor:a.attr("data-foreColor")}):s?this.context.invoke("editor.color",{backColor:a.attr("data-backColor")}):n&&this.context.invoke("editor.color",{foreColor:a.attr("data-foreColor")})},callback:r=>{const a=r.find(".note-recent-color");s&&(a.css("background-color",this.options.colorButton.backColor),r.attr("data-backColor",this.options.colorButton.backColor)),n?(a.css("color",this.options.colorButton.foreColor),r.attr("data-foreColor",this.options.colorButton.foreColor)):a.css("color","transparent")}}),this.button({className:"dropdown-toggle",contents:this.ui.dropdownButtonContents("",this.options),tooltip:this.lang.color.more,data:{toggle:"dropdown"}}),this.ui.dropdown({items:(s?['<div class="note-palette">','<div class="note-palette-title">'+this.lang.color.background+"</div>","<div>",'<button type="button" class="note-color-reset btn btn-light btn-default" data-event="backColor" data-value="transparent">',this.lang.color.transparent,"</button>","</div>",'<div class="note-holder" data-event="backColor"><!-- back colors --></div>',"<div>",'<button type="button" class="note-color-select btn btn-light btn-default" data-event="openPalette" data-value="backColorPicker-'+this.options.id+'">',this.lang.color.cpSelect,"</button>",'<input type="color" id="backColorPicker-'+this.options.id+'" class="note-btn note-color-select-btn" value="'+this.options.colorButton.backColor+'" data-event="backColorPalette-'+this.options.id+'">',"</div>",'<div class="note-holder-custom" id="backColorPalette-'+this.options.id+'" data-event="backColor"></div>',"</div>"].join(""):"")+(n?['<div class="note-palette">','<div class="note-palette-title">'+this.lang.color.foreground+"</div>","<div>",'<button type="button" class="note-color-reset btn btn-light btn-default" data-event="removeFormat" data-value="foreColor">',this.lang.color.resetToDefault,"</button>","</div>",'<div class="note-holder" data-event="foreColor"><!-- fore colors --></div>',"<div>",'<button type="button" class="note-color-select btn btn-light btn-default" data-event="openPalette" data-value="foreColorPicker-'+this.options.id+'">',this.lang.color.cpSelect,"</button>",'<input type="color" id="foreColorPicker-'+this.options.id+'" class="note-btn note-color-select-btn" value="'+this.options.colorButton.foreColor+'" data-event="foreColorPalette-'+this.options.id+'">',"</div>",'<div class="note-holder-custom" id="foreColorPalette-'+this.options.id+'" data-event="foreColor"></div>',"</div>"].join(""):""),callback:r=>{r.find(".note-holder").each((c,d)=>{const h=$(d);h.append(this.ui.palette({colors:this.options.colors,colorsName:this.options.colorsName,eventName:h.data("event"),container:this.options.container,tooltip:this.options.tooltip}).render())});var a=[["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF"]];r.find(".note-holder-custom").each((c,d)=>{const h=$(d);h.append(this.ui.palette({colors:a,colorsName:a,eventName:h.data("event"),container:this.options.container,tooltip:this.options.tooltip}).render())}),r.find("input[type=color]").each((c,d)=>{$(d).on("change",function(){const h=r.find("#"+$(this).data("event")).find(".note-color-btn").first(),u=this.value.toUpperCase();h.css("background-color",u).attr("aria-label",u).attr("data-value",u).attr("data-original-title",u),h.trigger("click")})})},click:r=>{r.stopPropagation();const a=$("."+t).find(".note-dropdown-menu"),c=$(r.target),d=c.data("event"),h=c.attr("data-value");if(d==="openPalette"){const u=a.find("#"+h),p=$(a.find("#"+u.data("event")).find(".note-color-row")[0]),m=p.find(".note-color-btn").last().detach(),v=u.val();m.css("background-color",v).attr("aria-label",v).attr("data-value",v).attr("data-original-title",v),p.prepend(m),u.trigger("click")}else{if(f.contains(["backColor","foreColor"],d)){const u=d==="backColor"?"background-color":"color",p=c.closest(".note-color").find(".note-recent-color"),m=c.closest(".note-color").find(".note-current-color-button");p.css(u,h),m.attr("data-"+d,h)}this.context.invoke("editor."+d,h)}}})]}).render()}addToolbarButtons(){this.context.memo("button.style",()=>this.ui.buttonGroup([this.button({className:"dropdown-toggle",contents:this.ui.dropdownButtonContents(this.ui.icon(this.options.icons.paragraph),this.options),tooltip:this.lang.style.style,data:{toggle:"dropdown"}}),this.ui.dropdown({className:"dropdown-style",items:this.options.styleTags,title:this.lang.style.style,template:p=>{typeof p=="string"&&(p={tag:p,title:Object.prototype.hasOwnProperty.call(this.lang.style,p)?this.lang.style[p]:p});const m=p.tag,v=p.title,T=p.style?' style="'+p.style+'" ':"",P=p.className?' class="'+p.className+'"':"";return"<"+m+T+P+">"+v+"</"+m+">"},click:this.context.createInvokeHandler("editor.formatBlock")})]).render());for(let p=0,m=this.options.styleTags.length;p<m;p++){const v=this.options.styleTags[p];this.context.memo("button.style."+v,()=>this.button({className:"note-btn-style-"+v,contents:'<div data-value="'+v+'">'+v.toUpperCase()+"</div>",tooltip:this.lang.style[v],click:this.context.createInvokeHandler("editor.formatBlock")}).render())}this.context.memo("button.bold",()=>this.button({className:"note-btn-bold",contents:this.ui.icon(this.options.icons.bold),tooltip:this.lang.font.bold+this.representShortcut("bold"),click:this.context.createInvokeHandlerAndUpdateState("editor.bold")}).render()),this.context.memo("button.italic",()=>this.button({className:"note-btn-italic",contents:this.ui.icon(this.options.icons.italic),tooltip:this.lang.font.italic+this.representShortcut("italic"),click:this.context.createInvokeHandlerAndUpdateState("editor.italic")}).render()),this.context.memo("button.underline",()=>this.button({className:"note-btn-underline",contents:this.ui.icon(this.options.icons.underline),tooltip:this.lang.font.underline+this.representShortcut("underline"),click:this.context.createInvokeHandlerAndUpdateState("editor.underline")}).render()),this.context.memo("button.clear",()=>this.button({className:"note-btn-removeformat",contents:this.ui.icon(this.options.icons.eraser),tooltip:this.lang.font.clear+this.representShortcut("removeFormat"),click:this.context.createInvokeHandler("editor.removeFormat")}).render());const t=this.button({className:"note-btn-strikethrough",contents:this.ui.icon(this.options.icons.strikethrough),tooltip:this.lang.font.strikethrough+this.representShortcut("strikethrough"),click:this.context.createInvokeHandlerAndUpdateState("editor.strikethrough")}),i=this.button({className:"note-btn-superscript",contents:this.ui.icon(this.options.icons.superscript),tooltip:this.lang.font.superscript,click:this.context.createInvokeHandlerAndUpdateState("editor.superscript")}),s=this.button({className:"note-btn-subscript",contents:this.ui.icon(this.options.icons.subscript),tooltip:this.lang.font.subscript,click:this.context.createInvokeHandlerAndUpdateState("editor.subscript")}),n=this.button({className:"note-btn-inlinecode",contents:this.ui.icon(this.options.icons.inlineCode),tooltip:this.lang.font.code,click:this.context.createInvokeHandlerAndUpdateState("editor.code")});this.context.memo("button.strikethrough",()=>t.render()),this.context.memo("button.superscript",()=>i.render()),this.context.memo("button.subscript",()=>s.render()),this.context.memo("button.inlinecode",()=>n.render()),this.context.memo("button.moreFontStyles",()=>this.ui.buttonGroup([this.button({className:"dropdown-toggle no-chevron",contents:this.ui.dropdownButtonContents(this.ui.icon(this.options.icons.ellipsis),this.options),data:{toggle:"dropdown"}}),this.ui.dropdown({className:"note-toolbar",css:{"min-width":"auto"},items:this.ui.buttonGroup({className:"note-more-fontstyles",children:[t,i,s,n]}).render()})]).render()),this.context.memo("button.fontname",()=>{const p=this.context.invoke("editor.currentStyle");return this.options.addDefaultFonts&&(f.isEmpty(p["font-family"])||$.each(p["font-family"].split(","),(m,v)=>{v=v.trim().replace(/['"]+/g,""),this.isFontDeservedToAdd(v)&&this.options.fontNames.indexOf(v)===-1&&this.options.fontNames.push(v)})),this.ui.buttonGroup([this.button({className:"dropdown-toggle",contents:this.ui.dropdownButtonContents('<span class="note-current-fontname"></span>',this.options),tooltip:this.lang.font.name,data:{toggle:"dropdown"}}),this.ui.dropdownCheck({className:"dropdown-fontname",checkClassName:this.options.icons.menuCheck,items:this.options.fontNames.filter(this.isFontInstalled.bind(this)),title:this.lang.font.name,template:m=>'<span style="font-family: '+L.validFontName(m)+'">'+m+"</span>",click:this.context.createInvokeHandlerAndUpdateState("editor.fontName")})]).render()}),this.context.memo("button.fontsize",()=>this.ui.buttonGroup([this.button({className:"dropdown-toggle",contents:this.ui.dropdownButtonContents('<span class="note-current-fontsize"></span>',this.options),tooltip:this.lang.font.size,data:{toggle:"dropdown"}}),this.ui.dropdownCheck({className:"dropdown-fontsize",checkClassName:this.options.icons.menuCheck,items:this.options.fontSizes,title:this.lang.font.size,click:this.context.createInvokeHandlerAndUpdateState("editor.fontSize")})]).render()),this.context.memo("button.fontsizeunit",()=>this.ui.buttonGroup([this.button({className:"dropdown-toggle",contents:this.ui.dropdownButtonContents('<span class="note-current-fontsizeunit"></span>',this.options),tooltip:this.lang.font.sizeunit,data:{toggle:"dropdown"}}),this.ui.dropdownCheck({className:"dropdown-fontsizeunit",checkClassName:this.options.icons.menuCheck,items:this.options.fontSizeUnits,title:this.lang.font.sizeunit,click:this.context.createInvokeHandlerAndUpdateState("editor.fontSizeUnit")})]).render()),this.context.memo("button.color",()=>this.colorPalette("note-color-all",this.lang.color.recent,!0,!0)),this.context.memo("button.forecolor",()=>this.colorPalette("note-color-fore",this.lang.color.foreground,!1,!0)),this.context.memo("button.backcolor",()=>this.colorPalette("note-color-back",this.lang.color.background,!0,!1)),this.context.memo("button.ul",()=>this.button({contents:this.ui.icon(this.options.icons.unorderedlist),tooltip:this.lang.lists.unordered+this.representShortcut("insertUnorderedList"),click:this.context.createInvokeHandler("editor.insertUnorderedList")}).render()),this.context.memo("button.ol",()=>this.button({contents:this.ui.icon(this.options.icons.orderedlist),tooltip:this.lang.lists.ordered+this.representShortcut("insertOrderedList"),click:this.context.createInvokeHandler("editor.insertOrderedList")}).render());const r=this.button({contents:this.ui.icon(this.options.icons.alignLeft),tooltip:this.lang.paragraph.left+this.representShortcut("justifyLeft"),click:this.context.createInvokeHandler("editor.justifyLeft")}),a=this.button({contents:this.ui.icon(this.options.icons.alignCenter),tooltip:this.lang.paragraph.center+this.representShortcut("justifyCenter"),click:this.context.createInvokeHandler("editor.justifyCenter")}),c=this.button({contents:this.ui.icon(this.options.icons.alignRight),tooltip:this.lang.paragraph.right+this.representShortcut("justifyRight"),click:this.context.createInvokeHandler("editor.justifyRight")}),d=this.button({contents:this.ui.icon(this.options.icons.alignJustify),tooltip:this.lang.paragraph.justify+this.representShortcut("justifyFull"),click:this.context.createInvokeHandler("editor.justifyFull")}),h=this.button({contents:this.ui.icon(this.options.icons.outdent),tooltip:this.lang.paragraph.outdent+this.representShortcut("outdent"),click:this.context.createInvokeHandler("editor.outdent")}),u=this.button({contents:this.ui.icon(this.options.icons.indent),tooltip:this.lang.paragraph.indent+this.representShortcut("indent"),click:this.context.createInvokeHandler("editor.indent")});this.context.memo("button.justifyLeft",y.invoke(r,"render")),this.context.memo("button.justifyCenter",y.invoke(a,"render")),this.context.memo("button.justifyRight",y.invoke(c,"render")),this.context.memo("button.justifyFull",y.invoke(d,"render")),this.context.memo("button.outdent",y.invoke(h,"render")),this.context.memo("button.indent",y.invoke(u,"render")),this.context.memo("button.paragraph",()=>this.ui.buttonGroup([this.button({className:"dropdown-toggle",contents:this.ui.dropdownButtonContents(this.ui.icon(this.options.icons.alignLeft),this.options),tooltip:this.lang.paragraph.paragraph,data:{toggle:"dropdown"}}),this.ui.dropdown({className:"note-toolbar",css:{"min-width":"auto"},children:[this.ui.buttonGroup({className:"note-align",children:[r,a,c,d]}),this.ui.buttonGroup({className:"note-list",children:[h,u]})]})]).render()),this.context.memo("button.height",()=>this.ui.buttonGroup([this.button({className:"dropdown-toggle",contents:this.ui.dropdownButtonContents(this.ui.icon(this.options.icons.textHeight),this.options),tooltip:this.lang.font.height,data:{toggle:"dropdown"}}),this.ui.dropdownCheck({items:this.options.lineHeights,checkClassName:this.options.icons.menuCheck,className:"dropdown-line-height",title:this.lang.font.height,click:this.context.createInvokeHandler("editor.lineHeight")})]).render()),this.context.memo("button.table",()=>this.ui.buttonGroup([this.button({className:"dropdown-toggle",contents:this.ui.dropdownButtonContents(this.ui.icon(this.options.icons.table),this.options),tooltip:this.lang.table.table,data:{toggle:"dropdown"}}),this.ui.dropdown({title:this.lang.table.table,className:"note-table",items:['<div class="note-dimension-picker">','<div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div>','<div class="note-dimension-picker-highlighted"></div>','<div class="note-dimension-picker-unhighlighted"></div>',"</div>",'<div class="note-dimension-display">1 x 1</div>'].join("")})],{callback:p=>{p.find(".note-dimension-picker-mousecatcher").css({width:this.options.insertTableMaxSize.col+"em",height:this.options.insertTableMaxSize.row+"em"}).on("mousedown",this.context.createInvokeHandler("editor.insertTable")).on("mousemove",this.tableMoveHandler.bind(this))}}).render()),this.context.memo("button.link",()=>this.button({contents:this.ui.icon(this.options.icons.link),tooltip:this.lang.link.link+this.representShortcut("linkDialog.show"),click:this.context.createInvokeHandler("linkDialog.show")}).render()),this.context.memo("button.image",()=>this.button({contents:this.ui.icon(this.options.icons.picture),tooltip:this.lang.image.image,click:this.context.createInvokeHandler("imageDialog.show")}).render()),this.context.memo("button.video",()=>this.button({contents:this.ui.icon(this.options.icons.video),tooltip:this.lang.video.video,click:this.context.createInvokeHandler("videoDialog.show")}).render()),this.context.memo("button.hr",()=>this.button({contents:this.ui.icon(this.options.icons.minus),tooltip:this.lang.hr.insert+this.representShortcut("insertHorizontalRule"),click:this.context.createInvokeHandler("editor.insertHorizontalRule")}).render()),this.context.memo("button.fullscreen",()=>this.button({className:"btn-fullscreen note-codeview-keep",contents:this.ui.icon(this.options.icons.arrowsAlt),tooltip:this.lang.options.fullscreen,click:this.context.createInvokeHandler("fullscreen.toggle")}).render()),this.context.memo("button.codeview",()=>this.button({className:"btn-codeview note-codeview-keep",contents:this.ui.icon(this.options.icons.code),tooltip:this.lang.options.codeview,click:this.context.createInvokeHandler("codeview.toggle")}).render()),this.context.memo("button.redo",()=>this.button({className:"note-redo disabled",contents:this.ui.icon(this.options.icons.redo),tooltip:this.lang.history.redo+this.representShortcut("redo"),click:this.context.createInvokeHandler("editor.redo")}).render()),this.context.memo("button.undo",()=>this.button({className:"note-undo disabled",contents:this.ui.icon(this.options.icons.undo),tooltip:this.lang.history.undo+this.representShortcut("undo"),click:this.context.createInvokeHandler("editor.undo")}).render()),this.context.memo("button.help",()=>this.button({contents:this.ui.icon(this.options.icons.question),tooltip:this.lang.options.help,click:this.context.createInvokeHandler("helpDialog.show")}).render())}addImagePopoverButtons(){this.context.memo("button.resizeFull",()=>this.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:this.lang.image.resizeFull,click:this.context.createInvokeHandler("editor.resize","1")}).render()),this.context.memo("button.resizeHalf",()=>this.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:this.lang.image.resizeHalf,click:this.context.createInvokeHandler("editor.resize","0.5")}).render()),this.context.memo("button.resizeQuarter",()=>this.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:this.lang.image.resizeQuarter,click:this.context.createInvokeHandler("editor.resize","0.25")}).render()),this.context.memo("button.resizeNone",()=>this.button({contents:this.ui.icon(this.options.icons.rollback),tooltip:this.lang.image.resizeNone,click:this.context.createInvokeHandler("editor.resize","0")}).render()),this.context.memo("button.floatLeft",()=>this.button({contents:this.ui.icon(this.options.icons.floatLeft),tooltip:this.lang.image.floatLeft,click:this.context.createInvokeHandler("editor.floatMe","left")}).render()),this.context.memo("button.floatRight",()=>this.button({contents:this.ui.icon(this.options.icons.floatRight),tooltip:this.lang.image.floatRight,click:this.context.createInvokeHandler("editor.floatMe","right")}).render()),this.context.memo("button.floatNone",()=>this.button({contents:this.ui.icon(this.options.icons.floatNone),tooltip:this.lang.image.floatNone,click:this.context.createInvokeHandler("editor.floatMe","none")}).render()),this.context.memo("button.removeMedia",()=>this.button({contents:this.ui.icon(this.options.icons.trash),tooltip:this.lang.image.remove,click:this.context.createInvokeHandler("editor.removeMedia")}).render())}addLinkPopoverButtons(){this.context.memo("button.linkDialogShow",()=>this.button({contents:this.ui.icon(this.options.icons.link),tooltip:this.lang.link.edit,click:this.context.createInvokeHandler("linkDialog.show")}).render()),this.context.memo("button.unlink",()=>this.button({className:"note-unlink",contents:this.ui.icon(this.options.icons.unlink),tooltip:this.lang.link.unlink,click:this.context.createInvokeHandler("editor.unlink")}).render())}addTablePopoverButtons(){this.context.memo("button.addRowUp",()=>this.button({className:"btn-md",contents:this.ui.icon(this.options.icons.rowAbove),tooltip:this.lang.table.addRowAbove,click:this.context.createInvokeHandler("editor.addRow","top")}).render()),this.context.memo("button.addRowDown",()=>this.button({className:"btn-md",contents:this.ui.icon(this.options.icons.rowBelow),tooltip:this.lang.table.addRowBelow,click:this.context.createInvokeHandler("editor.addRow","bottom")}).render()),this.context.memo("button.addColLeft",()=>this.button({className:"btn-md",contents:this.ui.icon(this.options.icons.colBefore),tooltip:this.lang.table.addColLeft,click:this.context.createInvokeHandler("editor.addCol","left")}).render()),this.context.memo("button.addColRight",()=>this.button({className:"btn-md",contents:this.ui.icon(this.options.icons.colAfter),tooltip:this.lang.table.addColRight,click:this.context.createInvokeHandler("editor.addCol","right")}).render()),this.context.memo("button.deleteRow",()=>this.button({className:"btn-md",contents:this.ui.icon(this.options.icons.rowRemove),tooltip:this.lang.table.delRow,click:this.context.createInvokeHandler("editor.deleteRow")}).render()),this.context.memo("button.deleteCol",()=>this.button({className:"btn-md",contents:this.ui.icon(this.options.icons.colRemove),tooltip:this.lang.table.delCol,click:this.context.createInvokeHandler("editor.deleteCol")}).render()),this.context.memo("button.deleteTable",()=>this.button({className:"btn-md",contents:this.ui.icon(this.options.icons.trash),tooltip:this.lang.table.delTable,click:this.context.createInvokeHandler("editor.deleteTable")}).render())}build(t,i){for(let s=0,n=i.length;s<n;s++){const r=i[s],a=Array.isArray(r)?r[0]:r,c=Array.isArray(r)?r.length===1?[r[0]]:r[1]:[r],d=this.ui.buttonGroup({className:"note-"+a}).render();for(let h=0,u=c.length;h<u;h++){const p=this.context.memo("button."+c[h]);p&&d.append(typeof p=="function"?p(this.context):p)}d.appendTo(t)}}updateCurrentStyle(t){const i=t||this.$toolbar,s=this.context.invoke("editor.currentStyle");if(this.updateBtnStates(i,{".note-btn-bold":()=>s["font-bold"]==="bold",".note-btn-italic":()=>s["font-italic"]==="italic",".note-btn-underline":()=>s["font-underline"]==="underline",".note-btn-subscript":()=>s["font-subscript"]==="subscript",".note-btn-superscript":()=>s["font-superscript"]==="superscript",".note-btn-strikethrough":()=>s["font-strikethrough"]==="strikethrough",".note-btn-inlinecode":()=>s["font-code"]==="code"}),s["font-family"]){const n=s["font-family"].split(",").map(a=>a.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")),r=f.find(n,this.isFontInstalled.bind(this));i.find(".dropdown-fontname a").each((a,c)=>{const d=$(c),h=d.data("value")+""==r+"";d.toggleClass("checked",h)}),i.find(".note-current-fontname").text(r).css("font-family",r).removeClass("text-muted")}else i.find(".note-current-fontname").text("Standard").css("font-family","").addClass("text-muted");if(s["font-size"]){const n=s["font-size"];i.find(".dropdown-fontsize a").each((a,c)=>{const d=$(c),h=d.data("value")+""==n+"";d.toggleClass("checked",h)}),i.find(".note-current-fontsize").text(n);const r=s["font-size-unit"];i.find(".dropdown-fontsizeunit a").each((a,c)=>{const d=$(c),h=d.data("value")+""==r+"";d.toggleClass("checked",h)}),i.find(".note-current-fontsizeunit").text(r)}if(s["line-height"]){const n=s["line-height"];i.find(".dropdown-line-height a").each((r,a)=>{const c=$(a),d=$(a).data("value")+""==n+"";c.toggleClass("checked",d)}),i.find(".note-current-line-height").text(n)}}updateBtnStates(t,i){$.each(i,(s,n)=>{this.ui.toggleBtnActive(t.find(s),n())})}tableMoveHandler(t){const s=$(t.target.parentNode),n=s.next(),r=s.find(".note-dimension-picker-mousecatcher"),a=s.find(".note-dimension-picker-highlighted"),c=s.find(".note-dimension-picker-unhighlighted");let d;if(t.offsetX===void 0){const u=$(t.target).offset();d={x:t.pageX-u.left,y:t.pageY-u.top}}else d={x:t.offsetX,y:t.offsetY};const h={c:Math.ceil(d.x/18)||1,r:Math.ceil(d.y/18)||1};a.css({width:h.c+"em",height:h.r+"em"}),r.data("value",h.c+"x"+h.r),h.c>3&&h.c<this.options.insertTableMaxSize.col&&c.css({width:h.c+1+"em"}),h.r>3&&h.r<this.options.insertTableMaxSize.row&&c.css({height:h.r+1+"em"}),n.html(h.c+" x "+h.r)}}class Kr{constructor(t){this.context=t,this.$window=$(window),this.$document=$(document),this.ui=$.summernote.ui,this.$note=t.layoutInfo.note,this.$editor=t.layoutInfo.editor,this.$toolbar=t.layoutInfo.toolbar,this.$editable=t.layoutInfo.editable,this.$statusbar=t.layoutInfo.statusbar,this.options=t.options,this.isFollowing=!1,this.followScroll=this.followScroll.bind(this)}shouldInitialize(){return!this.options.airMode}initialize(){this.options.toolbar=this.options.toolbar||[],this.options.toolbar.length?this.context.invoke("buttons.build",this.$toolbar,this.options.toolbar):this.$toolbar.hide(),this.options.toolbarContainer&&this.$toolbar.appendTo(this.options.toolbarContainer),this.changeContainer(!1),this.$note.on("summernote.keyup summernote.mouseup summernote.change",()=>{this.context.invoke("buttons.updateCurrentStyle")}),this.$note.on("summernote.change",()=>{let t=this.context.modules.editor.history;this.$toolbar.find(".note-undo").toggleClass("disabled",!t.canUndo()),this.$toolbar.find(".note-redo").toggleClass("disabled",!t.canRedo())}),this.context.invoke("buttons.updateCurrentStyle"),this.options.followingToolbar&&this.$window.on("scroll resize",this.followScroll)}destroy(){this.$toolbar.children().remove(),this.options.followingToolbar&&this.$window.off("scroll resize",this.followScroll)}followScroll(){if(this.$editor.hasClass("fullscreen"))return!1;const t=this.$editor.outerHeight(),i=this.$editor.width(),s=this.$toolbar.height(),n=this.$statusbar.height();let r=0;this.options.otherStaticBar&&(r=$(this.options.otherStaticBar).outerHeight());const a=this.$document.scrollTop(),c=this.$editor.offset().top,d=c+t,h=c-r,u=d-r-s-n;!this.isFollowing&&a>h&&a<u-s?(this.isFollowing=!0,this.$editable.css({marginTop:this.$toolbar.outerHeight()}),this.$toolbar.css({position:"fixed",top:r,width:i,zIndex:1e3})):this.isFollowing&&(a<h||a>u)&&(this.isFollowing=!1,this.$toolbar.css({position:"relative",top:0,width:"100%",zIndex:"auto"}),this.$editable.css({marginTop:""}))}changeContainer(t){t?this.$toolbar.prependTo(this.$editor):this.options.toolbarContainer&&this.$toolbar.appendTo(this.options.toolbarContainer),this.options.followingToolbar&&this.followScroll()}updateFullscreen(t){this.ui.toggleBtnActive(this.$toolbar.find(".btn-fullscreen"),t),this.changeContainer(t)}updateCodeview(t){this.ui.toggleBtnActive(this.$toolbar.find(".btn-codeview"),t),t?this.deactivate():this.activate()}activate(t){let i=this.$toolbar.find("button");t||(i=i.not(".note-codeview-keep")),this.ui.toggleBtn(i,!0)}deactivate(t){let i=this.$toolbar.find("button");t||(i=i.not(".note-codeview-keep")),this.ui.toggleBtn(i,!1)}}class Gr{constructor(t){this.context=t,this.ui=$.summernote.ui,this.$body=$(document.body),this.$editor=t.layoutInfo.editor,this.options=t.options,this.lang=this.options.langInfo,this.editor=t.modules.editor,t.memo("help.linkDialog.show",this.options.langInfo.help["linkDialog.show"])}initialize(){const t=this.options.dialogsInBody?this.$body:this.options.container,i=['<div class="form-group note-form-group">',`	<label for="note-dialog-link-txt-${this.options.id}" class="note-form-label">URL</label>`,'	<div class="input-group">',`		<input id="note-dialog-link-txt-${this.options.id}" class="note-link-url form-control note-form-control note-input" type="text" value="http://" />`,this.options.callbacks.onFileBrowse?`<div class="input-group-append"><button class="btn btn-secondary btn-browse" type="button">${this.lang.link.browse}...</button></div>`:"","	</div>","</div>",'<div class="form-group note-form-group form-group-text">',`	<label for="note-dialog-link-url-${this.options.id}" class="note-form-label">${this.lang.link.textToDisplay}</label>`,`	<input id="note-dialog-link-url-${this.options.id}" class="note-link-text form-control note-form-control note-input" type="text" />`,"</div>",'<div class="form-group note-form-group">',`	<label for="note-dialog-link-class-${this.options.id}" class="note-form-label">${this.lang.attrs.cssClass}</label>`,`	<input id="note-dialog-link-class-${this.options.id}" class="note-link-class form-control note-form-control note-input" type="text" />`,"</div>",'<div class="form-group note-form-group">',`	<label for="note-dialog-link-style-${this.options.id}" class="note-form-label">${this.lang.attrs.cssStyle}</label>`,`	<input id="note-dialog-link-style-${this.options.id}" class="note-link-style form-control note-form-control note-input" type="text" />`,"</div>",'<div class="form-group note-form-group">',`	<label for="note-dialog-link-rel-${this.options.id}" class="note-form-label">${this.lang.attrs.rel} <small class="text-muted">(alternate, author, help, license, next, nofollow, noreferrer, prefetch, prev,...)</small></label>`,`	<input id="note-dialog-link-rel-${this.options.id}" class="note-link-rel form-control note-form-control note-input" type="text" />`,"</div>",this.options.disableLinkTarget?"":$("<div></div>").append(this.ui.checkbox({id:"sn-checkbox-open-in-new-window",className:"form-switch note-new-window",text:this.lang.link.openInNewWindow,checked:!0}).render()).html()].join(""),s=['<button type="button" class="btn btn-secondary btn-flat" data-dismiss="modal">'+this.lang.common.cancel+"</button>",'<button type="submit" class="btn btn-primary note-btn note-btn-primary note-link-btn" disabled>'+this.lang.common.ok+"</button>"].join("");this.$dialog=this.ui.dialog({className:"link-dialog",title:this.lang.link.link,fade:this.options.dialogsFade,body:i,footer:s}).render().appendTo(t)}destroy(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()}bindEnterKey(t,i){t.on("keypress",s=>{if(s.keyCode===E.code.ENTER)return s.preventDefault(),s.stopPropagation(),i.trigger("click"),!1})}onCheckLinkUrl(t){t.on("blur",i=>{let s=this.editor.checkLinkUrl(i.target.value);s&&(i.target.value=s)})}showLinkDialog(t){return $.Deferred(i=>{let s=this,n=this.$dialog.find(".note-link-text"),r=this.$dialog.find(".note-link-url"),a=this.$dialog.find(".note-link-class"),c=this.$dialog.find(".note-link-style"),d=this.$dialog.find(".note-link-rel"),h=this.$dialog.find(".note-link-btn"),u=this.$dialog.find("#sn-checkbox-open-in-new-window"),p=this.$dialog.find(".btn-browse"),m;function v(){var k=r.val();t.img||(k=!!k&&!!n.val()),s.ui.toggleBtn(h,k)}function T(){L.isSupportTouch||r.trigger("focus")}!t.url&&t.text&&(t.url=this.editor.checkLinkUrl(t.text)),n.val(t.text),r.val(t.url),a.val(t.cssClass),c.val(t.cssStyle),d.val(t.rel);const P=t.isNewWindow!==void 0?t.isNewWindow:this.options.linkTargetBlank;u.prop("checked",P),this.ui.onDialogShown(this.$dialog,()=>{this.context.triggerEvent("dialog.shown"),n.on("input paste propertychange",()=>{t.text=q.escape(n.val()),v()}),r.on("input paste propertychange",()=>{t.text||n.val(r.val()),v()}),p.on("click.linkDialog",k=>{k.preventDefault(),m=$.Deferred(g=>{this.context.triggerEvent("file.browse",k,null,g)}).promise(),m.then(g=>{r.val(g).trigger("change").trigger("input")}).always(()=>{T()})}),T(),v(),this.bindEnterKey(r,h),this.bindEnterKey(n,h),this.onCheckLinkUrl(r),h.one("click",k=>{k.preventDefault(),i.resolve({img:t.img,a:t.a,range:t.range,url:r.val(),text:n.val(),cssClasss:a.val(),cssStyle:c.val(),rel:d.val(),isNewWindow:u.is(":checked")}),this.ui.hideDialog(this.$dialog)})}),this.ui.onDialogHidden(this.$dialog,()=>{n.off(),r.off(),h.off(),p.off(),i.state()==="pending"&&i.reject(),m&&m.state()==="pending"&&m.reject()}),this.ui.showDialog(this.$dialog)}).promise()}show(){const t=this.context.invoke("editor.getLinkInfo");this.$dialog.find(".form-group-text").toggle(!t.img),this.showLinkDialog(t).then(i=>{this.context.invoke("editor.selection.restoreBookmark"),this.context.invoke("editor.createLink",i)}).fail(()=>{this.context.invoke("editor.selection.restoreBookmark")})}}class Qr{constructor(t){this.context=t,this.editor=t.modules.editor,this.ui=$.summernote.ui,this.options=t.options,this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":()=>{this.update()},"summernote.disable summernote.dialog.shown summernote.popover.shown":()=>{this.hide()},"summernote.blur":(i,s)=>{s.originalEvent&&s.originalEvent.relatedTarget?this.$popover[0].contains(s.originalEvent.relatedTarget)||this.hide():this.hide()}}}shouldInitialize(){return!f.isEmpty(this.options.popover.link)}initialize(){this.$popover=this.ui.popover({className:"note-link-popover",callback:i=>{i.find(".popover-content,.note-popover-content").prepend('<span class="text-truncate d-inline-block ml-1" style="max-width: 300px"><a target="_blank" class="text-truncate"></a>&nbsp;</span>')}}).render().appendTo(this.options.container);const t=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",t,this.options.popover.link),this.$popover.on("mousedown",i=>{i.preventDefault()})}destroy(){this.$popover.remove()}update(){if(!this.context.invoke("editor.hasFocus")){this.hide();return}const t=this.context.invoke("editor.selection.getRange");if(t.collapsed&&t.isOnAnchor()){const i=l.ancestor(t.sc,l.isAnchor),s=$(i).attr("href");this.$popover.find("a").attr("href",s).attr("title",s).text(s),this.editor.showPopover(this.$popover,i)}else this.hide()}hide(){this.editor.hidePopover(this.$popover)}}class Zr{constructor(t){this.context=t,this.editor=t.modules.editor,this.ui=$.summernote.ui,this.$body=$(document.body),this.$editor=t.layoutInfo.editor,this.options=t.options,this.lang=this.options.langInfo,this.context.memo("button.imageAttributes",()=>{var i=this.ui.button({contents:this.ui.icon(this.options.icons.pencil),callback:s=>{s.data("placement","bottom"),s.data("trigger","hover"),s.attr("title",this.lang.image.imageProps),s.tooltip()},click:()=>{this.show()}});return i.render()})}initialize(){const t=this.options.dialogsInBody?this.$body:this.options.container,i=['<div class="form-group note-group-image-url">',`	<label for="note-dialog-image-url-${this.options.id}" class="note-form-label">${this.lang.image.url}</label>`,'	<div class="input-group">',`		<input id="note-dialog-image-url-${this.options.id}" class="note-image-src form-control note-form-control note-input" type="text" />`,this.options.callbacks.onFileBrowse?`<div class="input-group-append"><button class="btn btn-secondary btn-browse" type="button">${this.lang.link.browse}...</button></div>`:"","	</div>","</div>",'<div class="form-group note-form-group form-group-text">',`	<label for="note-dialog-image-alt-${this.options.id}" class="note-form-label">Alt</label>`,`	<input id="note-dialog-image-alt-${this.options.id}" class="note-image-alt form-control note-form-control note-input" type="text" />`,"</div>",'<div class="form-group note-form-group form-group-text">',`	<label for="note-dialog-image-title-${this.options.id}" class="note-form-label">Title</label>`,`	<input id="note-dialog-image-title-${this.options.id}" class="note-image-title form-control note-form-control note-input" type="text" />`,"</div>",'<div class="form-group note-form-group">',`	<label for="note-dialog-image-class-${this.options.id}" class="note-form-label">${this.lang.attrs.cssClass}</label>`,`	<input id="note-dialog-image-class-${this.options.id}" class="note-image-class form-control note-form-control note-input" type="text" />`,"</div>",'<div class="form-group note-form-group">',`	<label for="note-dialog-image-style-${this.options.id}" class="note-form-label">${this.lang.attrs.cssStyle}</label>`,`	<input id="note-dialog-image-style-${this.options.id}" class="note-image-style form-control note-form-control note-input" type="text" />`,"</div>"].join(""),s=['<button type="button" class="btn btn-secondary btn-flat" data-dismiss="modal">'+this.lang.common.cancel+"</button>",'<button type="submit" class="btn btn-primary note-btn note-btn-primary note-image-btn" disabled>'+this.lang.common.ok+"</button>"].join("");this.$dialog=this.ui.dialog({className:"image-dialog",title:this.lang.image.image,fade:this.options.dialogsFade,body:i,footer:s}).render().appendTo(t)}destroy(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()}bindEnterKey(t){this.$dialog.find(".note-input").on("keypress.imageDialog",i=>{if(i.keyCode===E.code.ENTER)return i.preventDefault(),i.stopPropagation(),t.trigger("click"),!1})}show(){let t={},i=$(this.editor.selection.selectedControl);i.length&&(t={img:i,src:i.attr("src"),alt:i.attr("alt"),title:i.attr("title"),cssClass:i.attr("class"),cssStyle:i.attr("style")}),this.showImageDialog(t).then(s=>{this.ui.hideDialog(this.$dialog),this.context.invoke("editor.selection.restoreBookmark");const n=(r,a)=>{a&&l.setAttr(r,"src",this.$dialog.find(".note-image-src").val()),l.setAttr(r,"alt",this.$dialog.find(".note-image-alt").val()),l.setAttr(r,"title",this.$dialog.find(".note-image-title").val()),l.setAttr(r,"class",this.$dialog.find(".note-image-class").val()),l.setAttr(r,"style",this.$dialog.find(".note-image-style").val())};s.img?(n(s.img,!0),this.context.layoutInfo.note.val(this.context.invoke("code")),this.context.layoutInfo.note.change()):this.context.invoke("editor.insertImage",this.$dialog.find(".note-image-src").val(),n)}).fail(()=>{this.context.invoke("editor.selection.restoreBookmark")})}showImageDialog(t){return $.Deferred(i=>{let s=this.$dialog.find(".note-image-src"),n=this.$dialog.find(".note-image-class"),r=this.$dialog.find(".note-image-style"),a=this.$dialog.find(".note-image-alt"),c=this.$dialog.find(".note-image-title"),d=this.$dialog.find(".note-image-btn"),h=this.$dialog.find(".btn-browse"),u;s.on("input.imageDialog",p=>{this.ui.toggleBtn(d,s.val())}),s.val(t.src),n.val(t.cssClass),r.val(t.cssStyle),a.val(t.alt),c.val(t.title),this.ui.toggleBtn(d,t.src),this.ui.onDialogShown(this.$dialog,()=>{this.context.triggerEvent("dialog.shown");function p(){L.isSupportTouch||s.trigger("focus")}p(),h.on("click.imageDialog",m=>{m.preventDefault(),u=$.Deferred(v=>{this.context.triggerEvent("file.browse",m,"image",v)}).promise(),u.then(v=>{s.val(v).trigger("change").trigger("input")}).always(()=>{p()})}),this.bindEnterKey(d),d.one("click",m=>{m.preventDefault(),i.resolve({img:t.img,src:t.src,alt:t.alt,title:t.title,cssClass:t.cssClass,cssStyle:t.cssStyle}),this.ui.hideDialog(this.$dialog)})}),this.ui.onDialogHidden(this.$dialog,()=>{this.$dialog.find(".note-input").off("keypress"),s.off(),d.off(),h.off(),i.state()==="pending"&&i.reject(),u&&u.state()==="pending"&&u.reject()}),this.ui.showDialog(this.$dialog)}).promise()}}class Yr{constructor(t){this.context=t,this.editor=t.modules.editor,this.ui=$.summernote.ui,this.editable=t.layoutInfo.editable[0],this.options=t.options,this.events={"summernote.disable summernote.dialog.shown summernote.popover.shown":()=>{this.hide()},"summernote.blur":(i,s)=>{s.originalEvent&&s.originalEvent.relatedTarget?this.$popover[0].contains(s.originalEvent.relatedTarget)||this.hide():this.hide()}}}shouldInitialize(){return!f.isEmpty(this.options.popover.image)}initialize(){this.$popover=this.ui.popover({className:"note-image-popover"}).render().appendTo(this.options.container);const t=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",t,this.options.popover.image),this.$popover.on("mousedown",i=>{i.preventDefault()})}destroy(){this.$popover.remove()}update(t,i){if(l.isImg(t)){const s=$(t),n=this.$popover.find(".note-unlink");if(n.length){const r=s.parent().is("a");n.toggle(r)}this.editor.showPopover(this.$popover,t)}else this.hide()}hide(){this.editor.hidePopover(this.$popover)}}class Jr{constructor(t){this.context=t,this.editor=t.modules.editor,this.ui=$.summernote.ui,this.options=t.options,this.events={"summernote.mousedown":(i,s)=>{this.update(s==null?void 0:s.target,s)},"summernote.keyup summernote.scroll summernote.change":(i,s)=>{this.update(s==null?void 0:s.target,s)},"summernote.disable summernote.dialog.shown summernote.popover.shown":()=>{this.hide()},"summernote.blur":(i,s)=>{s.originalEvent&&s.originalEvent.relatedTarget?this.$popover[0].contains(s.originalEvent.relatedTarget)||this.hide():this.hide()}}}shouldInitialize(){return!f.isEmpty(this.options.popover.table)}initialize(){this.$popover=this.ui.popover({className:"note-table-popover"}).render().appendTo(this.options.container);const t=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",t,this.options.popover.table),L.isFF&&document.execCommand("enableInlineTableEditing",!1,!1),this.$popover.on("mousedown",i=>{i.preventDefault()})}destroy(){this.$popover.remove()}update(t,i){if(this.context.isDisabled()||(i==null?void 0:i.type)=="scroll")return!1;if((l.isCell(t)||l.isCell(t==null?void 0:t.parentElement))&&!(l.isVoid(t)||l.isAnchor(t)||l.isAnchor(t==null?void 0:t.parentElement))){const a=l.ancestor(t,l.isTable);return a&&this.editor.showPopover(this.$popover,a),!0}return this.hide(),!1}hide(){this.editor.hidePopover(this.$popover)}}class Xr{constructor(t){this.context=t,this.ui=$.summernote.ui,this.$body=$(document.body),this.$editor=t.layoutInfo.editor,this.options=t.options,this.lang=this.options.langInfo}initialize(){const t=this.options.dialogsInBody?this.$body:this.options.container,i=['<div class="form-group note-form-group row-fluid">',`<label for="note-dialog-video-url-${this.options.id}" class="note-form-label">${this.lang.video.url} <small class="text-muted">${this.lang.video.providers}</small></label>`,`<input id="note-dialog-video-url-${this.options.id}" class="note-video-url form-control note-form-control note-input" type="text"/>`,"</div>"].join(""),n=`<input type="button" href="#" class="btn btn-primary note-btn note-btn-primary note-video-btn" value="${this.lang.video.insert}" disabled>`;this.$dialog=this.ui.dialog({title:this.lang.video.insert,fade:this.options.dialogsFade,body:i,footer:n}).render().appendTo(t)}destroy(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()}bindEnterKey(t,i){t.on("keypress",s=>{s.keyCode===E.code.ENTER&&(s.preventDefault(),i.trigger("click"))})}createVideoNode(t){const i=/(?:youtu\.be\/|youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=|shorts\/|live\/))([^&\n?]+)(?:.*[?&]t=([^&\n]+))?.*/,s=/^(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s)?$/,n=t.match(i),r=/(?:\.|\/\/)drive\.google\.com\/file\/d\/(.[a-zA-Z0-9_-]*)\/view/,a=t.match(r),c=/(?:www\.|\/\/)instagram\.com\/(reel|p)\/(.[a-zA-Z0-9_-]*)/,d=t.match(c),h=/\/\/vine\.co\/v\/([a-zA-Z0-9]+)/,u=t.match(h),p=/\/\/(player\.)?vimeo\.com\/([a-z]*\/)*(\d+)[?]?.*/,m=t.match(p),v=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/,T=t.match(v),P=/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/,k=t.match(P),g=/\/\/(.*)\/videos\/watch\/([^?]*)(?:\?(?:start=(\w*))?(?:&stop=(\w*))?(?:&loop=([10]))?(?:&autoplay=([10]))?(?:&muted=([10]))?)?/,b=t.match(g),S=/\/\/v\.qq\.com.*?vid=(.+)/,N=t.match(S),j=/\/\/v\.qq\.com\/x?\/?(page|cover).*?\/([^\/]+)\.html\??.*/,B=t.match(j),X=/^.+.(mp4|m4v)$/,G=t.match(X),V=/^.+.(ogg|ogv)$/,it=t.match(V),fa=/^.+.(webm)$/,pa=t.match(fa),ma=/(?:www\.|\/\/)facebook\.com\/([^\/]+)\/videos\/([0-9]+)/,Yt=t.match(ma);let U;if(n&&n[1].length===11){const Xt=n[1];var dt=0;if(typeof n[2]<"u"){const te=n[2].match(s);if(te)for(var Co=[3600,60,1],ht=0,ga=Co.length;ht<ga;ht++)dt+=typeof te[ht+1]<"u"?Co[ht]*parseInt(te[ht+1],10):0;else dt=parseInt(n[2],10)}U=$("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+Xt+(dt>0?"?start="+dt:"")).attr("width","640").attr("height","360")}else if(a&&a[0].length)U=$("<iframe>").attr("frameborder",0).attr("src","https://drive.google.com/file/d/"+a[1]+"/preview").attr("width","640").attr("height","480");else if(d&&d[0].length)U=$("<iframe>").attr("frameborder",0).attr("src","https://instagram.com/p/"+d[2]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true");else if(u&&u[0].length)U=$("<iframe>").attr("frameborder",0).attr("src",u[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed");else if(m&&m[3].length)U=$("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+m[3]).attr("width","640").attr("height","360");else if(T&&T[2].length)U=$("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+T[2]).attr("width","640").attr("height","360");else if(k&&k[1].length)U=$("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+k[1]);else if(b&&b[0].length){var Jt=0;b[2]!=="undefined"&&(Jt=b[2]);var wo=0;b[3]!=="undefined"&&(wo=b[3]);var ko=0;b[4]!=="undefined"&&(ko=b[4]);var yo=0;b[5]!=="undefined"&&(yo=b[5]);var xo=0;b[6]!=="undefined"&&(xo=b[6]),U=$('<iframe allowfullscreen sandbox="allow-same-origin allow-scripts allow-popups">').attr("frameborder",0).attr("src","//"+b[1]+"/videos/embed/"+b[2]+"?loop="+ko+"&autoplay="+yo+"&muted="+xo+(Jt>0?"&start="+Jt:"")+(wo>0?"&end="+dt:"")).attr("width","560").attr("height","315")}else if(N&&N[1].length||B&&B[2].length){const Xt=N&&N[1].length?N[1]:B[2];U=$("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","310").attr("width","500").attr("src","https://v.qq.com/txp/iframe/player.html?vid="+Xt+"&amp;auto=0")}else if(G||it||pa)U=$("<video controls>").attr("src",t).attr("width","640").attr("height","360");else if(Yt&&Yt[0].length)U=$("<iframe>").attr("frameborder",0).attr("src","https://www.facebook.com/plugins/video.php?href="+encodeURIComponent(Yt[0])+"&show_text=0&width=560").attr("width","560").attr("height","301").attr("scrolling","no").attr("allowtransparency","true");else return!1;return U.addClass("note-video-clip"),U[0]}show(){const t=this.context.invoke("editor.getSelectedText");this.showVideoDialog(t).then(i=>{this.ui.hideDialog(this.$dialog),this.context.invoke("editor.selection.restoreBookmark");const s=this.createVideoNode(i);s&&this.context.invoke("editor.insertNode",s)}).fail(()=>{this.context.invoke("editor.selection.restoreBookmark")})}showVideoDialog(){return $.Deferred(t=>{const i=this.$dialog.find(".note-video-url"),s=this.$dialog.find(".note-video-btn");this.ui.onDialogShown(this.$dialog,()=>{this.context.triggerEvent("dialog.shown"),i.on("input paste propertychange",()=>{this.ui.toggleBtn(s,i.val())}),L.isSupportTouch||i.trigger("focus"),s.on("click",n=>{n.preventDefault(),t.resolve(i.val())}),this.bindEnterKey(i,s)}),this.ui.onDialogHidden(this.$dialog,()=>{i.off(),s.off(),t.state()==="pending"&&t.reject()}),this.ui.showDialog(this.$dialog)})}}class ta{constructor(t){this.context=t,this.ui=$.summernote.ui,this.$body=$(document.body),this.$editor=t.layoutInfo.editor,this.options=t.options,this.lang=this.options.langInfo}initialize(){const t=this.options.dialogsInBody?this.$body:this.options.container,i=['<p class="text-center">','<a href="http://summernote.org/" target="_blank" rel="noopener noreferrer">Summernote @@VERSION@@</a> · ','<a href="https://github.com/summernote/summernote" target="_blank" rel="noopener noreferrer">Project</a> · ','<a href="https://github.com/summernote/summernote/issues" target="_blank" rel="noopener noreferrer">Issues</a>',"</p>"].join("");this.$dialog=this.ui.dialog({title:this.lang.options.help,fade:this.options.dialogsFade,body:this.createShortcutList(),footer:i,callback:s=>{s.find(".modal-body,.note-modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(t)}destroy(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()}createShortcutList(){const t=this.options.keyMap[L.isMac?"mac":"pc"];return Object.keys(t).map(i=>{const s=t[i],n=$('<div><div class="help-list-item"></div></div>');return n.append($("<label><kbd>"+i+"</kdb></label>").css({width:180,"margin-right":10})).append($("<span></span>").html(this.context.memo("help."+s)||s)),n.html()}).join("")}showHelpDialog(){return $.Deferred(t=>{this.ui.onDialogShown(this.$dialog,()=>{this.context.triggerEvent("dialog.shown"),t.resolve()}),this.ui.showDialog(this.$dialog)}).promise()}show(){this.showHelpDialog().then(()=>{this.context.invoke("editor.selection.restoreBookmark")})}}function ea(e){const t=$(document);return{top:e.top+t.scrollTop(),left:e.left+t.scrollLeft(),width:e.right-e.left,height:e.bottom-e.top}}const oa={rect2bnd:ea,rgbaToHexString:e=>e},mo=5;class ia{constructor(t){this.context=t,this.editor=t.modules.editor,this.ui=$.summernote.ui,this.$editable=t.layoutInfo.editable,this.options=t.options,this.hint=this.options.hint||[],this.direction=this.options.hintDirection||"bottom",this.hints=Array.isArray(this.hint)?this.hint:[this.hint],this.events={"summernote.keyup":(i,s)=>{s.isDefaultPrevented()||this.handleKeyup(s)},"summernote.keydown":(i,s)=>{this.handleKeydown(s)},"summernote.disable summernote.dialog.shown summernote.blur":()=>{this.hide()}}}shouldInitialize(){return this.hints.length>0}initialize(){this.lastWordRange=null,this.matchingWord=null,this.$popover=this.ui.popover({className:"note-hint-popover",hideArrow:!0,direction:""}).render().appendTo(this.options.container),this.$popover.hide(),this.$content=this.$popover.find(".popover-content,.note-popover-content"),this.$content.on("click",".note-hint-item",t=>{this.$content.find(".active").removeClass("active"),$(t.currentTarget).addClass("active"),this.replace()}),this.$popover.on("mousedown",t=>{t.preventDefault()})}destroy(){this.$popover.remove()}selectItem(t){this.$content.find(".active").removeClass("active"),t.addClass("active"),this.$content[0].scrollTop=t[0].offsetTop-this.$content.innerHeight()/2}moveDown(){const t=this.$content.find(".note-hint-item.active"),i=t.next();if(i.length)this.selectItem(i);else{let s=t.parent().next();s.length||(s=this.$content.find(".note-hint-group").first()),this.selectItem(s.find(".note-hint-item").first())}}moveUp(){const t=this.$content.find(".note-hint-item.active"),i=t.prev();if(i.length)this.selectItem(i);else{let s=t.parent().prev();s.length||(s=this.$content.find(".note-hint-group").last()),this.selectItem(s.find(".note-hint-item").last())}}replace(){const t=this.$content.find(".note-hint-item.active");if(t.length){var i=this.nodeFromItem(t);if(this.matchingWord!==null&&this.matchingWord.length===0)this.lastWordRange.so=this.lastWordRange.eo;else if(this.matchingWord!==null&&this.matchingWord.length>0&&!this.lastWordRange.collapsed){let n=this.lastWordRange.eo-this.lastWordRange.so-this.matchingWord.length;n>0&&(this.lastWordRange.so+=n)}if(this.lastWordRange.insertNode(i),this.options.hintSelect==="next"){var s=document.createTextNode("");$(i).after(s),this.editor.selection.setRange(x.createFromNodeBefore(s))}else this.editor.selection.setRange(x.createFromNodeAfter(i));this.lastWordRange=null,this.hide(),this.context.invoke("editor.focus"),this.context.triggerEvent("change",this.$editable)}}nodeFromItem(t){const i=this.hints[t.data("index")],s=t.data("item");let n=i.content?i.content(s):s;return typeof n=="string"&&(n=l.createText(n)),n}createItemTemplates(t,i){const s=this.hints[t];return i.map((n,r)=>{const a=$('<div class="note-hint-item"></div>');return a.append(s.template?s.template(n):n+""),a.data({index:t,item:n}),t===0&&r===0&&a.addClass("active"),a})}handleKeydown(t){this.$popover.is(":visible")&&(t.keyCode===E.code.ENTER?(t.preventDefault(),this.replace()):t.keyCode===E.code.UP?(t.preventDefault(),this.moveUp()):t.keyCode===E.code.DOWN&&(t.preventDefault(),this.moveDown()))}searchKeyword(t,i,s){const n=this.hints[t];if(n&&n.match.test(i)&&n.search){const r=n.match.exec(i);this.matchingWord=r[0],n.search(r[1],s)}else s()}createGroup(t,i){const s=$('<div class="note-hint-group note-hint-group-'+t+'"></div>');return this.searchKeyword(t,i,n=>{n=n||[],n.length&&(s.html(this.createItemTemplates(t,n)),this.show())}),s}handleKeyup(t){if(!f.contains([E.code.ENTER,E.code.UP,E.code.DOWN],t.keyCode)){let i=this.context.invoke("editor.selection.getRange"),s,n;if(this.options.hintMode==="words"){if(s=i.getWordsRange(i),n=s.toString(),this.hints.forEach(r=>{if(r.match.test(n))return s=i.getWordsMatchRange(r.match),!1}),!s){this.hide();return}n=s.toString()}else s=i.getWordRange(),n=s.toString();if(this.hints.length&&n){this.$content.empty();const r=oa.rect2bnd(f.last(s.getClientRects())),a=$(this.options.container).offset();r&&(r.top-=a.top,r.left-=a.left,this.$popover.hide(),this.lastWordRange=s,this.hints.forEach((c,d)=>{c.match.test(n)&&this.createGroup(d,n).appendTo(this.$content)}),this.$content.find(".note-hint-item").first().addClass("active"),this.direction==="top"?this.$popover.css({left:r.left,top:r.top-this.$popover.outerHeight()-mo}):this.$popover.css({left:r.left,top:r.top+r.height+mo}))}else this.hide()}}show(){this.$popover.show()}hide(){this.$popover.hide()}}$.summernote=$.extend($.summernote,{version:"@@VERSION@@",plugins:{},dom:l,range:x,lists:f,options:{langInfo:$.summernote.lang["en-US"],editing:!0,modules:{editor:zr,clipboard:Mr,dropzone:Pr,codeview:Br,statusbar:Ir,fullscreen:Fr,handle:Dr,hintPopover:ia,autoLink:Ur,autoSync:_r,autoReplace:jr,placeholder:qr,buttons:Wr,toolbar:Kr,linkDialog:Gr,linkPopover:Qr,imageDialog:Zr,imagePopover:Yr,tablePopover:Jr,videoDialog:Xr,helpDialog:ta},buttons:{},lang:"en-US",followingToolbar:!1,toolbarPosition:"top",otherStaticBar:"",codeviewKeepButton:!1,toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popatmouse:!0,popover:{image:[["resize",["resizeFull","resizeHalf","resizeQuarter","resizeNone"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],table:[["add",["addRowDown","addRowUp","addColLeft","addColRight"]],["delete",["deleteRow","deleteCol","deleteTable"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]],["view",["fullscreen","codeview"]]]},linkAddNoReferrer:!1,addLinkNoOpener:!1,airMode:!1,overrideContextMenu:!1,width:null,height:null,linkTargetBlank:!0,focus:!1,tabDisable:!1,tabSize:4,styleWithCSS:!1,shortcuts:!0,textareaAutoSync:!0,tooltip:"auto",container:null,maxTextLength:0,blockquoteBreakingLevel:2,spellCheck:!0,disableGrammar:!1,placeholder:null,inheritPlaceholder:!1,recordEveryKeystroke:!1,historyLimit:200,sanitizeHtml:!0,prettifyHtml:!0,showDomainOnlyForAutolink:!1,hintMode:"word",hintSelect:"after",hintDirection:"bottom",styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontNamesIgnoreCheck:[],addDefaultFonts:!0,fontSizes:["8","9","10","11","12","14","18","24","36"],fontSizeUnits:["px","pt"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],colorsName:[["Black","Tundora","Dove Gray","Star Dust","Pale Slate","Gallery","Alabaster","White"],["Red","Orange Peel","Yellow","Green","Cyan","Blue","Electric Violet","Magenta"],["Azalea","Karry","Egg White","Zanah","Botticelli","Tropical Blue","Mischka","Twilight"],["Tonys Pink","Peach Orange","Cream Brulee","Sprout","Casper","Perano","Cold Purple","Careys Pink"],["Mandy","Rajah","Dandelion","Olivine","Gulf Stream","Viking","Blue Marguerite","Puce"],["Guardsman Red","Fire Bush","Golden Dream","Chelsea Cucumber","Smalt Blue","Boston Blue","Butterfly Bush","Cadillac"],["Sangria","Mai Tai","Buddha Gold","Forest Green","Eden","Venice Blue","Meteorite","Claret"],["Rosewood","Cinnamon","Olive","Parsley","Tiber","Midnight Blue","Valentino","Loulou"]],colorButton:{foreColor:"#000000",backColor:"#FFFF00"},lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:!1,dialogsFade:!1,maximumImageFileSize:null,acceptImageFileTypes:"image/*",allowClipboardImagePasting:!0,callbacks:{onBeforeCommand:null,onBlur:null,onBlurCodeview:null,onChange:null,onChangeCodeview:null,onDialogShown:null,onEnter:null,onFocus:null,onFileBrowse:null,onImageLinkInsert:null,onImageUpload:null,onImageUploadError:null,onSanitizeHtml:null,onInit:null,onKeydown:null,onKeyup:null,onMousedown:null,onMouseup:null,onPaste:null,onScroll:null},codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},codeviewFilter:!0,codeviewFilterRegex:/<\/*(?:applet|b(?:ase|gsound|link)|embed|frame(?:set)?|ilayer|l(?:ayer|ink)|meta|object|s(?:cript|tyle)|t(?:itle|extarea)|xml)[^>]*?>/gi,codeviewIframeFilter:!0,codeviewIframeWhitelistSrc:[],codeviewIframeWhitelistSrcBase:["www.youtube.com","www.youtube-nocookie.com","www.facebook.com","vine.co","instagram.com","player.vimeo.com","www.dailymotion.com","player.youku.com","jumpingbean.tv","v.qq.com"],keyMap:{pc:{ESC:"escape",ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ESC:"escape",ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:Zn}});class sa{constructor(t,i,s,n){this.markup=t,this.children=i,this.options=s,this.callback=n}render(t){const i=$(this.markup);if(this.options&&this.options.contents&&i.html(this.options.contents),this.options&&this.options.className&&i.addClass(this.options.className),this.options&&this.options.css&&i.css(this.options.css),this.options&&this.options.data&&$.each(this.options.data,(s,n)=>{i.attr("data-"+s,n)}),this.options&&this.options.click&&i.on("click",this.options.click),this.children){const s=i.find(".note-children-container");this.children.forEach(n=>{n.render(s.length?s:i)})}return this.callback&&this.callback(i,this.options),this.options&&this.options.callback&&this.options.callback(i),t&&t.append(i),i}}const M={create:(e,t)=>function(){const i=typeof arguments[1]=="object"?arguments[1]:arguments[0];let s=Array.isArray(arguments[0])?arguments[0]:[];return i&&i.children&&(s=i.children),new sa(e,s,i,t)}},Kt=M.create('<div class="note-editor note-frame card"></div>'),Gt=M.create('<div class="note-toolbar note-toolbar-main card-header" role="toolbar"></div>'),xt=M.create('<div class="note-editing-area"></div>'),$t=M.create('<textarea class="note-codable" aria-multiline="true"></textarea>'),Qt=M.create('<div class="note-editable card-block" contentEditable="true" role="textbox" aria-multiline="true"></div>'),Zt=M.create(['<output class="note-status-output" role="status" aria-live="polite"></output>','<div class="note-statusbar" role="status">','<div class="note-resizebar" aria-label="Resize">','<div class="note-icon-bar"></div>','<div class="note-icon-bar"></div>','<div class="note-icon-bar"></div>',"</div>","</div>"].join("")),go=M.create('<div class="note-editor note-airframe"></div>'),bo=M.create(['<div class="note-editable" contentEditable="true" role="textbox" aria-multiline="true"></div>','<output class="note-status-output" role="status" aria-live="polite"></output>'].join("")),na=M.create('<div class="note-btn-group btn-group"></div>'),ra=M.create('<div class="note-dropdown-menu dropdown-menu" role="list"></div>',function(e,t){const i=Array.isArray(t.items)?t.items.map(function(s){const n=typeof s=="string"?s:s.value||"",r=t.template?t.template(s):s,a=typeof s=="object"?s.option:void 0,c='data-value="'+n+'"',d=a!==void 0?' data-option="'+a+'"':"";return'<a class="dropdown-item" href="#" '+(c+d)+' role="listitem" aria-label="'+n+'">'+r+"</a>"}).join(""):t.items;e.html(i).attr({"aria-label":t.title}),t&&t.codeviewKeepButton&&e.addClass("note-codeview-keep")}),aa=function(e){return e},la=M.create('<div class="note-dropdown-menu dropdown-menu note-check" role="list"></div>',function(e,t){const i=Array.isArray(t.items)?t.items.map(function(s){const n=typeof s=="string"?s:s.value||"",r=t.template?t.template(s):s;return'<a class="dropdown-item" href="#" data-value="'+n+'" role="listitem" aria-label="'+s+'">'+vo(t.checkClassName)+" "+r+"</a>"}).join(""):t.items;e.html(i).attr({"aria-label":t.title}),t&&t.codeviewKeepButton&&e.addClass("note-codeview-keep")}),ca=M.create('<div class="modal note-modal" aria-hidden="false" tabindex="-1" role="dialog"></div>',function(e,t){t.fade&&e.addClass("fade"),e.attr({"aria-label":t.title}),e.html(['<div class="modal-dialog">','<div class="modal-content">',t.title?'<div class="modal-header"><h4 class="modal-title">'+t.title+'</h4><button type="button" class="close" data-dismiss="modal" aria-label="Close" aria-hidden="true"></button></div>':"",'<div class="modal-body">'+t.body+"</div>",t.footer?'<div class="modal-footer">'+t.footer+"</div>":"","</div>","</div>"].join(""))}),da=M.create(['<div class="note-popover popover bs-popover-auto show" x-arrow="arrow">','<div class="arrow"></div>','<div class="popover-content note-toolbar note-children-container"></div>',"</div>"].join(""),function(e,t){t.hideArrow&&e.find(".arrow").hide()}),ha=M.create('<div class="form-check"></div>',function(e,t){e.html(['<input type="checkbox" class="form-check-input"'+(t.id?' id="note-'+t.id+'"':""),t.checked?" checked":"",' aria-label="'+(t.text?t.text:"")+'"',' aria-checked="'+(t.checked?"true":"false")+'"/>','<label class="form-check-label"'+(t.id?' for="note-'+t.id+'"':"")+">"," "+(t.text?t.text:"")+"</label>"].join(""))}),vo=function(e,t){return e.match(/^</)?e:(t=t||"i","<"+t+' class="'+e+'"></'+t+">")},ua=function(e){return{editor:Kt,toolbar:Gt,editingArea:xt,codable:$t,editable:Qt,statusbar:Zt,airEditor:go,airEditable:bo,buttonGroup:na,dropdown:ra,dropdownButtonContents:aa,dropdownCheck:la,dialog:ca,popover:da,icon:vo,checkbox:ha,options:e,palette:function(t,i){return M.create('<div class="note-color-palette"></div>',function(s,n){const r=[];for(let c=0,d=n.colors.length;c<d;c++){const h=n.eventName,u=n.colors[c],p=n.colorsName[c],m=[];for(let v=0,T=u.length;v<T;v++){const P=u[v],k=p[v];m.push(['<button type="button" class="note-color-btn"','style="background-color:',P,'" ','data-event="',h,'" ','data-value="',P,'" ','title="',k,'" ','aria-label="',k,'" ','data-toggle="button" tabindex="-1"></button>'].join(""))}r.push('<div class="note-color-row">'+m.join("")+"</div>")}if(s.html(r.join("")),n.tooltip){var a={container:n.container||e.container,trigger:"hover",placement:"bottom"};s.tooltip({selector:".note-color-btn",...a})}})(t,i)},button:function(t,i){return M.create('<button type="button" class="note-btn btn btn-light btn-sm"></button>',function(s,n){n&&n.tooltip&&s.attr({title:n.tooltip,"aria-label":n.tooltip}).tooltip({container:n.container||e.container,trigger:"hover",placement:"bottom"}).on("click",r=>{$(r.currentTarget).tooltip("hide")}),n&&n.codeviewButton&&s.addClass("note-codeview-keep")})(t,i)},toggleBtn:function(t,i){t.toggleClass("disabled",!i),t.attr("disabled",!i)},toggleBtnActive:function(t,i){t.toggleClass("active",i)},onDialogShown:function(t,i){t.one("shown.bs.modal",i)},onDialogHidden:function(t,i){t.one("hidden.bs.modal",i)},showDialog:function(t){t.modal("show")},hideDialog:function(t){t.modal("hide")},createLayout:function(t){const i=(e.airMode?go([xt([$t(),bo()])]):e.toolbarPosition==="bottom"?Kt([xt([$t(),Qt()]),Gt(),Zt()]):Kt([Gt(),xt([$t(),Qt()]),Zt()])).render();return i.insertAfter(t),{note:t,editor:i,toolbar:i.find(".note-toolbar"),editingArea:i.find(".note-editing-area"),editable:i.find(".note-editable"),codable:i.find(".note-codable"),statusbar:i.find(".note-statusbar")}},removeLayout:function(t,i){t.html(i.editable.html()),i.editor.remove(),t.show()}}};$.summernote=$.extend($.summernote,{ui_template:ua,interface:"sm"})})();
//# sourceMappingURL=summernote-sm.js.map
